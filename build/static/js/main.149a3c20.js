/*! For license information please see main.149a3c20.js.LICENSE.txt */
!function(){var e={757:function(e,t,n){e.exports=n(727)},725:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,a){for(var o,u,s=i(e),c=1;c<arguments.length;c++){for(var l in o=Object(arguments[c]))n.call(o,l)&&(s[l]=o[l]);if(t){u=t(o);for(var f=0;f<u.length;f++)r.call(o,u[f])&&(s[u[f]]=o[u[f]])}}return s}},463:function(e,t,n){"use strict";var r=n(791),i=n(725),a=n(296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var u=new Set,s={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(s[e]=t,e=0;e<t.length;e++)u.add(t[e])}var f=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d=Object.prototype.hasOwnProperty,p={},v={};function m(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function k(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(v,e)||!d.call(p,e)&&(h.test(e)?v[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,k);y[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,k);y[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,k);y[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=60103,_=60106,I=60107,E=60108,T=60114,S=60109,C=60110,N=60112,A=60113,D=60120,P=60115,O=60116,R=60121,L=60128,M=60129,F=60130,j=60131;if("function"===typeof Symbol&&Symbol.for){var U=Symbol.for;x=U("react.element"),_=U("react.portal"),I=U("react.fragment"),E=U("react.strict_mode"),T=U("react.profiler"),S=U("react.provider"),C=U("react.context"),N=U("react.forward_ref"),A=U("react.suspense"),D=U("react.suspense_list"),P=U("react.memo"),O=U("react.lazy"),R=U("react.block"),U("react.scope"),L=U("react.opaque.id"),M=U("react.debug_trace_mode"),F=U("react.offscreen"),j=U("react.legacy_hidden")}var V,B="function"===typeof Symbol&&Symbol.iterator;function q(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=B&&e[B]||e["@@iterator"])?e:null}function z(e){if(void 0===V)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);V=t&&t[1]||""}return"\n"+V+e}var K=!1;function W(e,t){if(!e||K)return"";K=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(s){var r=s}Reflect.construct(e,[],t)}else{try{t.call()}catch(s){r=s}e.call(t.prototype)}else{try{throw Error()}catch(s){r=s}e()}}catch(s){if(s&&r&&"string"===typeof s.stack){for(var i=s.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u])return"\n"+i[o].replace(" at new "," at ")}while(1<=o&&0<=u);break}}}finally{K=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function H(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=W(e.type,!1);case 11:return e=W(e.type.render,!1);case 22:return e=W(e.type._render,!1);case 1:return e=W(e.type,!0);default:return""}}function G(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case I:return"Fragment";case _:return"Portal";case T:return"Profiler";case E:return"StrictMode";case A:return"Suspense";case D:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case N:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case P:return G(e.type);case R:return G(e._render);case O:t=e._payload,e=e._init;try{return G(e(t))}catch(n){}}return null}function Q(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Y(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function $(e){e._valueTracker||(e._valueTracker=function(e){var t=Y(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function J(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Y(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function X(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=Q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,Q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ae(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ue(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Q(n)}}function ce(e,t){var n=Q(t.value),r=Q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var fe="http://www.w3.org/1999/xhtml",he="http://www.w3.org/2000/svg";function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?de(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ve,me,ye=(me=function(e,t){if(e.namespaceURI!==he||"innerHTML"in e)e.innerHTML=t;else{for((ve=ve||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ve.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return me(e,t)}))}:me);function ge(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ke={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},be=["Webkit","ms","Moz","O"];function we(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||ke.hasOwnProperty(e)&&ke[e]?(""+t).trim():t+"px"}function xe(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=we(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ke).forEach((function(e){be.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ke[t]=ke[e]}))}));var _e=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ie(e,t){if(t){if(_e[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function Ee(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Te(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,Ce=null,Ne=null;function Ae(e){if(e=ri(e)){if("function"!==typeof Se)throw Error(o(280));var t=e.stateNode;t&&(t=ai(t),Se(e.stateNode,e.type,t))}}function De(e){Ce?Ne?Ne.push(e):Ne=[e]:Ce=e}function Pe(){if(Ce){var e=Ce,t=Ne;if(Ne=Ce=null,Ae(e),t)for(e=0;e<t.length;e++)Ae(t[e])}}function Oe(e,t){return e(t)}function Re(e,t,n,r,i){return e(t,n,r,i)}function Le(){}var Me=Oe,Fe=!1,je=!1;function Ue(){null===Ce&&null===Ne||(Le(),Pe())}function Ve(e,t){var n=e.stateNode;if(null===n)return null;var r=ai(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Be=!1;if(f)try{var qe={};Object.defineProperty(qe,"passive",{get:function(){Be=!0}}),window.addEventListener("test",qe,qe),window.removeEventListener("test",qe,qe)}catch(me){Be=!1}function ze(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Ke=!1,We=null,He=!1,Ge=null,Qe={onError:function(e){Ke=!0,We=e}};function Ye(e,t,n,r,i,a,o,u,s){Ke=!1,We=null,ze.apply(Qe,arguments)}function $e(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Je(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Xe(e){if($e(e)!==e)throw Error(o(188))}function Ze(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=$e(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Xe(i),e;if(a===r)return Xe(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=a;break}if(s===r){u=!0,r=i,n=a;break}s=s.sibling}if(!u){for(s=a.child;s;){if(s===n){u=!0,n=a,r=i;break}if(s===r){u=!0,r=a,n=i;break}s=s.sibling}if(!u)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,rt,it,at=!1,ot=[],ut=null,st=null,ct=null,lt=new Map,ft=new Map,ht=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pt(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function vt(e,t){switch(e){case"focusin":case"focusout":ut=null;break;case"dragenter":case"dragleave":st=null;break;case"mouseover":case"mouseout":ct=null;break;case"pointerover":case"pointerout":lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ft.delete(t.pointerId)}}function mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e=pt(t,n,r,i,a),null!==t&&(null!==(t=ri(t))&&nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function yt(e){var t=ni(e.target);if(null!==t){var n=$e(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Je(n)))return e.blockedOn=t,void it(e.lanePriority,(function(){a.unstable_runWithPriority(e.priority,(function(){rt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function gt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ri(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function kt(e,t,n){gt(e)&&n.delete(t)}function bt(){for(at=!1;0<ot.length;){var e=ot[0];if(null!==e.blockedOn){null!==(e=ri(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&ot.shift()}null!==ut&&gt(ut)&&(ut=null),null!==st&&gt(st)&&(st=null),null!==ct&&gt(ct)&&(ct=null),lt.forEach(kt),ft.forEach(kt)}function wt(e,t){e.blockedOn===t&&(e.blockedOn=null,at||(at=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,bt)))}function xt(e){function t(t){return wt(t,e)}if(0<ot.length){wt(ot[0],e);for(var n=1;n<ot.length;n++){var r=ot[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==ut&&wt(ut,e),null!==st&&wt(st,e),null!==ct&&wt(ct,e),lt.forEach(t),ft.forEach(t),n=0;n<ht.length;n++)(r=ht[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ht.length&&null===(n=ht[0]).blockedOn;)yt(n),null===n.blockedOn&&ht.shift()}function _t(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var It={animationend:_t("Animation","AnimationEnd"),animationiteration:_t("Animation","AnimationIteration"),animationstart:_t("Animation","AnimationStart"),transitionend:_t("Transition","TransitionEnd")},Et={},Tt={};function St(e){if(Et[e])return Et[e];if(!It[e])return e;var t,n=It[e];for(t in n)if(n.hasOwnProperty(t)&&t in Tt)return Et[e]=n[t];return e}f&&(Tt=document.createElement("div").style,"AnimationEvent"in window||(delete It.animationend.animation,delete It.animationiteration.animation,delete It.animationstart.animation),"TransitionEvent"in window||delete It.transitionend.transition);var Ct=St("animationend"),Nt=St("animationiteration"),At=St("animationstart"),Dt=St("transitionend"),Pt=new Map,Ot=new Map,Rt=["abort","abort",Ct,"animationEnd",Nt,"animationIteration",At,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Dt,"transitionEnd","waiting","waiting"];function Lt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Ot.set(r,t),Pt.set(r,i),c(i,[r])}}(0,a.unstable_now)();var Mt=8;function Ft(e){if(0!==(1&e))return Mt=15,1;if(0!==(2&e))return Mt=14,2;if(0!==(4&e))return Mt=13,4;var t=24&e;return 0!==t?(Mt=12,t):0!==(32&e)?(Mt=11,32):0!==(t=192&e)?(Mt=10,t):0!==(256&e)?(Mt=9,256):0!==(t=3584&e)?(Mt=8,t):0!==(4096&e)?(Mt=7,4096):0!==(t=4186112&e)?(Mt=6,t):0!==(t=62914560&e)?(Mt=5,t):67108864&e?(Mt=4,67108864):0!==(134217728&e)?(Mt=3,134217728):0!==(t=805306368&e)?(Mt=2,t):0!==(1073741824&e)?(Mt=1,1073741824):(Mt=8,e)}function jt(e,t){var n=e.pendingLanes;if(0===n)return Mt=0;var r=0,i=0,a=e.expiredLanes,o=e.suspendedLanes,u=e.pingedLanes;if(0!==a)r=a,i=Mt=15;else if(0!==(a=134217727&n)){var s=a&~o;0!==s?(r=Ft(s),i=Mt):0!==(u&=a)&&(r=Ft(u),i=Mt)}else 0!==(a=n&~o)?(r=Ft(a),i=Mt):0!==u&&(r=Ft(u),i=Mt);if(0===r)return 0;if(r=n&((0>(r=31-Kt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&o)){if(Ft(t),i<=Mt)return t;Mt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Kt(t)),r|=e[n],t&=~i;return r}function Ut(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Vt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Bt(24&~t))?Vt(10,t):e;case 10:return 0===(e=Bt(192&~t))?Vt(8,t):e;case 8:return 0===(e=Bt(3584&~t))&&(0===(e=Bt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Bt(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function Bt(e){return e&-e}function qt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function zt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Kt(t)]=n}var Kt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Wt(e)/Ht|0)|0},Wt=Math.log,Ht=Math.LN2;var Gt=a.unstable_UserBlockingPriority,Qt=a.unstable_runWithPriority,Yt=!0;function $t(e,t,n,r){Fe||Le();var i=Xt,a=Fe;Fe=!0;try{Re(i,e,t,n,r)}finally{(Fe=a)||Ue()}}function Jt(e,t,n,r){Qt(Gt,Xt.bind(null,e,t,n,r))}function Xt(e,t,n,r){var i;if(Yt)if((i=0===(4&t))&&0<ot.length&&-1<dt.indexOf(e))e=pt(null,e,t,n,r),ot.push(e);else{var a=Zt(e,t,n,r);if(null===a)i&&vt(e,r);else{if(i){if(-1<dt.indexOf(e))return e=pt(a,e,t,n,r),void ot.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return ut=mt(ut,e,t,n,r,i),!0;case"dragenter":return st=mt(st,e,t,n,r,i),!0;case"mouseover":return ct=mt(ct,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return lt.set(a,mt(lt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,ft.set(a,mt(ft.get(a)||null,e,t,n,r,i)),!0}return!1}(a,e,t,n,r))return;vt(e,r)}Lr(e,t,r,null,n)}}}function Zt(e,t,n,r){var i=Te(r);if(null!==(i=ni(i))){var a=$e(i);if(null===a)i=null;else{var o=a.tag;if(13===o){if(null!==(i=Je(a)))return i;i=null}else if(3===o){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Lr(e,t,r,i,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,r=n.length,i="value"in en?en.value:en.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return nn=i.slice(e,1<t?1-t:void 0)}function an(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function on(){return!0}function un(){return!1}function sn(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?on:un,this.isPropagationStopped=un,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),t}var cn,ln,fn,hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=sn(hn),pn=i({},hn,{view:0,detail:0}),vn=sn(pn),mn=i({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fn&&(fn&&"mousemove"===e.type?(cn=e.screenX-fn.screenX,ln=e.screenY-fn.screenY):ln=cn=0,fn=e),cn)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),yn=sn(mn),gn=sn(i({},mn,{dataTransfer:0})),kn=sn(i({},pn,{relatedTarget:0})),bn=sn(i({},hn,{animationName:0,elapsedTime:0,pseudoElement:0})),wn=i({},hn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xn=sn(wn),_n=sn(i({},hn,{data:0})),In={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Tn[e])&&!!t[e]}function Cn(){return Sn}var Nn=i({},pn,{key:function(e){if(e.key){var t=In[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=an(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?an(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?an(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),An=sn(Nn),Dn=sn(i({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=sn(i({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),On=sn(i({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=i({},mn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ln=sn(Rn),Mn=[9,13,27,32],Fn=f&&"CompositionEvent"in window,jn=null;f&&"documentMode"in document&&(jn=document.documentMode);var Un=f&&"TextEvent"in window&&!jn,Vn=f&&(!Fn||jn&&8<jn&&11>=jn),Bn=String.fromCharCode(32),qn=!1;function zn(e,t){switch(e){case"keyup":return-1!==Mn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Wn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function Qn(e,t,n,r){De(r),0<(t=Fr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Yn=null,$n=null;function Jn(e){Nr(e,0)}function Xn(e){if(J(ii(e)))return e}function Zn(e,t){if("change"===e)return t}var er=!1;if(f){var tr;if(f){var nr="oninput"in document;if(!nr){var rr=document.createElement("div");rr.setAttribute("oninput","return;"),nr="function"===typeof rr.oninput}tr=nr}else tr=!1;er=tr&&(!document.documentMode||9<document.documentMode)}function ir(){Yn&&(Yn.detachEvent("onpropertychange",ar),$n=Yn=null)}function ar(e){if("value"===e.propertyName&&Xn($n)){var t=[];if(Qn(t,$n,e,Te(e)),e=Jn,Fe)e(t);else{Fe=!0;try{Oe(e,t)}finally{Fe=!1,Ue()}}}}function or(e,t,n){"focusin"===e?(ir(),$n=n,(Yn=t).attachEvent("onpropertychange",ar)):"focusout"===e&&ir()}function ur(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn($n)}function sr(e,t){if("click"===e)return Xn(t)}function cr(e,t){if("input"===e||"change"===e)return Xn(t)}var lr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},fr=Object.prototype.hasOwnProperty;function hr(e,t){if(lr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!fr.call(t,n[r])||!lr(e[n[r]],t[n[r]]))return!1;return!0}function dr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pr(e,t){var n,r=dr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dr(r)}}function vr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?vr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function mr(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function yr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var gr=f&&"documentMode"in document&&11>=document.documentMode,kr=null,br=null,wr=null,xr=!1;function _r(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xr||null==kr||kr!==X(r)||("selectionStart"in(r=kr)&&yr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},wr&&hr(wr,r)||(wr=r,0<(r=Fr(br,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=kr)))}Lt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Lt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Lt(Rt,2);for(var Ir="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Er=0;Er<Ir.length;Er++)Ot.set(Ir[Er],0);l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tr));function Cr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,u,s,c){if(Ye.apply(this,arguments),Ke){if(!Ke)throw Error(o(198));var l=We;Ke=!1,We=null,He||(He=!0,Ge=l)}}(r,t,void 0,e),e.currentTarget=null}function Nr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Cr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Cr(i,u,c),a=s}}}if(He)throw e=Ge,He=!1,Ge=null,e}function Ar(e,t){var n=oi(t),r=e+"__bubble";n.has(r)||(Rr(t,e,2,!1),n.add(r))}var Dr="_reactListening"+Math.random().toString(36).slice(2);function Pr(e){e[Dr]||(e[Dr]=!0,u.forEach((function(t){Sr.has(t)||Or(t,!1,e,null),Or(t,!0,e,null)})))}function Or(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=n;if("selectionchange"===e&&9!==n.nodeType&&(a=n.ownerDocument),null!==r&&!t&&Sr.has(e)){if("scroll"!==e)return;i|=2,a=r}var o=oi(a),u=e+"__"+(t?"capture":"bubble");o.has(u)||(t&&(i|=4),Rr(a,e,i,t),o.add(u))}function Rr(e,t,n,r){var i=Ot.get(t);switch(void 0===i?2:i){case 0:i=$t;break;case 1:i=Jt;break;default:i=Xt}n=i.bind(null,t,n,e),i=void 0,!Be||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Lr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=ni(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}!function(e,t,n){if(je)return e(t,n);je=!0;try{Me(e,t,n)}finally{je=!1,Ue()}}((function(){var r=a,i=Te(n),o=[];e:{var u=Pt.get(e);if(void 0!==u){var s=dn,c=e;switch(e){case"keypress":if(0===an(n))break e;case"keydown":case"keyup":s=An;break;case"focusin":c="focus",s=kn;break;case"focusout":c="blur",s=kn;break;case"beforeblur":case"afterblur":s=kn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=yn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Pn;break;case Ct:case Nt:case At:s=bn;break;case Dt:s=On;break;case"scroll":s=vn;break;case"wheel":s=Ln;break;case"copy":case"cut":case"paste":s=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Dn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Ve(p,h))&&l.push(Mr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(c=n.relatedTarget||n.fromElement)||!ni(c)&&!c[ei])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?ni(c):null)&&(c!==(f=$e(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=yn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Dn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:ii(s),d=null==c?u:ii(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,ni(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=jr(d))p++;for(d=0,v=h;v;v=jr(v))d++;for(;0<p-d;)l=jr(l),p--;for(;0<d-p;)h=jr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=jr(l),h=jr(h)}l=null}else l=null;null!==s&&Ur(o,u,s,l,!1),null!==c&&null!==f&&Ur(o,f,c,l,!0)}if("select"===(s=(u=r?ii(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var m=Zn;else if(Gn(u))if(er)m=cr;else{m=ur;var y=or}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(m=sr);switch(m&&(m=m(e,r))?Qn(o,m,n,i):(y&&y(e,u,r),"focusout"===e&&(y=u._wrapperState)&&y.controlled&&"number"===u.type&&ie(u,"number",u.value)),y=r?ii(r):window,e){case"focusin":(Gn(y)||"true"===y.contentEditable)&&(kr=y,br=r,wr=null);break;case"focusout":wr=br=kr=null;break;case"mousedown":xr=!0;break;case"contextmenu":case"mouseup":case"dragend":xr=!1,_r(o,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":_r(o,n,i)}var g;if(Fn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Wn?zn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Vn&&"ko"!==n.locale&&(Wn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Wn&&(g=rn()):(tn="value"in(en=i)?en.value:en.textContent,Wn=!0)),0<(y=Fr(r,k)).length&&(k=new _n(k,e,null,n,i),o.push({event:k,listeners:y}),g?k.data=g:null!==(g=Kn(n))&&(k.data=g))),(g=Un?function(e,t){switch(e){case"compositionend":return Kn(t);case"keypress":return 32!==t.which?null:(qn=!0,Bn);case"textInput":return(e=t.data)===Bn&&qn?null:e;default:return null}}(e,n):function(e,t){if(Wn)return"compositionend"===e||!Fn&&zn(e,t)?(e=rn(),nn=tn=en=null,Wn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Vn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Fr(r,"onBeforeInput")).length&&(i=new _n("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Nr(o,t)}))}function Mr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Fr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Ve(e,n))&&r.unshift(Mr(e,a,i)),null!=(a=Ve(e,t))&&r.push(Mr(e,a,i))),e=e.return}return r}function jr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ur(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Ve(n,a))&&o.unshift(Mr(n,s,u)):i||null!=(s=Ve(n,a))&&o.push(Mr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function Vr(){}var Br=null,qr=null;function zr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Kr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Wr="function"===typeof setTimeout?setTimeout:void 0,Hr="function"===typeof clearTimeout?clearTimeout:void 0;function Gr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Qr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Yr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var $r=0;var Jr=Math.random().toString(36).slice(2),Xr="__reactFiber$"+Jr,Zr="__reactProps$"+Jr,ei="__reactContainer$"+Jr,ti="__reactEvents$"+Jr;function ni(e){var t=e[Xr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ei]||n[Xr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Yr(e);null!==e;){if(n=e[Xr])return n;e=Yr(e)}return t}n=(e=n).parentNode}return null}function ri(e){return!(e=e[Xr]||e[ei])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ii(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ai(e){return e[Zr]||null}function oi(e){var t=e[ti];return void 0===t&&(t=e[ti]=new Set),t}var ui=[],si=-1;function ci(e){return{current:e}}function li(e){0>si||(e.current=ui[si],ui[si]=null,si--)}function fi(e,t){si++,ui[si]=e.current,e.current=t}var hi={},di=ci(hi),pi=ci(!1),vi=hi;function mi(e,t){var n=e.type.contextTypes;if(!n)return hi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function yi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function gi(){li(pi),li(di)}function ki(e,t,n){if(di.current!==hi)throw Error(o(168));fi(di,t),fi(pi,n)}function bi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in e))throw Error(o(108,G(t)||"Unknown",a));return i({},n,r)}function wi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hi,vi=di.current,fi(di,e),fi(pi,pi.current),!0}function xi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=bi(e,t,vi),r.__reactInternalMemoizedMergedChildContext=e,li(pi),li(di),fi(di,e)):li(pi),fi(pi,n)}var _i=null,Ii=null,Ei=a.unstable_runWithPriority,Ti=a.unstable_scheduleCallback,Si=a.unstable_cancelCallback,Ci=a.unstable_shouldYield,Ni=a.unstable_requestPaint,Ai=a.unstable_now,Di=a.unstable_getCurrentPriorityLevel,Pi=a.unstable_ImmediatePriority,Oi=a.unstable_UserBlockingPriority,Ri=a.unstable_NormalPriority,Li=a.unstable_LowPriority,Mi=a.unstable_IdlePriority,Fi={},ji=void 0!==Ni?Ni:function(){},Ui=null,Vi=null,Bi=!1,qi=Ai(),zi=1e4>qi?Ai:function(){return Ai()-qi};function Ki(){switch(Di()){case Pi:return 99;case Oi:return 98;case Ri:return 97;case Li:return 96;case Mi:return 95;default:throw Error(o(332))}}function Wi(e){switch(e){case 99:return Pi;case 98:return Oi;case 97:return Ri;case 96:return Li;case 95:return Mi;default:throw Error(o(332))}}function Hi(e,t){return e=Wi(e),Ei(e,t)}function Gi(e,t,n){return e=Wi(e),Ti(e,t,n)}function Qi(){if(null!==Vi){var e=Vi;Vi=null,Si(e)}Yi()}function Yi(){if(!Bi&&null!==Ui){Bi=!0;var e=0;try{var t=Ui;Hi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Ui=null}catch(n){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ti(Pi,Qi),n}finally{Bi=!1}}}var $i=w.ReactCurrentBatchConfig;function Ji(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Xi=ci(null),Zi=null,ea=null,ta=null;function na(){ta=ea=Zi=null}function ra(e){var t=Xi.current;li(Xi),e.type._context._currentValue=t}function ia(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function aa(e,t){Zi=e,ta=ea=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Fo=!0),e.firstContext=null)}function oa(e,t){if(ta!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(ta=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ea){if(null===Zi)throw Error(o(308));ea=t,Zi.dependencies={lanes:0,firstContext:t,responders:null}}else ea=ea.next=t;return e._currentValue}var ua=!1;function sa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ca(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function la(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fa(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function ha(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function da(e,t,n,r){var a=e.updateQueue;ua=!1;var o=a.firstBaseUpdate,u=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var c=s,l=c.next;c.next=null,null===u?o=l:u.next=l,u=c;var f=e.alternate;if(null!==f){var h=(f=f.updateQueue).lastBaseUpdate;h!==u&&(null===h?f.firstBaseUpdate=l:h.next=l,f.lastBaseUpdate=c)}}if(null!==o){for(h=a.baseState,u=0,f=l=c=null;;){s=o.lane;var d=o.eventTime;if((r&s)===s){null!==f&&(f=f.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,v=o;switch(s=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,s);break e}h=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(s="function"===typeof(p=v.payload)?p.call(d,h,s):p)||void 0===s)break e;h=i({},h,s);break e;case 2:ua=!0}}null!==o.callback&&(e.flags|=32,null===(s=a.effects)?a.effects=[o]:s.push(o))}else d={eventTime:d,lane:s,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===f?(l=f=d,c=h):f=f.next=d,u|=s;if(null===(o=o.next)){if(null===(s=a.shared.pending))break;o=s.next,s.next=null,a.lastBaseUpdate=s,a.shared.pending=null}}null===f&&(c=h),a.baseState=c,a.firstBaseUpdate=l,a.lastBaseUpdate=f,Bu|=u,e.lanes=u,e.memoizedState=h}}function pa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var va=(new r.Component).refs;function ma(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ya={isMounted:function(e){return!!(e=e._reactInternals)&&$e(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=hs(),i=ds(e),a=la(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),fa(e,a),ps(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=hs(),i=ds(e),a=la(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),fa(e,a),ps(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=hs(),r=ds(e),i=la(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),fa(e,i),ps(e,r,n)}};function ga(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!hr(n,r)||!hr(i,a))}function ka(e,t,n){var r=!1,i=hi,a=t.contextType;return"object"===typeof a&&null!==a?a=oa(a):(i=yi(t)?vi:di.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?mi(e,i):hi),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ya,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function ba(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ya.enqueueReplaceState(t,t.state,null)}function wa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=va,sa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=oa(a):(a=yi(t)?vi:di.current,i.context=mi(e,a)),da(e,n,i,r),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ma(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ya.enqueueReplaceState(i,i.state,null),da(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4)}var xa=Array.isArray;function _a(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===va&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Ia(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Ea(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Hs(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function u(t){return e&&null===t.alternate&&(t.flags=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=$s(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=_a(e,t,n),r.return=e,r):((r=Gs(n.type,n.key,n.props,null,e.mode,r)).ref=_a(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Js(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Qs(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=$s(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Gs(t.type,t.key,t.props,null,e.mode,n)).ref=_a(e,null,t),n.return=e,n;case _:return(t=Js(t,e.mode,n)).return=e,t}if(xa(t)||q(t))return(t=Qs(t,e.mode,n,null)).return=e,t;Ia(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?n.type===I?f(e,t,n.props.children,r,i):c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null}if(xa(n)||q(n))return null!==i?null:f(e,t,n,r,null);Ia(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return e=e.get(null===r.key?n:r.key)||null,r.type===I?f(t,e,r.props.children,i,r.key):c(t,e,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(xa(r)||q(r))return f(t,e=e.get(n)||null,r,i,null);Ia(t,r)}return null}function v(i,o,u,s){for(var c=null,l=null,f=o,v=o=0,m=null;null!==f&&v<u.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var y=d(i,f,u[v],s);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),o=a(y,o,v),null===l?c=y:l.sibling=y,l=y,f=m}if(v===u.length)return n(i,f),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(o=a(f,o,v),null===l?c=f:l.sibling=f,l=f);return c}for(f=r(i,f);v<u.length;v++)null!==(m=p(f,i,v,u[v],s))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),o=a(m,o,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),c}function m(i,u,s,c){var l=q(s);if("function"!==typeof l)throw Error(o(150));if(null==(s=l.call(s)))throw Error(o(151));for(var f=l=null,v=u,m=u=0,y=null,g=s.next();null!==v&&!g.done;m++,g=s.next()){v.index>m?(y=v,v=null):y=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=y);break}e&&v&&null===k.alternate&&t(i,v),u=a(k,u,m),null===f?l=k:f.sibling=k,f=k,v=y}if(g.done)return n(i,v),l;if(null===v){for(;!g.done;m++,g=s.next())null!==(g=h(i,g.value,c))&&(u=a(g,u,m),null===f?l=g:f.sibling=g,f=g);return l}for(v=r(i,v);!g.done;m++,g=s.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),u=a(g,u,m),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),l}return function(e,r,a,s){var c="object"===typeof a&&null!==a&&a.type===I&&null===a.key;c&&(a=a.props.children);var l="object"===typeof a&&null!==a;if(l)switch(a.$$typeof){case x:e:{for(l=a.key,c=r;null!==c;){if(c.key===l){if(7===c.tag){if(a.type===I){n(e,c.sibling),(r=i(c,a.props.children)).return=e,e=r;break e}}else if(c.elementType===a.type){n(e,c.sibling),(r=i(c,a.props)).ref=_a(e,c,a),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}a.type===I?((r=Qs(a.props.children,e.mode,s,a.key)).return=e,e=r):((s=Gs(a.type,a.key,a.props,null,e.mode,s)).ref=_a(e,r,a),s.return=e,e=s)}return u(e);case _:e:{for(c=a.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),(r=i(r,a.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Js(a,e.mode,s)).return=e,e=r}return u(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,a)).return=e,e=r):(n(e,r),(r=$s(a,e.mode,s)).return=e,e=r),u(e);if(xa(a))return v(e,r,a,s);if(q(a))return m(e,r,a,s);if(l&&Ia(e,a),"undefined"===typeof a&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,G(e.type)||"Component"))}return n(e,r)}}var Ta=Ea(!0),Sa=Ea(!1),Ca={},Na=ci(Ca),Aa=ci(Ca),Da=ci(Ca);function Pa(e){if(e===Ca)throw Error(o(174));return e}function Oa(e,t){switch(fi(Da,t),fi(Aa,e),fi(Na,Ca),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}li(Na),fi(Na,t)}function Ra(){li(Na),li(Aa),li(Da)}function La(e){Pa(Da.current);var t=Pa(Na.current),n=pe(t,e.type);t!==n&&(fi(Aa,e),fi(Na,n))}function Ma(e){Aa.current===e&&(li(Na),li(Aa))}var Fa=ci(0);function ja(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ua=null,Va=null,Ba=!1;function qa(e,t){var n=Ks(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function za(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Ka(e){if(Ba){var t=Va;if(t){var n=t;if(!za(e,t)){if(!(t=Qr(n.nextSibling))||!za(e,t))return e.flags=-1025&e.flags|2,Ba=!1,void(Ua=e);qa(Ua,n)}Ua=e,Va=Qr(t.firstChild)}else e.flags=-1025&e.flags|2,Ba=!1,Ua=e}}function Wa(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ua=e}function Ha(e){if(e!==Ua)return!1;if(!Ba)return Wa(e),Ba=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Kr(t,e.memoizedProps))for(t=Va;t;)qa(e,t),t=Qr(t.nextSibling);if(Wa(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Va=Qr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Va=null}}else Va=Ua?Qr(e.stateNode.nextSibling):null;return!0}function Ga(){Va=Ua=null,Ba=!1}var Qa=[];function Ya(){for(var e=0;e<Qa.length;e++)Qa[e]._workInProgressVersionPrimary=null;Qa.length=0}var $a=w.ReactCurrentDispatcher,Ja=w.ReactCurrentBatchConfig,Xa=0,Za=null,eo=null,to=null,no=!1,ro=!1;function io(){throw Error(o(321))}function ao(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function oo(e,t,n,r,i,a){if(Xa=a,Za=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,$a.current=null===e||null===e.memoizedState?Oo:Ro,e=n(r,i),ro){a=0;do{if(ro=!1,!(25>a))throw Error(o(301));a+=1,to=eo=null,t.updateQueue=null,$a.current=Lo,e=n(r,i)}while(ro)}if($a.current=Po,t=null!==eo&&null!==eo.next,Xa=0,to=eo=Za=null,no=!1,t)throw Error(o(300));return e}function uo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===to?Za.memoizedState=to=e:to=to.next=e,to}function so(){if(null===eo){var e=Za.alternate;e=null!==e?e.memoizedState:null}else e=eo.next;var t=null===to?Za.memoizedState:to.next;if(null!==t)to=t,eo=e;else{if(null===e)throw Error(o(310));e={memoizedState:(eo=e).memoizedState,baseState:eo.baseState,baseQueue:eo.baseQueue,queue:eo.queue,next:null},null===to?Za.memoizedState=to=e:to=to.next=e}return to}function co(e,t){return"function"===typeof t?t(e):t}function lo(e){var t=so(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=eo,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var u=i.next;i.next=a.next,a.next=u}r.baseQueue=i=a,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var s=u=a=null,c=i;do{var l=c.lane;if((Xa&l)===l)null!==s&&(s=s.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var f={lane:l,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===s?(u=s=f,a=r):s=s.next=f,Za.lanes|=l,Bu|=l}c=c.next}while(null!==c&&c!==i);null===s?a=r:s.next=u,lr(r,t.memoizedState)||(Fo=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=s,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function fo(e){var t=so(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{a=e(a,u.action),u=u.next}while(u!==i);lr(a,t.memoizedState)||(Fo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function ho(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(Xa&e)===e)&&(t._workInProgressVersionPrimary=r,Qa.push(t))),e)return n(t._source);throw Qa.push(t),Error(o(350))}function po(e,t,n,r){var i=Ou;if(null===i)throw Error(o(349));var a=t._getVersion,u=a(t._source),s=$a.current,c=s.useState((function(){return ho(i,t,n)})),l=c[1],f=c[0];c=to;var h=e.memoizedState,d=h.refs,p=d.getSnapshot,v=h.source;h=h.subscribe;var m=Za;return e.memoizedState={refs:d,source:t,subscribe:r},s.useEffect((function(){d.getSnapshot=n,d.setSnapshot=l;var e=a(t._source);if(!lr(u,e)){e=n(t._source),lr(f,e)||(l(e),e=ds(m),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,o=e;0<o;){var s=31-Kt(o),c=1<<s;r[s]|=e,o&=~c}}}),[n,t,r]),s.useEffect((function(){return r(t._source,(function(){var e=d.getSnapshot,n=d.setSnapshot;try{n(e(t._source));var r=ds(m);i.mutableReadLanes|=r&i.pendingLanes}catch(a){n((function(){throw a}))}}))}),[t,r]),lr(p,n)&&lr(v,t)&&lr(h,r)||((e={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:f}).dispatch=l=Do.bind(null,Za,e),c.queue=e,c.baseQueue=null,f=ho(i,t,n),c.memoizedState=c.baseState=f),f}function vo(e,t,n){return po(so(),e,t,n)}function mo(e){var t=uo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:e}).dispatch=Do.bind(null,Za,e),[t.memoizedState,e]}function yo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Za.updateQueue)?(t={lastEffect:null},Za.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function go(e){return e={current:e},uo().memoizedState=e}function ko(){return so().memoizedState}function bo(e,t,n,r){var i=uo();Za.flags|=e,i.memoizedState=yo(1|t,n,void 0,void 0===r?null:r)}function wo(e,t,n,r){var i=so();r=void 0===r?null:r;var a=void 0;if(null!==eo){var o=eo.memoizedState;if(a=o.destroy,null!==r&&ao(r,o.deps))return void yo(t,n,a,r)}Za.flags|=e,i.memoizedState=yo(1|t,n,a,r)}function xo(e,t){return bo(516,4,e,t)}function _o(e,t){return wo(516,4,e,t)}function Io(e,t){return wo(4,2,e,t)}function Eo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function To(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,wo(4,2,Eo.bind(null,t,e),n)}function So(){}function Co(e,t){var n=so();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function No(e,t){var n=so();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ao(e,t){var n=Ki();Hi(98>n?98:n,(function(){e(!0)})),Hi(97<n?97:n,(function(){var n=Ja.transition;Ja.transition=1;try{e(!1),t()}finally{Ja.transition=n}}))}function Do(e,t,n){var r=hs(),i=ds(e),a={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?a.next=a:(a.next=o.next,o.next=a),t.pending=a,o=e.alternate,e===Za||null!==o&&o===Za)ro=no=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var u=t.lastRenderedState,s=o(u,n);if(a.eagerReducer=o,a.eagerState=s,lr(s,u))return}catch(c){}ps(e,i,r)}}var Po={readContext:oa,useCallback:io,useContext:io,useEffect:io,useImperativeHandle:io,useLayoutEffect:io,useMemo:io,useReducer:io,useRef:io,useState:io,useDebugValue:io,useDeferredValue:io,useTransition:io,useMutableSource:io,useOpaqueIdentifier:io,unstable_isNewReconciler:!1},Oo={readContext:oa,useCallback:function(e,t){return uo().memoizedState=[e,void 0===t?null:t],e},useContext:oa,useEffect:xo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,bo(4,2,Eo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return bo(4,2,e,t)},useMemo:function(e,t){var n=uo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=uo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Do.bind(null,Za,e),[r.memoizedState,e]},useRef:go,useState:mo,useDebugValue:So,useDeferredValue:function(e){var t=mo(e),n=t[0],r=t[1];return xo((function(){var t=Ja.transition;Ja.transition=1;try{r(e)}finally{Ja.transition=t}}),[e]),n},useTransition:function(){var e=mo(!1),t=e[0];return go(e=Ao.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=uo();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},po(r,e,t,n)},useOpaqueIdentifier:function(){if(Ba){var e=!1,t=function(e){return{$$typeof:L,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+($r++).toString(36))),Error(o(355))})),n=mo(t)[1];return 0===(2&Za.mode)&&(Za.flags|=516,yo(5,(function(){n("r:"+($r++).toString(36))}),void 0,null)),t}return mo(t="r:"+($r++).toString(36)),t},unstable_isNewReconciler:!1},Ro={readContext:oa,useCallback:Co,useContext:oa,useEffect:_o,useImperativeHandle:To,useLayoutEffect:Io,useMemo:No,useReducer:lo,useRef:ko,useState:function(){return lo(co)},useDebugValue:So,useDeferredValue:function(e){var t=lo(co),n=t[0],r=t[1];return _o((function(){var t=Ja.transition;Ja.transition=1;try{r(e)}finally{Ja.transition=t}}),[e]),n},useTransition:function(){var e=lo(co)[0];return[ko().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return lo(co)[0]},unstable_isNewReconciler:!1},Lo={readContext:oa,useCallback:Co,useContext:oa,useEffect:_o,useImperativeHandle:To,useLayoutEffect:Io,useMemo:No,useReducer:fo,useRef:ko,useState:function(){return fo(co)},useDebugValue:So,useDeferredValue:function(e){var t=fo(co),n=t[0],r=t[1];return _o((function(){var t=Ja.transition;Ja.transition=1;try{r(e)}finally{Ja.transition=t}}),[e]),n},useTransition:function(){var e=fo(co)[0];return[ko().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return fo(co)[0]},unstable_isNewReconciler:!1},Mo=w.ReactCurrentOwner,Fo=!1;function jo(e,t,n,r){t.child=null===e?Sa(t,null,n,r):Ta(t,e.child,n,r)}function Uo(e,t,n,r,i){n=n.render;var a=t.ref;return aa(t,i),r=oo(e,t,n,r,a,i),null===e||Fo?(t.flags|=1,jo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,au(e,t,i))}function Vo(e,t,n,r,i,a){if(null===e){var o=n.type;return"function"!==typeof o||Ws(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Gs(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Bo(e,t,o,r,i,a))}return o=e.child,0===(i&a)&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:hr)(i,r)&&e.ref===t.ref)?au(e,t,a):(t.flags|=1,(e=Hs(o,r)).ref=t.ref,e.return=t,t.child=e)}function Bo(e,t,n,r,i,a){if(null!==e&&hr(e.memoizedProps,r)&&e.ref===t.ref){if(Fo=!1,0===(a&i))return t.lanes=e.lanes,au(e,t,a);0!==(16384&e.flags)&&(Fo=!0)}return Ko(e,t,n,r,a)}function qo(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},xs(t,n);else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},xs(t,e),null;t.memoizedState={baseLanes:0},xs(t,null!==a?a.baseLanes:n)}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,xs(t,r);return jo(e,t,i,n),t.child}function zo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Ko(e,t,n,r,i){var a=yi(n)?vi:di.current;return a=mi(t,a),aa(t,i),n=oo(e,t,n,r,a,i),null===e||Fo?(t.flags|=1,jo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,au(e,t,i))}function Wo(e,t,n,r,i){if(yi(n)){var a=!0;wi(t)}else a=!1;if(aa(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),ka(t,n,r),wa(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=oa(c):c=mi(t,c=yi(n)?vi:di.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&ba(t,o,r,c),ua=!1;var h=t.memoizedState;o.state=h,da(t,r,o,i),s=t.memoizedState,u!==r||h!==s||pi.current||ua?("function"===typeof l&&(ma(t,n,l,r),s=t.memoizedState),(u=ua||ga(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4)):("function"===typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,ca(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:Ji(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=oa(s):s=mi(t,s=yi(n)?vi:di.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&ba(t,o,r,s),ua=!1,h=t.memoizedState,o.state=h,da(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||pi.current||ua?("function"===typeof d&&(ma(t,n,d,r),p=t.memoizedState),(c=ua||ga(t,n,c,r,h,p,s))?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),r=!1)}return Ho(e,t,n,r,a,i)}function Ho(e,t,n,r,i,a){zo(e,t);var o=0!==(64&t.flags);if(!r&&!o)return i&&xi(t,n,!1),au(e,t,a);r=t.stateNode,Mo.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ta(t,e.child,null,a),t.child=Ta(t,null,u,a)):jo(e,t,u,a),t.memoizedState=r.state,i&&xi(t,n,!0),t.child}function Go(e){var t=e.stateNode;t.pendingContext?ki(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ki(0,t.context,!1),Oa(e,t.containerInfo)}var Qo,Yo,$o,Jo={dehydrated:null,retryLane:0};function Xo(e,t,n){var r,i=t.pendingProps,a=Fa.current,o=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(a|=1),fi(Fa,1&a),null===e?(void 0!==i.fallback&&Ka(t),e=i.children,a=i.fallback,o?(e=Zo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Jo,e):"number"===typeof i.unstable_expectedLoadTime?(e=Zo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Jo,t.lanes=33554432,e):((n=Ys({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(i=tu(e,t,i.children,i.fallback,n),o=t.child,a=e.child.memoizedState,o.memoizedState=null===a?{baseLanes:n}:{baseLanes:a.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=Jo,i):(n=eu(e,t,i.children,n),t.memoizedState=null,n))}function Zo(e,t,n,r){var i=e.mode,a=e.child;return t={mode:"hidden",children:t},0===(2&i)&&null!==a?(a.childLanes=0,a.pendingProps=t):a=Ys(t,i,0,null),n=Qs(n,i,r,null),a.return=e,n.return=e,a.sibling=n,e.child=a,n}function eu(e,t,n,r){var i=e.child;return e=i.sibling,n=Hs(i,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function tu(e,t,n,r,i){var a=t.mode,o=e.child;e=o.sibling;var u={mode:"hidden",children:n};return 0===(2&a)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=u,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Hs(o,u),null!==e?r=Hs(e,r):(r=Qs(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function nu(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ia(e.return,t)}function ru(e,t,n,r,i,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=a)}function iu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(jo(e,t,r.children,n),0!==(2&(r=Fa.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&nu(e,n);else if(19===e.tag)nu(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(fi(Fa,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ja(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ru(t,!1,i,n,a,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ja(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ru(t,!0,n,null,a,t.lastEffect);break;case"together":ru(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function au(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Bu|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Hs(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Hs(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function ou(e,t){if(!Ba)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function uu(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return yi(t.type)&&gi(),null;case 3:return Ra(),li(pi),li(di),Ya(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ha(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Ma(t);var a=Pa(Da.current);if(n=t.type,null!==e&&null!=t.stateNode)Yo(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Pa(Na.current),Ha(t)){r=t.stateNode,n=t.type;var u=t.memoizedProps;switch(r[Xr]=t,r[Zr]=u,n){case"dialog":Ar("cancel",r),Ar("close",r);break;case"iframe":case"object":case"embed":Ar("load",r);break;case"video":case"audio":for(e=0;e<Tr.length;e++)Ar(Tr[e],r);break;case"source":Ar("error",r);break;case"img":case"image":case"link":Ar("error",r),Ar("load",r);break;case"details":Ar("toggle",r);break;case"input":ee(r,u),Ar("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!u.multiple},Ar("invalid",r);break;case"textarea":se(r,u),Ar("invalid",r)}for(var c in Ie(n,u),e=null,u)u.hasOwnProperty(c)&&(a=u[c],"children"===c?"string"===typeof a?r.textContent!==a&&(e=["children",a]):"number"===typeof a&&r.textContent!==""+a&&(e=["children",""+a]):s.hasOwnProperty(c)&&null!=a&&"onScroll"===c&&Ar("scroll",r));switch(n){case"input":$(r),re(r,u,!0);break;case"textarea":$(r),le(r);break;case"select":case"option":break;default:"function"===typeof u.onClick&&(r.onclick=Vr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(c=9===a.nodeType?a:a.ownerDocument,e===fe&&(e=de(n)),e===fe?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[Xr]=t,e[Zr]=r,Qo(e,t),t.stateNode=e,c=Ee(n,r),n){case"dialog":Ar("cancel",e),Ar("close",e),a=r;break;case"iframe":case"object":case"embed":Ar("load",e),a=r;break;case"video":case"audio":for(a=0;a<Tr.length;a++)Ar(Tr[a],e);a=r;break;case"source":Ar("error",e),a=r;break;case"img":case"image":case"link":Ar("error",e),Ar("load",e),a=r;break;case"details":Ar("toggle",e),a=r;break;case"input":ee(e,r),a=Z(e,r),Ar("invalid",e);break;case"option":a=ae(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=i({},r,{value:void 0}),Ar("invalid",e);break;case"textarea":se(e,r),a=ue(e,r),Ar("invalid",e);break;default:a=r}Ie(n,a);var l=a;for(u in l)if(l.hasOwnProperty(u)){var f=l[u];"style"===u?xe(e,f):"dangerouslySetInnerHTML"===u?null!=(f=f?f.__html:void 0)&&ye(e,f):"children"===u?"string"===typeof f?("textarea"!==n||""!==f)&&ge(e,f):"number"===typeof f&&ge(e,""+f):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?null!=f&&"onScroll"===u&&Ar("scroll",e):null!=f&&b(e,u,f,c))}switch(n){case"input":$(e),re(e,r,!1);break;case"textarea":$(e),le(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(u=r.value)?oe(e,!!r.multiple,u,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Vr)}zr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)$o(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Pa(Da.current),Pa(Na.current),Ha(t)?(r=t.stateNode,n=t.memoizedProps,r[Xr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Xr]=t,t.stateNode=r)}return null;case 13:return li(Fa),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Ha(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Fa.current)?0===ju&&(ju=3):(0!==ju&&3!==ju||(ju=4),null===Ou||0===(134217727&Bu)&&0===(134217727&qu)||gs(Ou,Lu))),(r||n)&&(t.flags|=4),null);case 4:return Ra(),null===e&&Pr(t.stateNode.containerInfo),null;case 10:return ra(t),null;case 19:if(li(Fa),null===(r=t.memoizedState))return null;if(u=0!==(64&t.flags),null===(c=r.rendering))if(u)ou(r,!1);else{if(0!==ju||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=ja(e))){for(t.flags|=64,ou(r,!1),null!==(u=c.updateQueue)&&(t.updateQueue=u,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(u=n).flags&=2,u.nextEffect=null,u.firstEffect=null,u.lastEffect=null,null===(c=u.alternate)?(u.childLanes=0,u.lanes=e,u.child=null,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=c.childLanes,u.lanes=c.lanes,u.child=c.child,u.memoizedProps=c.memoizedProps,u.memoizedState=c.memoizedState,u.updateQueue=c.updateQueue,u.type=c.type,e=c.dependencies,u.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return fi(Fa,1&Fa.current|2),t.child}e=e.sibling}null!==r.tail&&zi()>Hu&&(t.flags|=64,u=!0,ou(r,!1),t.lanes=33554432)}else{if(!u)if(null!==(e=ja(c))){if(t.flags|=64,u=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),ou(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!Ba)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*zi()-r.renderingStartTime>Hu&&1073741824!==n&&(t.flags|=64,u=!0,ou(r,!1),t.lanes=33554432);r.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=r.last)?n.sibling=c:t.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=zi(),n.sibling=null,t=Fa.current,fi(Fa,u?1&t|2:1&t),n):null;case 23:case 24:return _s(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function su(e){switch(e.tag){case 1:yi(e.type)&&gi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Ra(),li(pi),li(di),Ya(),0!==(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return Ma(e),null;case 13:return li(Fa),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return li(Fa),null;case 4:return Ra(),null;case 10:return ra(e),null;case 23:case 24:return _s(),null;default:return null}}function cu(e,t){try{var n="",r=t;do{n+=H(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function lu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Qo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Yo=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Pa(Na.current);var o,u=null;switch(n){case"input":a=Z(e,a),r=Z(e,r),u=[];break;case"option":a=ae(e,a),r=ae(e,r),u=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),u=[];break;case"textarea":a=ue(e,a),r=ue(e,r),u=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=Vr)}for(f in Ie(n,r),n=null,a)if(!r.hasOwnProperty(f)&&a.hasOwnProperty(f)&&null!=a[f])if("style"===f){var c=a[f];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==f&&"children"!==f&&"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(s.hasOwnProperty(f)?u||(u=[]):(u=u||[]).push(f,null));for(f in r){var l=r[f];if(c=null!=a?a[f]:void 0,r.hasOwnProperty(f)&&l!==c&&(null!=l||null!=c))if("style"===f)if(c){for(o in c)!c.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&c[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(u||(u=[]),u.push(f,n)),n=l;else"dangerouslySetInnerHTML"===f?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(u=u||[]).push(f,l)):"children"===f?"string"!==typeof l&&"number"!==typeof l||(u=u||[]).push(f,""+l):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&(s.hasOwnProperty(f)?(null!=l&&"onScroll"===f&&Ar("scroll",e),u||c===l||(u=[])):"object"===typeof l&&null!==l&&l.$$typeof===L?l.toString():(u=u||[]).push(f,l))}n&&(u=u||[]).push("style",n);var f=u;(t.updateQueue=f)&&(t.flags|=4)}},$o=function(e,t,n,r){n!==r&&(t.flags|=4)};var fu="function"===typeof WeakMap?WeakMap:Map;function hu(e,t,n){(n=la(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){$u||($u=!0,Ju=r),lu(0,t)},n}function du(e,t,n){(n=la(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return lu(0,t),r(i)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Xu?Xu=new Set([this]):Xu.add(this),lu(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var pu="function"===typeof WeakSet?WeakSet:Set;function vu(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Vs(e,n)}else t.current=null}function mu(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Ji(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Gr(t.stateNode.containerInfo))}throw Error(o(163))}function yu(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(Fs(n,e),Ms(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Ji(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&pa(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}pa(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&zr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&xt(n)))))}throw Error(o(163))}function gu(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=we("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ku(e,t){if(Ii&&"function"===typeof Ii.onCommitFiberUnmount)try{Ii.onCommitFiberUnmount(_i,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))Fs(t,n);else{r=t;try{i()}catch(a){Vs(r,a)}}n=n.next}while(n!==e)}break;case 1:if(vu(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){Vs(t,a)}break;case 5:vu(t);break;case 4:Eu(e,t)}}function bu(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function wu(e){return 5===e.tag||3===e.tag||4===e.tag}function xu(e){e:{for(var t=e.return;null!==t;){if(wu(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(ge(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||wu(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?_u(e,n,t):Iu(e,n,t)}function _u(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Vr));else if(4!==r&&null!==(e=e.child))for(_u(e,t,n),e=e.sibling;null!==e;)_u(e,t,n),e=e.sibling}function Iu(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Iu(e,t,n),e=e.sibling;null!==e;)Iu(e,t,n),e=e.sibling}function Eu(e,t){for(var n,r,i=t,a=!1;;){if(!a){a=i.return;e:for(;;){if(null===a)throw Error(o(160));switch(n=a.stateNode,a.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}a=a.return}a=!0}if(5===i.tag||6===i.tag){e:for(var u=e,s=i,c=s;;)if(ku(u,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===s)break e;for(;null===c.sibling;){if(null===c.return||c.return===s)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(u=n,s=i.stateNode,8===u.nodeType?u.parentNode.removeChild(s):u.removeChild(s)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(ku(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(a=!1)}i.sibling.return=i.return,i=i.sibling}}function Tu(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[Zr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Ee(e,i),t=Ee(e,r),i=0;i<a.length;i+=2){var u=a[i],s=a[i+1];"style"===u?xe(n,s):"dangerouslySetInnerHTML"===u?ye(n,s):"children"===u?ge(n,s):b(n,u,s,t)}switch(e){case"input":ne(n,r);break;case"textarea":ce(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(a=r.value)?oe(n,!!r.multiple,a,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,xt(n.containerInfo)));case 13:return null!==t.memoizedState&&(Wu=zi(),gu(t.child,!0)),void Su(t);case 19:return void Su(t);case 23:case 24:return void gu(t,null!==t.memoizedState)}throw Error(o(163))}function Su(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new pu),t.forEach((function(t){var r=qs.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Cu(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Nu=Math.ceil,Au=w.ReactCurrentDispatcher,Du=w.ReactCurrentOwner,Pu=0,Ou=null,Ru=null,Lu=0,Mu=0,Fu=ci(0),ju=0,Uu=null,Vu=0,Bu=0,qu=0,zu=0,Ku=null,Wu=0,Hu=1/0;function Gu(){Hu=zi()+500}var Qu,Yu=null,$u=!1,Ju=null,Xu=null,Zu=!1,es=null,ts=90,ns=[],rs=[],is=null,as=0,os=null,us=-1,ss=0,cs=0,ls=null,fs=!1;function hs(){return 0!==(48&Pu)?zi():-1!==us?us:us=zi()}function ds(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Ki()?1:2;if(0===ss&&(ss=Vu),0!==$i.transition){0!==cs&&(cs=null!==Ku?Ku.pendingLanes:0),e=ss;var t=4186112&~cs;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Ki(),0!==(4&Pu)&&98===e?e=Vt(12,ss):e=Vt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),ss),e}function ps(e,t,n){if(50<as)throw as=0,os=null,Error(o(185));if(null===(e=vs(e,t)))return null;zt(e,t,n),e===Ou&&(qu|=t,4===ju&&gs(e,Lu));var r=Ki();1===t?0!==(8&Pu)&&0===(48&Pu)?ks(e):(ms(e,n),0===Pu&&(Gu(),Qi())):(0===(4&Pu)||98!==r&&99!==r||(null===is?is=new Set([e]):is.add(e)),ms(e,n)),Ku=e}function vs(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function ms(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,u=e.pendingLanes;0<u;){var s=31-Kt(u),c=1<<s,l=a[s];if(-1===l){if(0===(c&r)||0!==(c&i)){l=t,Ft(c);var f=Mt;a[s]=10<=f?l+250:6<=f?l+5e3:-1}}else l<=t&&(e.expiredLanes|=c);u&=~c}if(r=jt(e,e===Ou?Lu:0),t=Mt,0===r)null!==n&&(n!==Fi&&Si(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Fi&&Si(n)}15===t?(n=ks.bind(null,e),null===Ui?(Ui=[n],Vi=Ti(Pi,Yi)):Ui.push(n),n=Fi):14===t?n=Gi(99,ks.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),n=Gi(n,ys.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function ys(e){if(us=-1,cs=ss=0,0!==(48&Pu))throw Error(o(327));var t=e.callbackNode;if(Ls()&&e.callbackNode!==t)return null;var n=jt(e,e===Ou?Lu:0);if(0===n)return null;var r=n,i=Pu;Pu|=16;var a=Ts();for(Ou===e&&Lu===r||(Gu(),Is(e,r));;)try{Ns();break}catch(s){Es(e,s)}if(na(),Au.current=a,Pu=i,null!==Ru?r=0:(Ou=null,Lu=0,r=ju),0!==(Vu&qu))Is(e,0);else if(0!==r){if(2===r&&(Pu|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(n=Ut(e))&&(r=Ss(e,n))),1===r)throw t=Uu,Is(e,0),gs(e,n),ms(e,zi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:case 5:Ps(e);break;case 3:if(gs(e,n),(62914560&n)===n&&10<(r=Wu+500-zi())){if(0!==jt(e,0))break;if(((i=e.suspendedLanes)&n)!==n){hs(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Wr(Ps.bind(null,e),r);break}Ps(e);break;case 4:if(gs(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var u=31-Kt(n);a=1<<u,(u=r[u])>i&&(i=u),n&=~a}if(n=i,10<(n=(120>(n=zi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Nu(n/1960))-n)){e.timeoutHandle=Wr(Ps.bind(null,e),n);break}Ps(e);break;default:throw Error(o(329))}}return ms(e,zi()),e.callbackNode===t?ys.bind(null,e):null}function gs(e,t){for(t&=~zu,t&=~qu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Kt(t),r=1<<n;e[n]=-1,t&=~r}}function ks(e){if(0!==(48&Pu))throw Error(o(327));if(Ls(),e===Ou&&0!==(e.expiredLanes&Lu)){var t=Lu,n=Ss(e,t);0!==(Vu&qu)&&(n=Ss(e,t=jt(e,t)))}else n=Ss(e,t=jt(e,0));if(0!==e.tag&&2===n&&(Pu|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(t=Ut(e))&&(n=Ss(e,t))),1===n)throw n=Uu,Is(e,0),gs(e,t),ms(e,zi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ps(e),ms(e,zi()),null}function bs(e,t){var n=Pu;Pu|=1;try{return e(t)}finally{0===(Pu=n)&&(Gu(),Qi())}}function ws(e,t){var n=Pu;Pu&=-2,Pu|=8;try{return e(t)}finally{0===(Pu=n)&&(Gu(),Qi())}}function xs(e,t){fi(Fu,Mu),Mu|=t,Vu|=t}function _s(){Mu=Fu.current,li(Fu)}function Is(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Hr(n)),null!==Ru)for(n=Ru.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&gi();break;case 3:Ra(),li(pi),li(di),Ya();break;case 5:Ma(r);break;case 4:Ra();break;case 13:case 19:li(Fa);break;case 10:ra(r);break;case 23:case 24:_s()}n=n.return}Ou=e,Ru=Hs(e.current,null),Lu=Mu=Vu=t,ju=0,Uu=null,zu=qu=Bu=0}function Es(e,t){for(;;){var n=Ru;try{if(na(),$a.current=Po,no){for(var r=Za.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}no=!1}if(Xa=0,to=eo=Za=null,ro=!1,Du.current=null,null===n||null===n.return){ju=1,Uu=t,Ru=null;break}e:{var a=e,o=n.return,u=n,s=t;if(t=Lu,u.flags|=2048,u.firstEffect=u.lastEffect=null,null!==s&&"object"===typeof s&&"function"===typeof s.then){var c=s;if(0===(2&u.mode)){var l=u.alternate;l?(u.updateQueue=l.updateQueue,u.memoizedState=l.memoizedState,u.lanes=l.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=0!==(1&Fa.current),h=o;do{var d;if(d=13===h.tag){var p=h.memoizedState;if(null!==p)d=null!==p.dehydrated;else{var v=h.memoizedProps;d=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!f)}}if(d){var m=h.updateQueue;if(null===m){var y=new Set;y.add(c),h.updateQueue=y}else m.add(c);if(0===(2&h.mode)){if(h.flags|=64,u.flags|=16384,u.flags&=-2981,1===u.tag)if(null===u.alternate)u.tag=17;else{var g=la(-1,1);g.tag=2,fa(u,g)}u.lanes|=1;break e}s=void 0,u=t;var k=a.pingCache;if(null===k?(k=a.pingCache=new fu,s=new Set,k.set(c,s)):void 0===(s=k.get(c))&&(s=new Set,k.set(c,s)),!s.has(u)){s.add(u);var b=Bs.bind(null,a,c,u);c.then(b,b)}h.flags|=4096,h.lanes=t;break e}h=h.return}while(null!==h);s=Error((G(u.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==ju&&(ju=2),s=cu(s,u),h=o;do{switch(h.tag){case 3:a=s,h.flags|=4096,t&=-t,h.lanes|=t,ha(h,hu(0,a,t));break e;case 1:a=s;var w=h.type,x=h.stateNode;if(0===(64&h.flags)&&("function"===typeof w.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===Xu||!Xu.has(x)))){h.flags|=4096,t&=-t,h.lanes|=t,ha(h,du(h,a,t));break e}}h=h.return}while(null!==h)}Ds(n)}catch(_){t=_,Ru===n&&null!==n&&(Ru=n=n.return);continue}break}}function Ts(){var e=Au.current;return Au.current=Po,null===e?Po:e}function Ss(e,t){var n=Pu;Pu|=16;var r=Ts();for(Ou===e&&Lu===t||Is(e,t);;)try{Cs();break}catch(i){Es(e,i)}if(na(),Pu=n,Au.current=r,null!==Ru)throw Error(o(261));return Ou=null,Lu=0,ju}function Cs(){for(;null!==Ru;)As(Ru)}function Ns(){for(;null!==Ru&&!Ci();)As(Ru)}function As(e){var t=Qu(e.alternate,e,Mu);e.memoizedProps=e.pendingProps,null===t?Ds(e):Ru=t,Du.current=null}function Ds(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=uu(n,t,Mu)))return void(Ru=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Mu)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=su(t)))return n.flags&=2047,void(Ru=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Ru=t);Ru=t=e}while(null!==t);0===ju&&(ju=5)}function Ps(e){var t=Ki();return Hi(99,Os.bind(null,e,t)),null}function Os(e,t){do{Ls()}while(null!==es);if(0!==(48&Pu))throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,a=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var u=e.eventTimes,s=e.expirationTimes;0<a;){var c=31-Kt(a),l=1<<c;i[c]=0,u[c]=-1,s[c]=-1,a&=~l}if(null!==is&&0===(24&r)&&is.has(e)&&is.delete(e),e===Ou&&(Ru=Ou=null,Lu=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Pu,Pu|=32,Du.current=null,Br=Yt,yr(u=mr())){if("selectionStart"in u)s={start:u.selectionStart,end:u.selectionEnd};else e:if(s=(s=u.ownerDocument)&&s.defaultView||window,(l=s.getSelection&&s.getSelection())&&0!==l.rangeCount){s=l.anchorNode,a=l.anchorOffset,c=l.focusNode,l=l.focusOffset;try{s.nodeType,c.nodeType}catch(T){s=null;break e}var f=0,h=-1,d=-1,p=0,v=0,m=u,y=null;t:for(;;){for(var g;m!==s||0!==a&&3!==m.nodeType||(h=f+a),m!==c||0!==l&&3!==m.nodeType||(d=f+l),3===m.nodeType&&(f+=m.nodeValue.length),null!==(g=m.firstChild);)y=m,m=g;for(;;){if(m===u)break t;if(y===s&&++p===a&&(h=f),y===c&&++v===l&&(d=f),null!==(g=m.nextSibling))break;y=(m=y).parentNode}m=g}s=-1===h||-1===d?null:{start:h,end:d}}else s=null;s=s||{start:0,end:0}}else s=null;qr={focusedElem:u,selectionRange:s},Yt=!1,ls=null,fs=!1,Yu=r;do{try{Rs()}catch(T){if(null===Yu)throw Error(o(330));Vs(Yu,T),Yu=Yu.nextEffect}}while(null!==Yu);ls=null,Yu=r;do{try{for(u=e;null!==Yu;){var k=Yu.flags;if(16&k&&ge(Yu.stateNode,""),128&k){var b=Yu.alternate;if(null!==b){var w=b.ref;null!==w&&("function"===typeof w?w(null):w.current=null)}}switch(1038&k){case 2:xu(Yu),Yu.flags&=-3;break;case 6:xu(Yu),Yu.flags&=-3,Tu(Yu.alternate,Yu);break;case 1024:Yu.flags&=-1025;break;case 1028:Yu.flags&=-1025,Tu(Yu.alternate,Yu);break;case 4:Tu(Yu.alternate,Yu);break;case 8:Eu(u,s=Yu);var x=s.alternate;bu(s),null!==x&&bu(x)}Yu=Yu.nextEffect}}catch(T){if(null===Yu)throw Error(o(330));Vs(Yu,T),Yu=Yu.nextEffect}}while(null!==Yu);if(w=qr,b=mr(),k=w.focusedElem,u=w.selectionRange,b!==k&&k&&k.ownerDocument&&vr(k.ownerDocument.documentElement,k)){null!==u&&yr(k)&&(b=u.start,void 0===(w=u.end)&&(w=b),"selectionStart"in k?(k.selectionStart=b,k.selectionEnd=Math.min(w,k.value.length)):(w=(b=k.ownerDocument||document)&&b.defaultView||window).getSelection&&(w=w.getSelection(),s=k.textContent.length,x=Math.min(u.start,s),u=void 0===u.end?x:Math.min(u.end,s),!w.extend&&x>u&&(s=u,u=x,x=s),s=pr(k,x),a=pr(k,u),s&&a&&(1!==w.rangeCount||w.anchorNode!==s.node||w.anchorOffset!==s.offset||w.focusNode!==a.node||w.focusOffset!==a.offset)&&((b=b.createRange()).setStart(s.node,s.offset),w.removeAllRanges(),x>u?(w.addRange(b),w.extend(a.node,a.offset)):(b.setEnd(a.node,a.offset),w.addRange(b))))),b=[];for(w=k;w=w.parentNode;)1===w.nodeType&&b.push({element:w,left:w.scrollLeft,top:w.scrollTop});for("function"===typeof k.focus&&k.focus(),k=0;k<b.length;k++)(w=b[k]).element.scrollLeft=w.left,w.element.scrollTop=w.top}Yt=!!Br,qr=Br=null,e.current=n,Yu=r;do{try{for(k=e;null!==Yu;){var _=Yu.flags;if(36&_&&yu(k,Yu.alternate,Yu),128&_){b=void 0;var I=Yu.ref;if(null!==I){var E=Yu.stateNode;Yu.tag,b=E,"function"===typeof I?I(b):I.current=b}}Yu=Yu.nextEffect}}catch(T){if(null===Yu)throw Error(o(330));Vs(Yu,T),Yu=Yu.nextEffect}}while(null!==Yu);Yu=null,ji(),Pu=i}else e.current=n;if(Zu)Zu=!1,es=e,ts=t;else for(Yu=r;null!==Yu;)t=Yu.nextEffect,Yu.nextEffect=null,8&Yu.flags&&((_=Yu).sibling=null,_.stateNode=null),Yu=t;if(0===(r=e.pendingLanes)&&(Xu=null),1===r?e===os?as++:(as=0,os=e):as=0,n=n.stateNode,Ii&&"function"===typeof Ii.onCommitFiberRoot)try{Ii.onCommitFiberRoot(_i,n,void 0,64===(64&n.current.flags))}catch(T){}if(ms(e,zi()),$u)throw $u=!1,e=Ju,Ju=null,e;return 0!==(8&Pu)||Qi(),null}function Rs(){for(;null!==Yu;){var e=Yu.alternate;fs||null===ls||(0!==(8&Yu.flags)?et(Yu,ls)&&(fs=!0):13===Yu.tag&&Cu(e,Yu)&&et(Yu,ls)&&(fs=!0));var t=Yu.flags;0!==(256&t)&&mu(e,Yu),0===(512&t)||Zu||(Zu=!0,Gi(97,(function(){return Ls(),null}))),Yu=Yu.nextEffect}}function Ls(){if(90!==ts){var e=97<ts?97:ts;return ts=90,Hi(e,js)}return!1}function Ms(e,t){ns.push(t,e),Zu||(Zu=!0,Gi(97,(function(){return Ls(),null})))}function Fs(e,t){rs.push(t,e),Zu||(Zu=!0,Gi(97,(function(){return Ls(),null})))}function js(){if(null===es)return!1;var e=es;if(es=null,0!==(48&Pu))throw Error(o(331));var t=Pu;Pu|=32;var n=rs;rs=[];for(var r=0;r<n.length;r+=2){var i=n[r],a=n[r+1],u=i.destroy;if(i.destroy=void 0,"function"===typeof u)try{u()}catch(c){if(null===a)throw Error(o(330));Vs(a,c)}}for(n=ns,ns=[],r=0;r<n.length;r+=2){i=n[r],a=n[r+1];try{var s=i.create;i.destroy=s()}catch(c){if(null===a)throw Error(o(330));Vs(a,c)}}for(s=e.current.firstEffect;null!==s;)e=s.nextEffect,s.nextEffect=null,8&s.flags&&(s.sibling=null,s.stateNode=null),s=e;return Pu=t,Qi(),!0}function Us(e,t,n){fa(e,t=hu(0,t=cu(n,t),1)),t=hs(),null!==(e=vs(e,1))&&(zt(e,1,t),ms(e,t))}function Vs(e,t){if(3===e.tag)Us(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Us(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Xu||!Xu.has(r))){var i=du(n,e=cu(t,e),1);if(fa(n,i),i=hs(),null!==(n=vs(n,1)))zt(n,1,i),ms(n,i);else if("function"===typeof r.componentDidCatch&&(null===Xu||!Xu.has(r)))try{r.componentDidCatch(t,e)}catch(a){}break}}n=n.return}}function Bs(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=hs(),e.pingedLanes|=e.suspendedLanes&n,Ou===e&&(Lu&n)===n&&(4===ju||3===ju&&(62914560&Lu)===Lu&&500>zi()-Wu?Is(e,0):zu|=n),ms(e,t)}function qs(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Ki()?1:2:(0===ss&&(ss=Vu),0===(t=Bt(62914560&~ss))&&(t=4194304))),n=hs(),null!==(e=vs(e,t))&&(zt(e,t,n),ms(e,n))}function zs(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Ks(e,t,n,r){return new zs(e,t,n,r)}function Ws(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Hs(e,t){var n=e.alternate;return null===n?((n=Ks(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Gs(e,t,n,r,i,a){var u=2;if(r=e,"function"===typeof e)Ws(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case I:return Qs(n.children,i,a,t);case M:u=8,i|=16;break;case E:u=8,i|=1;break;case T:return(e=Ks(12,n,t,8|i)).elementType=T,e.type=T,e.lanes=a,e;case A:return(e=Ks(13,n,t,i)).type=A,e.elementType=A,e.lanes=a,e;case D:return(e=Ks(19,n,t,i)).elementType=D,e.lanes=a,e;case F:return Ys(n,i,a,t);case j:return(e=Ks(24,n,t,i)).elementType=j,e.lanes=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:u=10;break e;case C:u=9;break e;case N:u=11;break e;case P:u=14;break e;case O:u=16,r=null;break e;case R:u=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Ks(u,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Qs(e,t,n,r){return(e=Ks(7,e,r,t)).lanes=n,e}function Ys(e,t,n,r){return(e=Ks(23,e,r,t)).elementType=F,e.lanes=n,e}function $s(e,t,n){return(e=Ks(6,e,null,t)).lanes=n,e}function Js(e,t,n){return(t=Ks(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Xs(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=qt(0),this.expirationTimes=qt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qt(0),this.mutableSourceEagerHydrationData=null}function Zs(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function ec(e,t,n,r){var i=t.current,a=hs(),u=ds(i);e:if(n){t:{if($e(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(yi(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);throw Error(o(171))}if(1===n.tag){var c=n.type;if(yi(c)){n=bi(n,c,s);break e}}n=s}else n=hi;return null===t.context?t.context=n:t.pendingContext=n,(t=la(a,u)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),fa(i,t),ps(i,u,a),u}function tc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function nc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function rc(e,t){nc(e,t),(e=e.alternate)&&nc(e,t)}function ic(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Xs(e,t,null!=n&&!0===n.hydrate),t=Ks(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,sa(t),e[ei]=n.current,Pr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function ac(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function oc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a._internalRoot;if("function"===typeof i){var u=i;i=function(){var e=tc(o);u.call(e)}}ec(t,o,e,i)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new ic(e,0,t?{hydrate:!0}:void 0)}(n,r),o=a._internalRoot,"function"===typeof i){var s=i;i=function(){var e=tc(o);s.call(e)}}ws((function(){ec(t,o,e,i)}))}return tc(o)}function uc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ac(t))throw Error(o(200));return Zs(e,t,null,n)}Qu=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||pi.current)Fo=!0;else{if(0===(n&r)){switch(Fo=!1,t.tag){case 3:Go(t),Ga();break;case 5:La(t);break;case 1:yi(t.type)&&wi(t);break;case 4:Oa(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;fi(Xi,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?Xo(e,t,n):(fi(Fa,1&Fa.current),null!==(t=au(e,t,n))?t.sibling:null);fi(Fa,1&Fa.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return iu(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),fi(Fa,Fa.current),r)break;return null;case 23:case 24:return t.lanes=0,qo(e,t,n)}return au(e,t,n)}Fo=0!==(16384&e.flags)}else Fo=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=mi(t,di.current),aa(t,n),i=oo(null,t,r,e,i,n),t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,yi(r)){var a=!0;wi(t)}else a=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,sa(t);var u=r.getDerivedStateFromProps;"function"===typeof u&&ma(t,r,u,e),i.updater=ya,t.stateNode=i,i._reactInternals=t,wa(t,r,e,n),t=Ho(null,t,r,!0,a,n)}else t.tag=0,jo(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(a=i._init)(i._payload),t.type=i,a=t.tag=function(e){if("function"===typeof e)return Ws(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===N)return 11;if(e===P)return 14}return 2}(i),e=Ji(i,e),a){case 0:t=Ko(null,t,i,e,n);break e;case 1:t=Wo(null,t,i,e,n);break e;case 11:t=Uo(null,t,i,e,n);break e;case 14:t=Vo(null,t,i,Ji(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ko(e,t,r,i=t.elementType===r?i:Ji(r,i),n);case 1:return r=t.type,i=t.pendingProps,Wo(e,t,r,i=t.elementType===r?i:Ji(r,i),n);case 3:if(Go(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,ca(e,t),da(t,r,null,n),(r=t.memoizedState.element)===i)Ga(),t=au(e,t,n);else{if((a=(i=t.stateNode).hydrate)&&(Va=Qr(t.stateNode.containerInfo.firstChild),Ua=t,a=Ba=!0),a){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(a=e[i])._workInProgressVersionPrimary=e[i+1],Qa.push(a);for(n=Sa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else jo(e,t,r,n),Ga();t=t.child}return t;case 5:return La(t),null===e&&Ka(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,u=i.children,Kr(r,i)?u=null:null!==a&&Kr(r,a)&&(t.flags|=16),zo(e,t),jo(e,t,u,n),t.child;case 6:return null===e&&Ka(t),null;case 13:return Xo(e,t,n);case 4:return Oa(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ta(t,null,r,n):jo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Uo(e,t,r,i=t.elementType===r?i:Ji(r,i),n);case 7:return jo(e,t,t.pendingProps,n),t.child;case 8:case 12:return jo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,u=t.memoizedProps,a=i.value;var s=t.type._context;if(fi(Xi,s._currentValue),s._currentValue=a,null!==u)if(s=u.value,0===(a=lr(s,a)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(s,a):1073741823))){if(u.children===i.children&&!pi.current){t=au(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var c=s.dependencies;if(null!==c){u=s.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&a)){1===s.tag&&((l=la(-1,n&-n)).tag=2,fa(s,l)),s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),ia(s.return,n),c.lanes|=n;break}l=l.next}}else u=10===s.tag&&s.type===t.type?null:s.child;if(null!==u)u.return=s;else for(u=s;null!==u;){if(u===t){u=null;break}if(null!==(s=u.sibling)){s.return=u.return,u=s;break}u=u.return}s=u}jo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(a=t.pendingProps).children,aa(t,n),r=r(i=oa(i,a.unstable_observedBits)),t.flags|=1,jo(e,t,r,n),t.child;case 14:return a=Ji(i=t.type,t.pendingProps),Vo(e,t,i,a=Ji(i.type,a),r,n);case 15:return Bo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ji(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,yi(r)?(e=!0,wi(t)):e=!1,aa(t,n),ka(t,r,i),wa(t,r,i,n),Ho(null,t,r,!0,e,n);case 19:return iu(e,t,n);case 23:case 24:return qo(e,t,n)}throw Error(o(156,t.tag))},ic.prototype.render=function(e){ec(e,this._internalRoot,null,null)},ic.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;ec(null,e,null,(function(){t[ei]=null}))},tt=function(e){13===e.tag&&(ps(e,4,hs()),rc(e,4))},nt=function(e){13===e.tag&&(ps(e,67108864,hs()),rc(e,67108864))},rt=function(e){if(13===e.tag){var t=hs(),n=ds(e);ps(e,n,t),rc(e,n)}},it=function(e,t){return t()},Se=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ai(r);if(!i)throw Error(o(90));J(r),ne(r,i)}}}break;case"textarea":ce(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},Oe=bs,Re=function(e,t,n,r,i){var a=Pu;Pu|=4;try{return Hi(98,e.bind(null,t,n,r,i))}finally{0===(Pu=a)&&(Gu(),Qi())}},Le=function(){0===(49&Pu)&&(function(){if(null!==is){var e=is;is=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,ms(e,zi())}))}Qi()}(),Ls())},Me=function(e,t){var n=Pu;Pu|=2;try{return e(t)}finally{0===(Pu=n)&&(Gu(),Qi())}};var sc={Events:[ri,ii,ai,De,Pe,Ls,{current:!1}]},cc={findFiberByHostInstance:ni,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},lc={bundleType:cc.bundleType,version:cc.version,rendererPackageName:cc.rendererPackageName,rendererConfig:cc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ze(e))?null:e.stateNode},findFiberByHostInstance:cc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fc.isDisabled&&fc.supportsFiber)try{_i=fc.inject(lc),Ii=fc}catch(me){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sc,t.createPortal=uc,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=Ze(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Pu;if(0!==(48&n))return e(t);Pu|=1;try{if(e)return Hi(99,e.bind(null,t))}finally{Pu=n,Qi()}},t.hydrate=function(e,t,n){if(!ac(t))throw Error(o(200));return oc(null,e,t,!0,n)},t.render=function(e,t,n){if(!ac(t))throw Error(o(200));return oc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ac(e))throw Error(o(40));return!!e._reactRootContainer&&(ws((function(){oc(null,null,e,!1,(function(){e._reactRootContainer=null,e[ei]=null}))})),!0)},t.unstable_batchedUpdates=bs,t.unstable_createPortal=function(e,t){return uc(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ac(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return oc(e,t,n,!1,r)},t.version="17.0.2"},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){"use strict";n(725);var r=n(791),i=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var a=Symbol.for;i=a("react.element"),t.Fragment=a("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u=Object.prototype.hasOwnProperty,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)u.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:o.current}}t.jsx=c,t.jsxs=c},117:function(e,t,n){"use strict";var r=n(725),i=60103,a=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,u=60110,s=60112;t.Suspense=60113;var c=60115,l=60116;if("function"===typeof Symbol&&Symbol.for){var f=Symbol.for;i=f("react.element"),a=f("react.portal"),t.Fragment=f("react.fragment"),t.StrictMode=f("react.strict_mode"),t.Profiler=f("react.profiler"),o=f("react.provider"),u=f("react.context"),s=f("react.forward_ref"),t.Suspense=f("react.suspense"),c=f("react.memo"),l=f("react.lazy")}var h="function"===typeof Symbol&&Symbol.iterator;function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function m(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function y(){}function g(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(d(85));this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=m.prototype;var k=g.prototype=new y;k.constructor=g,r(k,m.prototype),k.isPureReactComponent=!0;var b={current:null},w=Object.prototype.hasOwnProperty,x={key:!0,ref:!0,__self:!0,__source:!0};function _(e,t,n){var r,a={},o=null,u=null;if(null!=t)for(r in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)w.call(t,r)&&!x.hasOwnProperty(r)&&(a[r]=t[r]);var s=arguments.length-2;if(1===s)a.children=n;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===a[r]&&(a[r]=s[r]);return{$$typeof:i,type:e,key:o,ref:u,props:a,_owner:b.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var E=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function S(e,t,n,r,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case i:case a:s=!0}}if(s)return o=o(s=e),e=""===r?"."+T(s,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(E,"$&/")+"/"),S(o,t,n,"",(function(e){return e}))):null!=o&&(I(o)&&(o=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(E,"$&/")+"/")+e)),t.push(o)),1;if(s=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=r+T(u=e[c],c);s+=S(u,t,n,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=S(u=u.value,t,n,l=r+T(u,c++),o);else if("object"===u)throw t=""+e,Error(d(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return s}function C(e,t,n){if(null==e)return e;var r=[],i=0;return S(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function N(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var A={current:null};function D(){var e=A.current;if(null===e)throw Error(d(321));return e}var P={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:b,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:C,forEach:function(e,t,n){C(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return C(e,(function(){t++})),t},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!I(e))throw Error(d(143));return e}},t.Component=m,t.PureComponent=g,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(d(267,e));var a=r({},e.props),o=e.key,u=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(u=t.ref,s=b.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)w.call(t,l)&&!x.hasOwnProperty(l)&&(a[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)a.children=n;else if(1<l){c=Array(l);for(var f=0;f<l;f++)c[f]=arguments[f+2];a.children=c}return{$$typeof:i,type:e.type,key:o,ref:u,props:a,_owner:s}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:u,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=_,t.createFactory=function(e){var t=_.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:s,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:l,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return D().useCallback(e,t)},t.useContext=function(e,t){return D().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return D().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return D().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return D().useLayoutEffect(e,t)},t.useMemo=function(e,t){return D().useMemo(e,t)},t.useReducer=function(e,t,n){return D().useReducer(e,t,n)},t.useRef=function(e){return D().useRef(e)},t.useState=function(e){return D().useState(e)},t.version="17.0.2"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},727:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(D){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r=f;return function(i,a){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw a;return A()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=E(o,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var s=l(e,t,n);if("normal"===s.type){if(r=n.done?p:h,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=p,n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(D){return{type:"throw",arg:D}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",v={};function m(){}function y(){}function g(){}var k={};s(k,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(N([])));w&&w!==n&&r.call(w,a)&&(k=w);var x=g.prototype=m.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,t){function n(i,a,o,u){var s=l(e[i],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"===typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,o,u)}),(function(e){n("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,u)}))}u(s.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function E(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,E(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function N(e){if(e){var n=e[a];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:A}}function A(){return{value:t,done:!0}}return y.prototype=g,s(x,"constructor",g),s(g,"constructor",y),y.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,u,"GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},_(I.prototype),s(I.prototype,o,(function(){return this})),e.AsyncIterator=I,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new I(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},_(x),s(x,u,"Generator"),s(x,a,(function(){return this})),s(x,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=N,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return u.type="throw",u.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(n){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},813:function(e,t){"use strict";var n,r,i,a;if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var c=null,l=null,f=function e(){if(null!==c)try{var n=t.unstable_now();c(!0,n),c=null}catch(r){throw setTimeout(e,0),r}};n=function(e){null!==c?setTimeout(n,0,e):(c=e,setTimeout(f,0))},r=function(e,t){l=setTimeout(e,t)},i=function(){clearTimeout(l)},t.unstable_shouldYield=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var h=window.setTimeout,d=window.clearTimeout;if("undefined"!==typeof console){var p=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var v=!1,m=null,y=-1,g=5,k=0;t.unstable_shouldYield=function(){return t.unstable_now()>=k},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):g=0<e?Math.floor(1e3/e):5};var b=new MessageChannel,w=b.port2;b.port1.onmessage=function(){if(null!==m){var e=t.unstable_now();k=e+g;try{m(!0,e)?w.postMessage(null):(v=!1,m=null)}catch(n){throw w.postMessage(null),n}}else v=!1},n=function(e){m=e,v||(v=!0,w.postMessage(null))},r=function(e,n){y=h((function(){e(t.unstable_now())}),n)},i=function(){d(y),y=-1}}function x(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<E(i,t)))break e;e[r]=t,e[n]=i,n=r}}function _(e){return void 0===(e=e[0])?null:e}function I(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var a=2*(r+1)-1,o=e[a],u=a+1,s=e[u];if(void 0!==o&&0>E(o,n))void 0!==s&&0>E(s,o)?(e[r]=s,e[u]=n,r=u):(e[r]=o,e[a]=n,r=a);else{if(!(void 0!==s&&0>E(s,n)))break e;e[r]=s,e[u]=n,r=u}}}return t}return null}function E(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var T=[],S=[],C=1,N=null,A=3,D=!1,P=!1,O=!1;function R(e){for(var t=_(S);null!==t;){if(null===t.callback)I(S);else{if(!(t.startTime<=e))break;I(S),t.sortIndex=t.expirationTime,x(T,t)}t=_(S)}}function L(e){if(O=!1,R(e),!P)if(null!==_(T))P=!0,n(M);else{var t=_(S);null!==t&&r(L,t.startTime-e)}}function M(e,n){P=!1,O&&(O=!1,i()),D=!0;var a=A;try{for(R(n),N=_(T);null!==N&&(!(N.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=N.callback;if("function"===typeof o){N.callback=null,A=N.priorityLevel;var u=o(N.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?N.callback=u:N===_(T)&&I(T),R(n)}else I(T);N=_(T)}if(null!==N)var s=!0;else{var c=_(S);null!==c&&r(L,c.startTime-n),s=!1}return s}finally{N=null,A=a,D=!1}}var F=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){P||D||(P=!0,n(M))},t.unstable_getCurrentPriorityLevel=function(){return A},t.unstable_getFirstCallbackNode=function(){return _(T)},t.unstable_next=function(e){switch(A){case 1:case 2:case 3:var t=3;break;default:t=A}var n=A;A=t;try{return e()}finally{A=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=F,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=A;A=e;try{return t()}finally{A=n}},t.unstable_scheduleCallback=function(e,a,o){var u=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?u+o:u:o=u,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:C++,callback:a,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>u?(e.sortIndex=o,x(S,e),null===_(T)&&e===_(S)&&(O?i():O=!0,r(L,o-u))):(e.sortIndex=s,x(T,e),P||D||(P=!0,n(M))),e},t.unstable_wrapCallback=function(e){var t=A;return function(){var n=A;A=t;try{return e.apply(this,arguments)}finally{A=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},454:function(e){!function(){"use strict";e.exports={polyfill:function(){var e=window,t=document;if(!("scrollBehavior"in t.documentElement.style)||!0===e.__forceSmoothScrollPolyfill__){var n,r=e.HTMLElement||e.Element,i={scroll:e.scroll||e.scrollTo,scrollBy:e.scrollBy,elementScroll:r.prototype.scroll||u,scrollIntoView:r.prototype.scrollIntoView},a=e.performance&&e.performance.now?e.performance.now.bind(e.performance):Date.now,o=(n=e.navigator.userAgent,new RegExp(["MSIE ","Trident/","Edge/"].join("|")).test(n)?1:0);e.scroll=e.scrollTo=function(){void 0!==arguments[0]&&(!0!==s(arguments[0])?p.call(e,t.body,void 0!==arguments[0].left?~~arguments[0].left:e.scrollX||e.pageXOffset,void 0!==arguments[0].top?~~arguments[0].top:e.scrollY||e.pageYOffset):i.scroll.call(e,void 0!==arguments[0].left?arguments[0].left:"object"!==typeof arguments[0]?arguments[0]:e.scrollX||e.pageXOffset,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:e.scrollY||e.pageYOffset))},e.scrollBy=function(){void 0!==arguments[0]&&(s(arguments[0])?i.scrollBy.call(e,void 0!==arguments[0].left?arguments[0].left:"object"!==typeof arguments[0]?arguments[0]:0,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:0):p.call(e,t.body,~~arguments[0].left+(e.scrollX||e.pageXOffset),~~arguments[0].top+(e.scrollY||e.pageYOffset)))},r.prototype.scroll=r.prototype.scrollTo=function(){if(void 0!==arguments[0])if(!0!==s(arguments[0])){var e=arguments[0].left,t=arguments[0].top;p.call(this,this,"undefined"===typeof e?this.scrollLeft:~~e,"undefined"===typeof t?this.scrollTop:~~t)}else{if("number"===typeof arguments[0]&&void 0===arguments[1])throw new SyntaxError("Value could not be converted");i.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left:"object"!==typeof arguments[0]?~~arguments[0]:this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top:void 0!==arguments[1]?~~arguments[1]:this.scrollTop)}},r.prototype.scrollBy=function(){void 0!==arguments[0]&&(!0!==s(arguments[0])?this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior}):i.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop))},r.prototype.scrollIntoView=function(){if(!0!==s(arguments[0])){var n=h(this),r=n.getBoundingClientRect(),a=this.getBoundingClientRect();n!==t.body?(p.call(this,n,n.scrollLeft+a.left-r.left,n.scrollTop+a.top-r.top),"fixed"!==e.getComputedStyle(n).position&&e.scrollBy({left:r.left,top:r.top,behavior:"smooth"})):e.scrollBy({left:a.left,top:a.top,behavior:"smooth"})}else i.scrollIntoView.call(this,void 0===arguments[0]||arguments[0])}}function u(e,t){this.scrollLeft=e,this.scrollTop=t}function s(e){if(null===e||"object"!==typeof e||void 0===e.behavior||"auto"===e.behavior||"instant"===e.behavior)return!0;if("object"===typeof e&&"smooth"===e.behavior)return!1;throw new TypeError("behavior member of ScrollOptions "+e.behavior+" is not a valid value for enumeration ScrollBehavior.")}function c(e,t){return"Y"===t?e.clientHeight+o<e.scrollHeight:"X"===t?e.clientWidth+o<e.scrollWidth:void 0}function l(t,n){var r=e.getComputedStyle(t,null)["overflow"+n];return"auto"===r||"scroll"===r}function f(e){var t=c(e,"Y")&&l(e,"Y"),n=c(e,"X")&&l(e,"X");return t||n}function h(e){for(;e!==t.body&&!1===f(e);)e=e.parentNode||e.host;return e}function d(t){var n,r,i,o,u=(a()-t.startTime)/468;o=u=u>1?1:u,n=.5*(1-Math.cos(Math.PI*o)),r=t.startX+(t.x-t.startX)*n,i=t.startY+(t.y-t.startY)*n,t.method.call(t.scrollable,r,i),r===t.x&&i===t.y||e.requestAnimationFrame(d.bind(e,t))}function p(n,r,o){var s,c,l,f,h=a();n===t.body?(s=e,c=e.scrollX||e.pageXOffset,l=e.scrollY||e.pageYOffset,f=i.scroll):(s=n,c=n.scrollLeft,l=n.scrollTop,f=u),d({scrollable:s,method:f,startTime:h,startX:c,startY:l,x:r,y:o})}}}}()}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return Le},SDK_VERSION:function(){return Rt},_DEFAULT_ENTRY_NAME:function(){return wt},_addComponent:function(){return Et},_addOrOverwriteComponent:function(){return Tt},_apps:function(){return _t},_clearComponents:function(){return At},_components:function(){return It},_getProvider:function(){return Ct},_registerComponent:function(){return St},_removeServiceInstance:function(){return Nt},deleteApp:function(){return jt},getApp:function(){return Mt},getApps:function(){return Ft},initializeApp:function(){return Lt},onLog:function(){return Bt},registerVersion:function(){return Vt},setLogLevel:function(){return qt}});var t=n(791),r=n(164);function i(e){if(Array.isArray(e))return e}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){if(e){if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){return i(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||o(e,t)||u()}var c,l=(0,t.createContext)([]);function f(){return f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(c||(c={}));var h=function(e){return e};var d="beforeunload",p="popstate";function v(e){e.preventDefault(),e.returnValue=""}function m(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function y(){return Math.random().toString(36).substr(2,8)}function g(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function k(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function b(e,t){if(!e)throw new Error(t)}var w=(0,t.createContext)(null);var x=(0,t.createContext)(null);var _=(0,t.createContext)({outlet:null,matches:[]});function I(e){b(!1)}function E(e){var n=e.basename,r=void 0===n?"/":n,i=e.children,a=void 0===i?null:i,o=e.location,u=e.navigationType,s=void 0===u?c.Pop:u,l=e.navigator,f=e.static,h=void 0!==f&&f;C()&&b(!1);var d=z(r),p=(0,t.useMemo)((function(){return{basename:d,navigator:l,static:h}}),[d,l,h]);"string"===typeof o&&(o=k(o));var v=o,m=v.pathname,y=void 0===m?"/":m,g=v.search,_=void 0===g?"":g,I=v.hash,E=void 0===I?"":I,T=v.state,S=void 0===T?null:T,N=v.key,A=void 0===N?"default":N,D=(0,t.useMemo)((function(){var e=B(y,d);return null==e?null:{pathname:e,search:_,hash:E,state:S,key:A}}),[d,y,_,E,S,A]);return null==D?null:(0,t.createElement)(w.Provider,{value:p},(0,t.createElement)(x.Provider,{children:a,value:{location:D,navigationType:s}}))}function T(e){var n=e.children,r=e.location;return function(e,n){C()||b(!1);var r=(0,t.useContext)(_).matches,i=r[r.length-1],a=i?i.params:{},o=(i&&i.pathname,i?i.pathnameBase:"/");i&&i.route;0;var u,s=N();if(n){var c,l="string"===typeof n?k(n):n;"/"===o||(null==(c=l.pathname)?void 0:c.startsWith(o))||b(!1),u=l}else u=s;var f=u.pathname||"/",h="/"===o?f:f.slice(o.length)||"/",d=function(e,t,n){void 0===n&&(n="/");var r=B(("string"===typeof t?k(t):t).pathname||"/",n);if(null==r)return null;var i=O(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=F(i[o],r);return a}(e,{pathname:h});0;return j(d&&d.map((function(e){return Object.assign({},e,{params:Object.assign({},a,e.params),pathname:q([o,e.pathname]),pathnameBase:"/"===e.pathnameBase?o:q([o,e.pathnameBase])})})),r)}(P(n),r)}function S(e){C()||b(!1);var n=(0,t.useContext)(w),r=n.basename,i=n.navigator,a=D(e),o=a.hash,u=a.pathname,s=a.search,c=u;if("/"!==r){var l=function(e){return""===e||""===e.pathname?"/":"string"===typeof e?k(e).pathname:e.pathname}(e),f=null!=l&&l.endsWith("/");c="/"===u?r+(f?"/":""):q([r,u])}return i.createHref({pathname:c,search:s,hash:o})}function C(){return null!=(0,t.useContext)(x)}function N(){return C()||b(!1),(0,t.useContext)(x).location}function A(){C()||b(!1);var e=(0,t.useContext)(w),n=e.basename,r=e.navigator,i=(0,t.useContext)(_).matches,a=N().pathname,o=JSON.stringify(i.map((function(e){return e.pathnameBase}))),u=(0,t.useRef)(!1);(0,t.useEffect)((function(){u.current=!0}));var s=(0,t.useCallback)((function(e,t){if(void 0===t&&(t={}),u.current)if("number"!==typeof e){var i=V(e,JSON.parse(o),a);"/"!==n&&(i.pathname=q([n,i.pathname])),(t.replace?r.replace:r.push)(i,t.state)}else r.go(e)}),[n,r,o,a]);return s}function D(e){var n=(0,t.useContext)(_).matches,r=N().pathname,i=JSON.stringify(n.map((function(e){return e.pathnameBase})));return(0,t.useMemo)((function(){return V(e,JSON.parse(i),r)}),[e,i,r])}function P(e){var n=[];return t.Children.forEach(e,(function(e){if((0,t.isValidElement)(e))if(e.type!==t.Fragment){e.type!==I&&b(!1);var r={caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path};e.props.children&&(r.children=P(e.props.children)),n.push(r)}else n.push.apply(n,P(e.props.children))})),n}function O(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,i){var a={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(a.relativePath.startsWith(r)||b(!1),a.relativePath=a.relativePath.slice(r.length));var o=q([r,a.relativePath]),u=n.concat(a);e.children&&e.children.length>0&&(!0===e.index&&b(!1),O(e.children,t,u,o)),(null!=e.path||e.index)&&t.push({path:o,score:M(o,e.index),routesMeta:u})})),t}var R=/^:\w+$/,L=function(e){return"*"===e};function M(e,t){var n=e.split("/"),r=n.length;return n.some(L)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!L(e)})).reduce((function(e,t){return e+(R.test(t)?3:""===t?1:10)}),r)}function F(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=U({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;a.push({params:r,pathname:q([i,l.pathname]),pathnameBase:z(q([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=q([i,l.pathnameBase]))}return a}function j(e,n){return void 0===n&&(n=[]),null==e?null:e.reduceRight((function(r,i,a){return(0,t.createElement)(_.Provider,{children:void 0!==i.route.element?i.route.element:r,value:{outlet:r,matches:n.concat(e.slice(0,a+1))}})}),null)}function U(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=n?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)";return[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=s(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],c=u.replace(/(.)\/+$/,"$1"),l=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=l[n]||"";c=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return e}}(l[n]||""),e}),{}),pathname:u,pathnameBase:c,pattern:e}}function V(e,t,n){var r,i="string"===typeof e?k(e):e,a=""===e||""===i.pathname?"/":i.pathname;if(null==a)r=n;else{var o=t.length-1;if(a.startsWith("..")){for(var u=a.split("/");".."===u[0];)u.shift(),o-=1;i.pathname=u.join("/")}r=o>=0?t[o]:"/"}var s=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?k(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:K(a),hash:W(u)}}(i,r);return a&&"/"!==a&&a.endsWith("/")&&!s.pathname.endsWith("/")&&(s.pathname+="/"),s}function B(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=e.charAt(t.length);return n&&"/"!==n?null:e.slice(t.length)||"/"}var q=function(e){return e.join("/").replace(/\/\/+/g,"/")},z=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},K=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},W=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""};function H(){return H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},H.apply(this,arguments)}function G(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var Q=["onClick","reloadDocument","replace","state","target","to"];function Y(e){var n=e.basename,r=e.children,i=e.window,a=(0,t.useRef)();null==a.current&&(a.current=function(e){void 0===e&&(e={});var t=e.window,n=void 0===t?document.defaultView:t,r=n.history;function i(){var e=n.location,t=e.pathname,i=e.search,a=e.hash,o=r.state||{};return[o.idx,h({pathname:t,search:i,hash:a,state:o.usr||null,key:o.key||"default"})]}var a=null;n.addEventListener(p,(function(){if(a)w.call(a),a=null;else{var e=c.Pop,t=i(),n=t[0],r=t[1];if(w.length){if(null!=n){var o=s-n;o&&(a={action:e,location:r,retry:function(){S(-1*o)}},S(o))}}else T(e)}}));var o=c.Pop,u=i(),s=u[0],l=u[1],b=m(),w=m();function x(e){return"string"===typeof e?e:g(e)}function _(e,t){return void 0===t&&(t=null),h(f({pathname:l.pathname,hash:"",search:""},"string"===typeof e?k(e):e,{state:t,key:y()}))}function I(e,t){return[{usr:e.state,key:e.key,idx:t},x(e)]}function E(e,t,n){return!w.length||(w.call({action:e,location:t,retry:n}),!1)}function T(e){o=e;var t=i();s=t[0],l=t[1],b.call({action:o,location:l})}function S(e){r.go(e)}null==s&&(s=0,r.replaceState(f({},r.state,{idx:s}),""));var C={get action(){return o},get location(){return l},createHref:x,push:function e(t,i){var a=c.Push,o=_(t,i);if(E(a,o,(function(){e(t,i)}))){var u=I(o,s+1),l=u[0],f=u[1];try{r.pushState(l,"",f)}catch(h){n.location.assign(f)}T(a)}},replace:function e(t,n){var i=c.Replace,a=_(t,n);if(E(i,a,(function(){e(t,n)}))){var o=I(a,s),u=o[0],l=o[1];r.replaceState(u,"",l),T(i)}},go:S,back:function(){S(-1)},forward:function(){S(1)},listen:function(e){return b.push(e)},block:function(e){var t=w.push(e);return 1===w.length&&n.addEventListener(d,v),function(){t(),w.length||n.removeEventListener(d,v)}}};return C}({window:i}));var o=a.current,u=s((0,t.useState)({action:o.action,location:o.location}),2),l=u[0],b=u[1];return(0,t.useLayoutEffect)((function(){return o.listen(b)}),[o]),(0,t.createElement)(E,{basename:n,children:r,location:l.location,navigationType:l.action,navigator:o})}var $=(0,t.forwardRef)((function(e,n){var r=e.onClick,i=e.reloadDocument,a=e.replace,o=void 0!==a&&a,u=e.state,s=e.target,c=e.to,l=G(e,Q),f=S(c),h=function(e,n){var r=void 0===n?{}:n,i=r.target,a=r.replace,o=r.state,u=A(),s=N(),c=D(e);return(0,t.useCallback)((function(t){if(0===t.button&&(!i||"_self"===i)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t)){t.preventDefault();var n=!!a||g(s)===g(c);u(e,{replace:n,state:o})}}),[s,u,c,a,o,i,e])}(c,{replace:o,state:u,target:s});return(0,t.createElement)("a",H({},l,{href:f,onClick:function(e){r&&r(e),e.defaultPrevented||i||h(e)},ref:n,target:s}))}));function J(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function X(e){return function(e){if(Array.isArray(e))return a(e)}(e)||J(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach((function(t){Z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ne(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,a=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw a}}}}function re(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ae(e,t,n){return t&&ie(e.prototype,t),n&&ie(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function oe(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function ue(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){oe(a,r,i,o,u,"next",e)}function u(e){oe(a,r,i,o,u,"throw",e)}o(void 0)}))}}var se=n(757),ce=n.n(se);function le(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fe(e,t){return fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},fe(e,t)}function he(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fe(e,t)}function de(e){return de=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},de(e)}function pe(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(oC){return!1}}function ve(e){return ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ve(e)}function me(e,t){if(t&&("object"===ve(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return le(e)}function ye(e){var t=pe();return function(){var n,r=de(e);if(t){var i=de(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return me(this,n)}}function ge(e,t,n){return ge=pe()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&fe(i,n.prototype),i},ge.apply(null,arguments)}function ke(e){var t="function"===typeof Map?new Map:void 0;return ke=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return ge(e,arguments,de(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),fe(n,e)},ke(e)}var be=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},we={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(be(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},xe=function(e){return function(e){var t=be(e);return we.encodeByteArray(t,!0)}(e).replace(/\./g,"")},_e=function(e){try{return we.decodeString(e,!0)}catch(oC){console.error("base64Decode failed: ",oC)}return null};function Ie(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Ie(e[n],t[n]));return e}var Ee=function(){function e(){var t=this;re(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return ae(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function Te(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[xe(JSON.stringify({alg:"none",type:"JWT"})),xe(JSON.stringify(a)),""].join(".")}function Se(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Ce(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Se())}function Ne(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(oC){return!1}}function Ae(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function De(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Pe(){var e=Se();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Oe(){return"object"===typeof indexedDB}function Re(){return new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}}))}var Le=function(e){he(n,e);var t=ye(n);function n(e,r,i){var a;return re(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(le(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(le(a),Me.prototype.create),a}return ae(n)}(ke(Error)),Me=function(){function e(t,n,r){re(this,e),this.service=t,this.serviceName=n,this.errors=r}return ae(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?Fe(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new Le(n,a,t);return o}}]),e}();function Fe(e,t){return e.replace(je,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var je=/\{\$([^}]+)}/g;function Ue(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ve(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(Be(u)&&Be(s)){if(!Ve(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function Be(e){return null!==e&&"object"===typeof e}function qe(e){for(var t=[],n=function(){var e=s(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function ze(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=s(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function Ke(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function We(e,t){var n=new He(e,t);return n.subscribe.bind(n)}var He=function(){function e(t,n){var r=this;re(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return ae(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=ne(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=Ge),void 0===r.error&&(r.error=Ge),void 0===r.complete&&(r.complete=Ge);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(oC){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(oC){"undefined"!==typeof console&&console.error&&console.error(oC)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function Ge(){}var Qe=144e5;function Ye(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=t*Math.pow(n,e),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(Qe,r+i)}function $e(e){return e&&e._delegate?e._delegate:e}function Je(e,t){return new Promise((function(n,r){e.onsuccess=function(e){n(e.target.result)},e.onerror=function(e){var n;r("".concat(t,": ").concat(null===(n=e.target.error)||void 0===n?void 0:n.message))}}))}var Xe=function(){function e(t){re(this,e),this._db=t,this.objectStoreNames=this._db.objectStoreNames}return ae(e,[{key:"transaction",value:function(e,t){return new Ze(this._db.transaction.call(this._db,e,t))}},{key:"createObjectStore",value:function(e,t){return new et(this._db.createObjectStore(e,t))}},{key:"close",value:function(){this._db.close()}}]),e}(),Ze=function(){function e(t){var n=this;re(this,e),this._transaction=t,this.complete=new Promise((function(e,t){n._transaction.oncomplete=function(){e()},n._transaction.onerror=function(){t(n._transaction.error)},n._transaction.onabort=function(){t(n._transaction.error)}}))}return ae(e,[{key:"objectStore",value:function(e){return new et(this._transaction.objectStore(e))}}]),e}(),et=function(){function e(t){re(this,e),this._store=t}return ae(e,[{key:"index",value:function(e){return new tt(this._store.index(e))}},{key:"createIndex",value:function(e,t,n){return new tt(this._store.createIndex(e,t,n))}},{key:"get",value:function(e){return Je(this._store.get(e),"Error reading from IndexedDB")}},{key:"put",value:function(e,t){return Je(this._store.put(e,t),"Error writing to IndexedDB")}},{key:"delete",value:function(e){return Je(this._store.delete(e),"Error deleting from IndexedDB")}},{key:"clear",value:function(){return Je(this._store.clear(),"Error clearing IndexedDB object store")}}]),e}(),tt=function(){function e(t){re(this,e),this._index=t}return ae(e,[{key:"get",value:function(e){return Je(this._index.get(e),"Error reading from IndexedDB")}}]),e}();function nt(e,t,n){return new Promise((function(r,i){try{var a=indexedDB.open(e,t);a.onsuccess=function(e){r(new Xe(e.target.result))},a.onerror=function(e){var t;i("Error opening indexedDB: ".concat(null===(t=e.target.error)||void 0===t?void 0:t.message))},a.onupgradeneeded=function(e){n(new Xe(a.result),e.oldVersion,e.newVersion,new Ze(a.transaction))}}catch(oC){i("Error opening indexedDB: ".concat(oC.message))}}))}var rt=function(){function e(t,n,r){re(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return ae(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),it="[DEFAULT]",at=function(){function e(t,n){re(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return ae(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new Ee;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(oC){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(oC){if(r)return null;throw oC}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:it})}catch(oC){}var t,n=ne(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=s(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(oC){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:it;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=ue(se.mark((function e(){var t;return se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(X(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),X(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:it;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:it;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=ne(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=s(i.value,2),c=u[0],l=u[1],f=this.normalizeInstanceIdentifier(c);r===f&&l.resolve(a)}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=ne(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(F_){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===it?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(F_){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:it;return this.component?this.component.multipleInstances?e:it:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var ot,ut,st=function(){function e(t){re(this,e),this.name=t,this.providers=new Map}return ae(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new at(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),ct=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(ut||(ut={}));var lt,ft,ht={debug:ut.DEBUG,verbose:ut.VERBOSE,info:ut.INFO,warn:ut.WARN,error:ut.ERROR,silent:ut.SILENT},dt=ut.INFO,pt=(Z(ot={},ut.DEBUG,"log"),Z(ot,ut.VERBOSE,"log"),Z(ot,ut.INFO,"info"),Z(ot,ut.WARN,"warn"),Z(ot,ut.ERROR,"error"),ot),vt=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=pt[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},mt=function(){function e(t){re(this,e),this.name=t,this._logLevel=dt,this._logHandler=vt,this._userLogHandler=null,ct.push(this)}return ae(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in ut))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?ht[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ut.DEBUG].concat(t)),this._logHandler.apply(this,[this,ut.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ut.VERBOSE].concat(t)),this._logHandler.apply(this,[this,ut.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ut.INFO].concat(t)),this._logHandler.apply(this,[this,ut.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ut.WARN].concat(t)),this._logHandler.apply(this,[this,ut.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ut.ERROR].concat(t)),this._logHandler.apply(this,[this,ut.ERROR].concat(t))}}]),e}();var yt=function(){function e(t){re(this,e),this.container=t}return ae(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var gt="@firebase/app",kt="0.7.19",bt=new mt("@firebase/app"),wt="[DEFAULT]",xt=(Z(lt={},gt,"fire-core"),Z(lt,"@firebase/app-compat","fire-core-compat"),Z(lt,"@firebase/analytics","fire-analytics"),Z(lt,"@firebase/analytics-compat","fire-analytics-compat"),Z(lt,"@firebase/app-check","fire-app-check"),Z(lt,"@firebase/app-check-compat","fire-app-check-compat"),Z(lt,"@firebase/auth","fire-auth"),Z(lt,"@firebase/auth-compat","fire-auth-compat"),Z(lt,"@firebase/database","fire-rtdb"),Z(lt,"@firebase/database-compat","fire-rtdb-compat"),Z(lt,"@firebase/functions","fire-fn"),Z(lt,"@firebase/functions-compat","fire-fn-compat"),Z(lt,"@firebase/installations","fire-iid"),Z(lt,"@firebase/installations-compat","fire-iid-compat"),Z(lt,"@firebase/messaging","fire-fcm"),Z(lt,"@firebase/messaging-compat","fire-fcm-compat"),Z(lt,"@firebase/performance","fire-perf"),Z(lt,"@firebase/performance-compat","fire-perf-compat"),Z(lt,"@firebase/remote-config","fire-rc"),Z(lt,"@firebase/remote-config-compat","fire-rc-compat"),Z(lt,"@firebase/storage","fire-gcs"),Z(lt,"@firebase/storage-compat","fire-gcs-compat"),Z(lt,"@firebase/firestore","fire-fst"),Z(lt,"@firebase/firestore-compat","fire-fst-compat"),Z(lt,"fire-js","fire-js"),Z(lt,"firebase","fire-js-all"),lt),_t=new Map,It=new Map;function Et(e,t){try{e.container.addComponent(t)}catch(oC){bt.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),oC)}}function Tt(e,t){e.container.addOrOverwriteComponent(t)}function St(e){var t=e.name;if(It.has(t))return bt.debug("There were multiple attempts to register component ".concat(t,".")),!1;It.set(t,e);var n,r=ne(_t.values());try{for(r.s();!(n=r.n()).done;){Et(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Ct(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Nt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:wt;Ct(e,t).clearInstance(n)}function At(){It.clear()}var Dt=(Z(ft={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Z(ft,"bad-app-name","Illegal App name: '{$appName}"),Z(ft,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),Z(ft,"app-deleted","Firebase App named '{$appName}' already deleted"),Z(ft,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Z(ft,"invalid-log-argument","First argument to `onLog` must be null or a function."),Z(ft,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),Z(ft,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),Z(ft,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),Z(ft,"storage-delete","Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),ft),Pt=new Me("app","Firebase",Dt),Ot=function(){function e(t,n,r){var i=this;re(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new rt("app",(function(){return i}),"PUBLIC"))}return ae(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Pt.create("app-deleted",{appName:this._name})}}]),e}(),Rt="9.6.9";function Lt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:wt,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Pt.create("bad-app-name",{appName:String(i)});var a=_t.get(i);if(a){if(Ve(e,a.options)&&Ve(r,a.config))return a;throw Pt.create("duplicate-app",{appName:i})}var o,u=new st(i),s=ne(It.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new Ot(e,r,u);return _t.set(i,l),l}function Mt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt,t=_t.get(e);if(!t)throw Pt.create("no-app",{appName:e});return t}function Ft(){return Array.from(_t.values())}function jt(e){return Ut.apply(this,arguments)}function Ut(){return(Ut=ue(se.mark((function e(t){var n;return se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!_t.has(n)){e.next=6;break}return _t.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vt(e,t,n){var r,i=null!==(r=xt[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void bt.warn(u.join(" "))}St(new rt("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Bt(e,t){if(null!==e&&"function"!==typeof e)throw Pt.create("invalid-log-argument");!function(e,t){var n,r=ne(ct);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=ht[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:ut[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function qt(e){var t;t=e,ct.forEach((function(e){e.setLogLevel(t)}))}var zt="firebase-heartbeat-store",Kt=null;function Wt(){return Kt||(Kt=nt("firebase-heartbeat-database",1,(function(e,t){if(0===t)e.createObjectStore(zt)})).catch((function(e){throw Pt.create("storage-open",{originalErrorMessage:e.message})}))),Kt}function Ht(e){return Gt.apply(this,arguments)}function Gt(){return Gt=ue(se.mark((function e(t){var n;return se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Wt();case 3:return n=e.sent,e.abrupt("return",n.transaction(zt).objectStore(zt).get($t(t)));case 7:throw e.prev=7,e.t0=e.catch(0),Pt.create("storage-get",{originalErrorMessage:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),Gt.apply(this,arguments)}function Qt(e,t){return Yt.apply(this,arguments)}function Yt(){return Yt=ue(se.mark((function e(t,n){var r,i,a;return se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Wt();case 3:return r=e.sent,i=r.transaction(zt,"readwrite"),a=i.objectStore(zt),e.next=8,a.put(n,$t(t));case 8:return e.abrupt("return",i.complete);case 11:throw e.prev=11,e.t0=e.catch(0),Pt.create("storage-set",{originalErrorMessage:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),Yt.apply(this,arguments)}function $t(e){return"".concat(e.name,"!").concat(e.options.appId)}var Jt=function(){function e(t){var n=this;re(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new nn(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return ae(e,[{key:"triggerHeartbeat",value:function(){var e=ue(se.mark((function e(){var t,n,r;return se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=Xt(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=ue(se.mark((function e(){var t,n,r,i,a;return se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=Xt(),n=Zt(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=xe(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Xt(){return(new Date).toISOString().substring(0,10)}function Zt(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=ne(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),rn(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),rn(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var en,tn,nn=function(){function e(t){re(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return ae(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=ue(se.mark((function e(){return se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Oe()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",Re().then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=ue(se.mark((function e(){var t;return se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Ht(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=ue(se.mark((function e(t){var n,r;return se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Qt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=ue(se.mark((function e(t){var n,r;return se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Qt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(X(r.heartbeats),X(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function rn(e){return xe(JSON.stringify({version:2,heartbeats:e})).length}en="",St(new rt("platform-logger",(function(e){return new yt(e)}),"PRIVATE")),St(new rt("heartbeat",(function(e){return new Jt(e)}),"PRIVATE")),Vt(gt,kt,en),Vt(gt,kt,"esm2017"),Vt("fire-js","");var an="@firebase/installations",on="0.5.6",un=1e4,sn="w:".concat(on),cn="FIS_v2",ln=36e5,fn=(Z(tn={},"missing-app-config-values",'Missing App configuration value: "{$valueName}"'),Z(tn,"not-registered","Firebase Installation is not registered."),Z(tn,"installation-not-found","Firebase Installation not found."),Z(tn,"request-failed",'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"'),Z(tn,"app-offline","Could not process request. Application offline."),Z(tn,"delete-pending-registration","Can't delete installation while there is a pending registration request."),tn),hn=new Me("installations","Installations",fn);function dn(e){return e instanceof Le&&e.code.includes("request-failed")}function pn(e){var t=e.projectId;return"".concat("https://firebaseinstallations.googleapis.com/v1","/projects/").concat(t,"/installations")}function vn(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}function mn(e,t){return yn.apply(this,arguments)}function yn(){return(yn=ue(se.mark((function e(t,n){var r,i;return se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.json();case 2:return r=e.sent,i=r.error,e.abrupt("return",hn.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gn(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function kn(e,t){var n=t.refreshToken,r=gn(e);return r.append("Authorization",function(e){return"".concat(cn," ").concat(e)}(n)),r}function bn(e){return wn.apply(this,arguments)}function wn(){return wn=ue(se.mark((function e(t){var n;return se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:if(!((n=e.sent).status>=500&&n.status<600)){e.next=5;break}return e.abrupt("return",t());case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)}))),wn.apply(this,arguments)}function xn(e,t){return _n.apply(this,arguments)}function _n(){return(_n=ue(se.mark((function e(t,n){var r,i,a,o,u,s,c,l,f,h,d,p;return se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.appConfig,i=t.heartbeatServiceProvider,a=n.fid,o=pn(r),u=gn(r),!(s=i.getImmediate({optional:!0}))){e.next=10;break}return e.next=8,s.getHeartbeatsHeader();case 8:(c=e.sent)&&u.append("x-firebase-client",c);case 10:return l={fid:a,authVersion:cn,appId:r.appId,sdkVersion:sn},f={method:"POST",headers:u,body:JSON.stringify(l)},e.next=14,bn((function(){return fetch(o,f)}));case 14:if(!(h=e.sent).ok){e.next=23;break}return e.next=18,h.json();case 18:return d=e.sent,p={fid:d.fid||a,registrationStatus:2,refreshToken:d.refreshToken,authToken:vn(d.authToken)},e.abrupt("return",p);case 23:return e.next=25,mn("Create Installation",h);case 25:throw e.sent;case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function In(e){return new Promise((function(t){setTimeout(t,e)}))}var En=/^[cdef][\w-]{21}$/;function Tn(){try{var e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;var t=function(e){return(t=e,btoa(String.fromCharCode.apply(String,X(t))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var t}(e);return En.test(t)?t:""}catch(F_){return""}}function Sn(e){return"".concat(e.appName,"!").concat(e.appId)}var Cn=new Map;function Nn(e,t){var n=Sn(e);An(n,t),function(e,t){var n=Pn();n&&n.postMessage({key:e,fid:t});On()}(n,t)}function An(e,t){var n=Cn.get(e);if(n){var r,i=ne(n);try{for(i.s();!(r=i.n()).done;){(0,r.value)(t)}}catch(a){i.e(a)}finally{i.f()}}}var Dn=null;function Pn(){return!Dn&&"BroadcastChannel"in self&&((Dn=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(e){An(e.data.key,e.data.fid)}),Dn}function On(){0===Cn.size&&Dn&&(Dn.close(),Dn=null)}var Rn="firebase-installations-store",Ln=null;function Mn(){return Ln||(Ln=nt("firebase-installations-database",1,(function(e,t){if(0===t)e.createObjectStore(Rn)}))),Ln}function Fn(e,t){return jn.apply(this,arguments)}function jn(){return jn=ue(se.mark((function e(t,n){var r,i,a,o,u;return se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Sn(t),e.next=3,Mn();case 3:return i=e.sent,a=i.transaction(Rn,"readwrite"),o=a.objectStore(Rn),e.next=8,o.get(r);case 8:return u=e.sent,e.next=11,o.put(n,r);case 11:return e.next=13,a.complete;case 13:return u&&u.fid===n.fid||Nn(t,n.fid),e.abrupt("return",n);case 15:case"end":return e.stop()}}),e)}))),jn.apply(this,arguments)}function Un(e){return Vn.apply(this,arguments)}function Vn(){return Vn=ue(se.mark((function e(t){var n,r,i;return se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Sn(t),e.next=3,Mn();case 3:return r=e.sent,i=r.transaction(Rn,"readwrite"),e.next=7,i.objectStore(Rn).delete(n);case 7:return e.next=9,i.complete;case 9:case"end":return e.stop()}}),e)}))),Vn.apply(this,arguments)}function Bn(e,t){return qn.apply(this,arguments)}function qn(){return qn=ue(se.mark((function e(t,n){var r,i,a,o,u,s;return se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Sn(t),e.next=3,Mn();case 3:return i=e.sent,a=i.transaction(Rn,"readwrite"),o=a.objectStore(Rn),e.next=8,o.get(r);case 8:if(u=e.sent,void 0!==(s=n(u))){e.next=15;break}return e.next=13,o.delete(r);case 13:e.next=17;break;case 15:return e.next=17,o.put(s,r);case 17:return e.next=19,a.complete;case 19:return!s||u&&u.fid===s.fid||Nn(t,s.fid),e.abrupt("return",s);case 21:case"end":return e.stop()}}),e)}))),qn.apply(this,arguments)}function zn(e){return Kn.apply(this,arguments)}function Kn(){return(Kn=ue(se.mark((function e(t){var n,r;return se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Bn(t.appConfig,(function(e){var r=Wn(e),i=Hn(t,r);return n=i.registrationPromise,i.installationEntry}));case 2:if(""!==(r=e.sent).fid){e.next=8;break}return e.next=6,n;case 6:return e.t0=e.sent,e.abrupt("return",{installationEntry:e.t0});case 8:return e.abrupt("return",{installationEntry:r,registrationPromise:n});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wn(e){return Jn(e||{fid:Tn(),registrationStatus:0})}function Hn(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(hn.create("app-offline"))};var n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=function(e,t){return Gn.apply(this,arguments)}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:Qn(e)}:{installationEntry:t}}function Gn(){return(Gn=ue(se.mark((function e(t,n){var r;return se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,xn(t,n);case 3:return r=e.sent,e.abrupt("return",Fn(t.appConfig,r));case 7:if(e.prev=7,e.t0=e.catch(0),!dn(e.t0)||409!==e.t0.customData.serverCode){e.next=14;break}return e.next=12,Un(t.appConfig);case 12:e.next=16;break;case 14:return e.next=16,Fn(t.appConfig,{fid:n.fid,registrationStatus:0});case 16:throw e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function Qn(e){return Yn.apply(this,arguments)}function Yn(){return(Yn=ue(se.mark((function e(t){var n,r,i,a;return se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$n(t.appConfig);case 2:n=e.sent;case 3:if(1!==n.registrationStatus){e.next=11;break}return e.next=6,In(100);case 6:return e.next=8,$n(t.appConfig);case 8:n=e.sent,e.next=3;break;case 11:if(0!==n.registrationStatus){e.next=22;break}return e.next=14,zn(t);case 14:if(r=e.sent,i=r.installationEntry,!(a=r.registrationPromise)){e.next=21;break}return e.abrupt("return",a);case 21:return e.abrupt("return",i);case 22:return e.abrupt("return",n);case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $n(e){return Bn(e,(function(e){if(!e)throw hn.create("installation-not-found");return Jn(e)}))}function Jn(e){return 1===(t=e).registrationStatus&&t.registrationTime+un<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}function Xn(e,t){return Zn.apply(this,arguments)}function Zn(){return(Zn=ue(se.mark((function e(t,n){var r,i,a,o,u,s,c,l,f,h,d;return se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.appConfig,i=t.heartbeatServiceProvider,a=er(r,n),o=kn(r,n),!(u=i.getImmediate({optional:!0}))){e.next=9;break}return e.next=7,u.getHeartbeatsHeader();case 7:(s=e.sent)&&o.append("x-firebase-client",s);case 9:return c={installation:{sdkVersion:sn,appId:r.appId}},l={method:"POST",headers:o,body:JSON.stringify(c)},e.next=13,bn((function(){return fetch(a,l)}));case 13:if(!(f=e.sent).ok){e.next=22;break}return e.next=17,f.json();case 17:return h=e.sent,d=vn(h),e.abrupt("return",d);case 22:return e.next=24,mn("Generate Auth Token",f);case 24:throw e.sent;case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function er(e,t){var n=t.fid;return"".concat(pn(e),"/").concat(n,"/authTokens:generate")}function tr(e){return nr.apply(this,arguments)}function nr(){return nr=ue(se.mark((function e(t){var n,r,i,a,o=arguments;return se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]&&o[1],e.next=3,Bn(t.appConfig,(function(e){if(!sr(e))throw hn.create("not-registered");var i=e.authToken;if(!n&&cr(i))return e;if(1===i.requestStatus)return r=rr(t,n),e;if(!navigator.onLine)throw hn.create("app-offline");var a=lr(e);return r=or(t,a),a}));case 3:if(i=e.sent,!r){e.next=10;break}return e.next=7,r;case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=i.authToken;case 11:return a=e.t0,e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),nr.apply(this,arguments)}function rr(e,t){return ir.apply(this,arguments)}function ir(){return(ir=ue(se.mark((function e(t,n){var r,i;return se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ar(t.appConfig);case 2:r=e.sent;case 3:if(1!==r.authToken.requestStatus){e.next=11;break}return e.next=6,In(100);case 6:return e.next=8,ar(t.appConfig);case 8:r=e.sent,e.next=3;break;case 11:if(0!==(i=r.authToken).requestStatus){e.next=16;break}return e.abrupt("return",tr(t,n));case 16:return e.abrupt("return",i);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ar(e){return Bn(e,(function(e){if(!sr(e))throw hn.create("not-registered");var t,n=e.authToken;return 1===(t=n).requestStatus&&t.requestTime+un<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e}))}function or(e,t){return ur.apply(this,arguments)}function ur(){return(ur=ue(se.mark((function e(t,n){var r,i,a;return se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Xn(t,n);case 3:return r=e.sent,i=Object.assign(Object.assign({},n),{authToken:r}),e.next=7,Fn(t.appConfig,i);case 7:return e.abrupt("return",r);case 10:if(e.prev=10,e.t0=e.catch(0),!dn(e.t0)||401!==e.t0.customData.serverCode&&404!==e.t0.customData.serverCode){e.next=17;break}return e.next=15,Un(t.appConfig);case 15:e.next=20;break;case 17:return a=Object.assign(Object.assign({},n),{authToken:{requestStatus:0}}),e.next=20,Fn(t.appConfig,a);case 20:throw e.t0;case 21:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function sr(e){return void 0!==e&&2===e.registrationStatus}function cr(e){return 2===e.requestStatus&&!function(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+ln}(e)}function lr(e){var t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function fr(){return(fr=ue(se.mark((function e(t){var n,r,i,a;return se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.next=3,zn(n);case 3:return r=e.sent,i=r.installationEntry,(a=r.registrationPromise)?a.catch(console.error):tr(n).catch(console.error),e.abrupt("return",i.fid);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hr(){return hr=ue(se.mark((function e(t){var n,r,i,a=arguments;return se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]&&a[1],r=t,e.next=4,dr(r);case 4:return e.next=6,tr(r,n);case 6:return i=e.sent,e.abrupt("return",i.token);case 8:case"end":return e.stop()}}),e)}))),hr.apply(this,arguments)}function dr(e){return pr.apply(this,arguments)}function pr(){return(pr=ue(se.mark((function e(t){var n,r;return se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zn(t);case 2:if(n=e.sent,!(r=n.registrationPromise)){e.next=7;break}return e.next=7,r;case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vr(e){return hn.create("missing-app-config-values",{valueName:e})}var mr,yr="installations",gr=function(e){var t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw vr("App Configuration");if(!e.name)throw vr("App Name");for(var t=0,n=["projectId","apiKey","appId"];t<n.length;t++){var r=n[t];if(!e.options[r])throw vr(r)}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:Ct(t,"heartbeat"),_delete:function(){return Promise.resolve()}}},kr=function(e){var t=Ct(e.getProvider("app").getImmediate(),yr).getImmediate(),n={getId:function(){return function(e){return fr.apply(this,arguments)}(t)},getToken:function(e){return function(e){return hr.apply(this,arguments)}(t,e)}};return n};St(new rt(yr,gr,"PUBLIC")),St(new rt("installations-internal",kr,"PRIVATE")),Vt(an,on),Vt(an,on,"esm2017");var br="analytics",wr=6e4,xr="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",_r="https://www.googletagmanager.com/gtag/js",Ir=new mt("@firebase/analytics");function Er(e){return Promise.all(e.map((function(e){return e.catch((function(e){return e}))})))}function Tr(e,t){var n=document.createElement("script");n.src="".concat(_r,"?l=").concat(e,"&id=").concat(t),n.async=!0,document.head.appendChild(n)}function Sr(e,t,n,r,i,a){return Cr.apply(this,arguments)}function Cr(){return Cr=ue(se.mark((function e(t,n,r,i,a,o){var u,s,c;return se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=i[a],e.prev=1,!u){e.next=7;break}return e.next=5,n[u];case 5:e.next=14;break;case 7:return e.next=9,Er(r);case 9:if(s=e.sent,!(c=s.find((function(e){return e.measurementId===a})))){e.next=14;break}return e.next=14,n[c.appId];case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),Ir.error(e.t0);case 19:t("config",a,o);case 20:case"end":return e.stop()}}),e,null,[[1,16]])}))),Cr.apply(this,arguments)}function Nr(e,t,n,r,i){return Ar.apply(this,arguments)}function Ar(){return Ar=ue(se.mark((function e(t,n,r,i,a){var o,u,s,c,l,f;return se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,o=[],!a||!a.send_to){e.next=26;break}return u=a.send_to,Array.isArray(u)||(u=[u]),e.next=7,Er(r);case 7:s=e.sent,c=ne(u),e.prev=9,f=function(){var e=l.value,t=s.find((function(t){return t.measurementId===e})),r=t&&n[t.appId];if(!r)return o=[],"break";o.push(r)},c.s();case 12:if((l=c.n()).done){e.next=18;break}if("break"!==f()){e.next=16;break}return e.abrupt("break",18);case 16:e.next=12;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(9),c.e(e.t0);case 23:return e.prev=23,c.f(),e.finish(23);case 26:return 0===o.length&&(o=Object.values(n)),e.next=29,Promise.all(o);case 29:t("event",i,a||{}),e.next=35;break;case 32:e.prev=32,e.t1=e.catch(0),Ir.error(e.t1);case 35:case"end":return e.stop()}}),e,null,[[0,32],[9,20,23,26]])}))),Ar.apply(this,arguments)}function Dr(e,t,n,r,i){var a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(a=window[i]),window[i]=function(e,t,n,r){function i(){return(i=ue(se.mark((function i(a,o,u){return se.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,"event"!==a){i.next=6;break}return i.next=4,Nr(e,t,n,o,u);case 4:i.next=12;break;case 6:if("config"!==a){i.next=11;break}return i.next=9,Sr(e,t,n,r,o,u);case 9:i.next=12;break;case 11:e("set",o);case 12:i.next=17;break;case 14:i.prev=14,i.t0=i.catch(0),Ir.error(i.t0);case 17:case"end":return i.stop()}}),i,null,[[0,14]])})))).apply(this,arguments)}return function(e,t,n){return i.apply(this,arguments)}}(a,e,t,n),{gtagCore:a,wrappedGtag:window[i]}}function Pr(){for(var e=window.document.getElementsByTagName("script"),t=0,n=Object.values(e);t<n.length;t++){var r=n[t];if(r.src&&r.src.includes(_r))return r}return null}var Or=(Z(mr={},"already-exists","A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId."),Z(mr,"already-initialized","initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance."),Z(mr,"already-initialized-settings","Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect."),Z(mr,"interop-component-reg-failed","Firebase Analytics Interop Component failed to instantiate: {$reason}"),Z(mr,"invalid-analytics-context","Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}"),Z(mr,"indexeddb-unavailable","IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}"),Z(mr,"fetch-throttle","The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}."),Z(mr,"config-fetch-failed","Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}"),Z(mr,"no-api-key",'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.'),Z(mr,"no-app-id",'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'),mr),Rr=new Me("analytics","Analytics",Or),Lr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;re(this,e),this.throttleMetadata=t,this.intervalMillis=n}return ae(e,[{key:"getThrottleMetadata",value:function(e){return this.throttleMetadata[e]}},{key:"setThrottleMetadata",value:function(e,t){this.throttleMetadata[e]=t}},{key:"deleteThrottleMetadata",value:function(e){delete this.throttleMetadata[e]}}]),e}(),Mr=new Lr;function Fr(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function jr(e){return Ur.apply(this,arguments)}function Ur(){return Ur=ue(se.mark((function e(t){var n,r,i,a,o,u,s,c;return se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.appId,i=t.apiKey,a={method:"GET",headers:Fr(i)},o=xr.replace("{app-id}",r),e.next=5,fetch(o,a);case 5:if(200===(u=e.sent).status||304===u.status){e.next=18;break}return s="",e.prev=8,e.next=11,u.json();case 11:c=e.sent,(null===(n=c.error)||void 0===n?void 0:n.message)&&(s=c.error.message),e.next=17;break;case 15:e.prev=15,e.t0=e.catch(8);case 17:throw Rr.create("config-fetch-failed",{httpStatus:u.status,responseMessage:s});case 18:return e.abrupt("return",u.json());case 19:case"end":return e.stop()}}),e,null,[[8,15]])}))),Ur.apply(this,arguments)}function Vr(e){return Br.apply(this,arguments)}function Br(){return Br=ue(se.mark((function e(t){var n,r,i,a,o,u,s,c,l=arguments;return se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=l.length>1&&void 0!==l[1]?l[1]:Mr,r=l.length>2?l[2]:void 0,i=t.options,a=i.appId,o=i.apiKey,u=i.measurementId,a){e.next=5;break}throw Rr.create("no-app-id");case 5:if(o){e.next=9;break}if(!u){e.next=8;break}return e.abrupt("return",{measurementId:u,appId:a});case 8:throw Rr.create("no-api-key");case 9:return s=n.getThrottleMetadata(a)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new Hr,setTimeout(ue(se.mark((function e(){return se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c.abort();case 1:case"end":return e.stop()}}),e)}))),void 0!==r?r:wr),e.abrupt("return",qr({appId:a,apiKey:o,measurementId:u},s,c,n));case 13:case"end":return e.stop()}}),e)}))),Br.apply(this,arguments)}function qr(e,t,n){return zr.apply(this,arguments)}function zr(){return zr=ue(se.mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h=arguments;return se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.throttleEndTimeMillis,a=n.backoffCount,o=h.length>3&&void 0!==h[3]?h[3]:Mr,u=t.appId,s=t.measurementId,e.prev=3,e.next=6,Kr(r,i);case 6:e.next=14;break;case 8:if(e.prev=8,e.t0=e.catch(3),!s){e.next=13;break}return Ir.warn("Timed out fetching this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(s)+' provided in the "measurementId" field in the local Firebase config. ['.concat(e.t0.message,"]")),e.abrupt("return",{appId:u,measurementId:s});case 13:throw e.t0;case 14:return e.prev=14,e.next=17,jr(t);case 17:return c=e.sent,o.deleteThrottleMetadata(u),e.abrupt("return",c);case 22:if(e.prev=22,e.t1=e.catch(14),Wr(e.t1)){e.next=32;break}if(o.deleteThrottleMetadata(u),!s){e.next=31;break}return Ir.warn("Failed to fetch this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(s)+' provided in the "measurementId" field in the local Firebase config. ['.concat(e.t1.message,"]")),e.abrupt("return",{appId:u,measurementId:s});case 31:throw e.t1;case 32:return l=503===Number(e.t1.customData.httpStatus)?Ye(a,o.intervalMillis,30):Ye(a,o.intervalMillis),f={throttleEndTimeMillis:Date.now()+l,backoffCount:a+1},o.setThrottleMetadata(u,f),Ir.debug("Calling attemptFetch again in ".concat(l," millis")),e.abrupt("return",qr(t,f,r,o));case 37:case"end":return e.stop()}}),e,null,[[3,8],[14,22]])}))),zr.apply(this,arguments)}function Kr(e,t){return new Promise((function(n,r){var i=Math.max(t-Date.now(),0),a=setTimeout(n,i);e.addEventListener((function(){clearTimeout(a),r(Rr.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}function Wr(e){if(!(e instanceof Le)||!e.customData)return!1;var t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}var Hr=function(){function e(){re(this,e),this.listeners=[]}return ae(e,[{key:"addEventListener",value:function(e){this.listeners.push(e)}},{key:"abort",value:function(){this.listeners.forEach((function(e){return e()}))}}]),e}();function Gr(){return Qr.apply(this,arguments)}function Qr(){return(Qr=ue(se.mark((function e(){return se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Oe()){e.next=5;break}return Ir.warn(Rr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),e.abrupt("return",!1);case 5:return e.prev=5,e.next=8,Re();case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(5),Ir.warn(Rr.create("indexeddb-unavailable",{errorInfo:e.t0}).message),e.abrupt("return",!1);case 14:return e.abrupt("return",!0);case 15:case"end":return e.stop()}}),e,null,[[5,10]])})))).apply(this,arguments)}function Yr(){return Yr=ue(se.mark((function e(t,n,r,i,a,o,u){var c,l,f,h,d,p,v,m;return se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(l=Vr(t)).then((function(e){r[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&Ir.warn("The measurement ID in the local Firebase config (".concat(t.options.measurementId,")")+" does not match the measurement ID fetched from the server (".concat(e.measurementId,").")+" To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(e){return Ir.error(e)})),n.push(l),f=Gr().then((function(e){return e?i.getId():void 0})),e.next=6,Promise.all([l,f]);case 6:return h=e.sent,d=s(h,2),p=d[0],v=d[1],Pr()||Tr(o,p.measurementId),a("js",new Date),(m=null!==(c=null===u||void 0===u?void 0:u.config)&&void 0!==c?c:{}).origin="firebase",m.update=!0,null!=v&&(m.firebase_id=v),a("config",p.measurementId,m),e.abrupt("return",p.measurementId);case 18:case"end":return e.stop()}}),e)}))),Yr.apply(this,arguments)}var $r,Jr,Xr=function(){function e(t){re(this,e),this.app=t}return ae(e,[{key:"_delete",value:function(){return delete Zr[this.app.options.appId],Promise.resolve()}}]),e}(),Zr={},ei=[],ti={},ni="dataLayer",ri="gtag",ii=!1;function ai(){var e=[];if(Ae()&&e.push("This is a browser extension environment."),"undefined"!==typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){var t=e.map((function(e,t){return"(".concat(t+1,") ").concat(e)})).join(" "),n=Rr.create("invalid-analytics-context",{errorInfo:t});Ir.warn(n.message)}}function oi(e,t,n){ai();var r=e.options.appId;if(!r)throw Rr.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw Rr.create("no-api-key");Ir.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest'+" measurement ID for this Firebase app. Falling back to the measurement ID ".concat(e.options.measurementId)+' provided in the "measurementId" field in the local Firebase config.')}if(null!=Zr[r])throw Rr.create("already-exists",{id:r});if(!ii){!function(e){var t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(ni);var i=Dr(Zr,ei,ti,ni,ri),a=i.wrappedGtag,o=i.gtagCore;Jr=a,$r=o,ii=!0}return Zr[r]=function(e,t,n,r,i,a,o){return Yr.apply(this,arguments)}(e,ei,ti,t,$r,ni,n),new Xr(e)}function ui(){return(ui=ue(se.mark((function e(t,n,r,i,a){var o,u;return se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a||!a.global){e.next=5;break}return t("event",r,i),e.abrupt("return");case 5:return e.next=7,n;case 7:o=e.sent,u=Object.assign(Object.assign({},i),{send_to:o}),t("event",r,u);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function si(e,t,n,r){e=$e(e),function(e,t,n,r,i){return ui.apply(this,arguments)}(Jr,Zr[e.app.options.appId],t,n,r).catch((function(e){return Ir.error(e)}))}var ci,li="@firebase/analytics",fi="0.7.6";St(new rt(br,(function(e,t){var n=t.options;return oi(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)}),"PUBLIC")),St(new rt("analytics-internal",(function(e){try{var t=e.getProvider(br).getImmediate();return{logEvent:function(e,n,r){return si(t,e,n,r)}}}catch(oC){throw Rr.create("interop-component-reg-failed",{reason:oC})}}),"PRIVATE")),Vt(li,fi),Vt(li,fi,"esm2017");var hi=function(){function e(t,n){var r=this;re(this,e),this._delegate=t,this.firebase=n,Et(t,new rt("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return ae(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),jt(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:wt;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:wt;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Et(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Tt(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),di=(Z(ci={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Z(ci,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),ci),pi=new Me("app-compat","Firebase",di);var vi=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Lt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Ue(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:Vt,setLogLevel:qt,onLog:Bt,apps:null,SDK_VERSION:Rt,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(St(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw pi.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&Ie(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Ue(n,e=e||wt))throw pi.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(hi);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Ie(n,e)},createSubscribe:We,ErrorFactory:Me,deepExtend:Ie}),n}(),mi=new mt("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){mi.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var yi=self.firebase.SDK_VERSION;yi&&yi.indexOf("LITE")>=0&&mi.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var gi=vi;!function(e){Vt("@firebase/app-compat","0.1.20",e)}();function ki(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=de(e)););return e}function bi(){return bi="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=ki(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},bi.apply(this,arguments)}gi.registerVersion("firebase","9.6.9","app-compat");function wi(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var xi;Object.create;var _i="facebook.com",Ii="github.com",Ei="google.com",Ti="password",Si="twitter.com",Ci="EMAIL_SIGNIN",Ni="PASSWORD_RESET",Ai="RECOVER_EMAIL",Di="REVERT_SECOND_FACTOR_ADDITION",Pi="VERIFY_AND_CHANGE_EMAIL",Oi="VERIFY_EMAIL";function Ri(){return Z({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Li=function(){var e;return Z(e={},"admin-restricted-operation","This operation is restricted to administrators only."),Z(e,"argument-error",""),Z(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),Z(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),Z(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),Z(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),Z(e,"cordova-not-ready","Cordova framework is not ready."),Z(e,"cors-unsupported","This browser is not supported."),Z(e,"credential-already-in-use","This credential is already associated with a different user account."),Z(e,"custom-token-mismatch","The custom token corresponds to a different audience."),Z(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),Z(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),Z(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),Z(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),Z(e,"email-already-in-use","The email address is already in use by another account."),Z(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),Z(e,"expired-action-code","The action code has expired."),Z(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),Z(e,"internal-error","An internal AuthError has occurred."),Z(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),Z(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),Z(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),Z(e,"invalid-auth-event","An internal AuthError has occurred."),Z(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),Z(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),Z(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),Z(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),Z(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),Z(e,"invalid-email","The email address is badly formatted."),Z(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),Z(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),Z(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),Z(e,"invalid-credential","The supplied auth credential is malformed or has expired."),Z(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),Z(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),Z(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),Z(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),Z(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),Z(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),Z(e,"wrong-password","The password is invalid or the user does not have a password."),Z(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),Z(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),Z(e,"invalid-provider-id","The specified provider ID is invalid."),Z(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),Z(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),Z(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),Z(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),Z(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),Z(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),Z(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),Z(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),Z(e,"missing-continue-uri","A continue URL must be provided in the request."),Z(e,"missing-iframe-start","An internal AuthError has occurred."),Z(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),Z(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),Z(e,"missing-multi-factor-info","No second factor identifier is provided."),Z(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),Z(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),Z(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),Z(e,"app-deleted","This instance of FirebaseApp has been deleted."),Z(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),Z(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),Z(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),Z(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),Z(e,"no-auth-event","An internal AuthError has occurred."),Z(e,"no-such-provider","User was not linked to an account with the given provider."),Z(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),Z(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),Z(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),Z(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),Z(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),Z(e,"provider-already-linked","User can only be linked to one identity for the given provider."),Z(e,"quota-exceeded","The project's quota for this operation has been exceeded."),Z(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),Z(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),Z(e,"rejected-credential","The request contains malformed or mismatching credentials."),Z(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),Z(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),Z(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),Z(e,"timeout","The operation has timed out."),Z(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),Z(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),Z(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),Z(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),Z(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),Z(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),Z(e,"unverified-email","The operation requires a verified email."),Z(e,"user-cancelled","The user did not grant your application the permissions it requested."),Z(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),Z(e,"user-disabled","The user account has been disabled by an administrator."),Z(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),Z(e,"user-signed-out",""),Z(e,"weak-password","The password must be 6 characters long or more."),Z(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),Z(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},Mi=Ri,Fi=new Me("auth","Firebase",Ri()),ji=new mt("@firebase/auth");function Ui(e){if(ji.logLevel<=ut.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];ji.error.apply(ji,["Auth (".concat(Rt,"): ").concat(e)].concat(n))}}function Vi(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Ki.apply(void 0,[e].concat(n))}function Bi(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Ki.apply(void 0,[e].concat(n))}function qi(e,t,n){var r=Object.assign(Object.assign({},Mi()),Z({},t,n));return new Me("auth","Firebase",r).create(t,{appName:e.name})}function zi(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Vi(e,"argument-error"),qi(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Ki(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=X(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(X(o)))}return Fi.create.apply(Fi,[e].concat(n))}function Wi(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Ki.apply(void 0,[t].concat(r))}}function Hi(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Ui(t),new Error(t)}function Gi(e,t){e||Hi(t)}var Qi=new Map;function Yi(e){Gi(e instanceof Function,"Expected a class definition");var t=Qi.get(e);return t?(Gi(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Qi.set(e,t),t)}function $i(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Ji(){return"http:"===Xi()||"https:"===Xi()}function Xi(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var Zi=function(){function e(t,n){re(this,e),this.shortDelay=t,this.longDelay=n,Gi(n>t,"Short delay should be less than long delay!"),this.isMobile=Ce()||De()}return ae(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Ji()||Ae()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function ea(e,t){Gi(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var ta=function(){function e(){re(this,e)}return ae(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Hi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Hi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Hi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),na=(Z(xi={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),Z(xi,"MISSING_CUSTOM_TOKEN","internal-error"),Z(xi,"INVALID_IDENTIFIER","invalid-email"),Z(xi,"MISSING_CONTINUE_URI","internal-error"),Z(xi,"INVALID_PASSWORD","wrong-password"),Z(xi,"MISSING_PASSWORD","internal-error"),Z(xi,"EMAIL_EXISTS","email-already-in-use"),Z(xi,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),Z(xi,"INVALID_IDP_RESPONSE","invalid-credential"),Z(xi,"INVALID_PENDING_TOKEN","invalid-credential"),Z(xi,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),Z(xi,"MISSING_REQ_TYPE","internal-error"),Z(xi,"EMAIL_NOT_FOUND","user-not-found"),Z(xi,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),Z(xi,"EXPIRED_OOB_CODE","expired-action-code"),Z(xi,"INVALID_OOB_CODE","invalid-action-code"),Z(xi,"MISSING_OOB_CODE","internal-error"),Z(xi,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),Z(xi,"INVALID_ID_TOKEN","invalid-user-token"),Z(xi,"TOKEN_EXPIRED","user-token-expired"),Z(xi,"USER_NOT_FOUND","user-token-expired"),Z(xi,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),Z(xi,"INVALID_CODE","invalid-verification-code"),Z(xi,"INVALID_SESSION_INFO","invalid-verification-id"),Z(xi,"INVALID_TEMPORARY_PROOF","invalid-credential"),Z(xi,"MISSING_SESSION_INFO","missing-verification-id"),Z(xi,"SESSION_EXPIRED","code-expired"),Z(xi,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),Z(xi,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),Z(xi,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),Z(xi,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),Z(xi,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),Z(xi,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),Z(xi,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),Z(xi,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),Z(xi,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),Z(xi,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),Z(xi,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),xi),ra=new Zi(3e4,6e4);function ia(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function aa(e,t,n,r){return oa.apply(this,arguments)}function oa(){return oa=ue(ce().mark((function e(t,n,r,i){var a,o=arguments;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",ua(t,a,ue(ce().mark((function e(){var a,o,u,s;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=qe(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",ta.fetch()(fa(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),oa.apply(this,arguments)}function ua(e,t,n){return sa.apply(this,arguments)}function sa(){return sa=ue(ce().mark((function e(t,n,r){var i,a,o,u,c,l,f,h,d,p;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},na),n),e.prev=2,a=new ha(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw da(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(c=o.ok?u.errorMessage:u.error.message,l=c.split(" : "),f=s(l,2),h=f[0],d=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw da(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==h){e.next=25;break}throw da(t,"email-already-in-use",u);case 25:if(p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=30;break}throw qi(t,p,d);case 30:Vi(t,p);case 31:e.next=38;break;case 33:if(e.prev=33,e.t0=e.catch(2),!(e.t0 instanceof Le)){e.next=37;break}throw e.t0;case 37:Vi(t,"network-request-failed");case 38:case"end":return e.stop()}}),e,null,[[2,33]])}))),sa.apply(this,arguments)}function ca(e,t,n,r){return la.apply(this,arguments)}function la(){return la=ue(ce().mark((function e(t,n,r,i){var a,o,u=arguments;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,aa(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&Vi(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),la.apply(this,arguments)}function fa(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?ea(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var ha=function(){function e(t){var n=this;re(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Bi(n.auth,"network-request-failed"))}),ra.get())}))}return ae(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function da(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Bi(e,t,r);return i.customData._tokenResponse=n,i}function pa(e,t){return va.apply(this,arguments)}function va(){return va=ue(ce().mark((function e(t,n){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",aa(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),va.apply(this,arguments)}function ma(e,t){return ya.apply(this,arguments)}function ya(){return ya=ue(ce().mark((function e(t,n){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",aa(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),ya.apply(this,arguments)}function ga(e,t){return ka.apply(this,arguments)}function ka(){return ka=ue(ce().mark((function e(t,n){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",aa(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),ka.apply(this,arguments)}function ba(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(oC){}}function wa(){return wa=ue(ce().mark((function e(t){var n,r,i,a,o,u,s=arguments;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=$e(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,Wi((a=_a(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:ba(xa(a.auth_time)),issuedAtTime:ba(xa(a.iat)),expirationTime:ba(xa(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),wa.apply(this,arguments)}function xa(e){return 1e3*Number(e)}function _a(e){var t=s(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return Ui("JWT malformed, contained fewer than 3 sections"),null;try{var a=_e(r);return a?JSON.parse(a):(Ui("Failed to decode base64 JWT payload"),null)}catch(oC){return Ui("Caught error parsing JWT payload as JSON",oC),null}}function Ia(e,t){return Ea.apply(this,arguments)}function Ea(){return Ea=ue(ce().mark((function e(t,n){var r=arguments;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Le&&Ta(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Ea.apply(this,arguments)}function Ta(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Sa=function(){function e(t){re(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return ae(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(ue(ce().mark((function t(){return ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=ue(ce().mark((function e(){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Ca=function(){function e(t,n){re(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return ae(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=ba(this.lastLoginAt),this.creationTime=ba(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Na(e){return Aa.apply(this,arguments)}function Aa(){return Aa=ue(ce().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Ia(t,ga(r,{idToken:i}));case 6:Wi(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?Oa(o.providerUserInfo):[],s=Pa(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new Ca(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),Aa.apply(this,arguments)}function Da(){return(Da=ue(ce().mark((function e(t){var n;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=$e(t),e.next=3,Na(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pa(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(X(n),X(t))}function Oa(e){return e.map((function(e){var t=e.providerId,n=wi(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function Ra(e,t){return La.apply(this,arguments)}function La(){return La=ue(ce().mark((function e(t,n){var r;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ua(t,{},ue(ce().mark((function e(){var r,i,a,o,u,s;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=qe({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=fa(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",ta.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),La.apply(this,arguments)}var Ma=function(){function e(){re(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return ae(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Wi(e.idToken,"internal-error"),Wi("undefined"!==typeof e.idToken,"internal-error"),Wi("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=_a(e);return Wi(t,"internal-error"),Wi("undefined"!==typeof t.exp,"internal-error"),Wi("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=ue(ce().mark((function e(t){var n,r=arguments;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Wi(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=ue(ce().mark((function e(t,n){var r,i,a,o;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ra(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return Hi("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(Wi("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(Wi("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(Wi("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Fa(e,t){Wi("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var ja=function(){function e(t){re(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=wi(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Sa(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?X(a.providerData):[],this.metadata=new Ca(a.createdAt||void 0,a.lastLoginAt||void 0)}return ae(e,[{key:"getIdToken",value:function(){var e=ue(ce().mark((function e(t){var n;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ia(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Wi(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return wa.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Da.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Wi(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){Wi(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=ue(ce().mark((function e(t){var n,r,i=arguments;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Na(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=ue(ce().mark((function e(){var t;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,Ia(this,pa(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,m=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,x=n.providerData,_=n.stsTokenManager;Wi(k&&_,t,"internal-error");var I=Ma.fromJSON(this.name,_);Wi("string"===typeof k,t,"internal-error"),Fa(f,t.name),Fa(h,t.name),Wi("boolean"===typeof b,t,"internal-error"),Wi("boolean"===typeof w,t,"internal-error"),Fa(d,t.name),Fa(p,t.name),Fa(v,t.name),Fa(m,t.name),Fa(y,t.name),Fa(g,t.name);var E=new e({uid:k,auth:t,email:h,emailVerified:b,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:y,lastLoginAt:g});return x&&Array.isArray(x)&&(E.providerData=x.map((function(e){return Object.assign({},e)}))),m&&(E._redirectEventId=m),E}},{key:"_fromIdTokenResponse",value:function(){var t=ue(ce().mark((function t(n,r){var i,a,o,u=arguments;return ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new Ma).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,Na(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Ua=function(){function e(){re(this,e),this.type="NONE",this.storage={}}return ae(e,[{key:"_isAvailable",value:function(){var e=ue(ce().mark((function e(){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=ue(ce().mark((function e(t,n){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=ue(ce().mark((function e(t){var n;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=ue(ce().mark((function e(t){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Ua.type="NONE";var Va=Ua;function Ba(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var qa=function(){function e(t,n,r){re(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Ba(this.userKey,a.apiKey,o),this.fullPersistenceKey=Ba("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return ae(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=ue(ce().mark((function e(){var t;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?ja._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=ue(ce().mark((function e(t){var n;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=ue(ce().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(Yi(Va),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=ue(ce().mark((function e(t){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||Yi(Va),u=Ba(i,n.config.apiKey,n.name),s=null,c=ne(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=ja._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=ue(ce().mark((function e(t){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function za(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Ga(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Ka(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Ya(t))return"Blackberry";if($a(t))return"Webos";if(Wa(t))return"Safari";if((t.includes("chrome/")||Ha(t))&&!t.includes("edge/"))return"Chrome";if(Qa(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Ka(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se();return/firefox\//i.test(e)}function Wa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Ha(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se();return/crios\//i.test(e)}function Ga(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se();return/iemobile/i.test(e)}function Qa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se();return/android/i.test(e)}function Ya(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se();return/blackberry/i.test(e)}function $a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se();return/webos/i.test(e)}function Ja(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se();return/iphone|ipad|ipod/i.test(e)}function Xa(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se();return Ja(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function Za(){return Pe()&&10===document.documentMode}function eo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se();return Ja(e)||Qa(e)||$a(e)||Ya(e)||/windows phone/i.test(e)||Ga(e)}function to(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=za(Se());break;case"Worker":t="".concat(za(Se()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Rt,"/").concat(r)}var no=function(){function e(t,n,r){re(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new io(this),this.idTokenSubscription=new io(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Fi,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return ae(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=Yi(t)),this._initializationPromise=this.queue(ue(ce().mark((function r(){var i,a;return ce().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,qa.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=ue(ce().mark((function e(){var t;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=ue(ce().mark((function e(t){var n,r,i,a,o;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,!t||!this.config.authDomain){e.next=12;break}return e.next=6,this.getOrInitRedirectPersistenceManager();case 6:return i=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,a=null===r||void 0===r?void 0:r._redirectEventId,e.next=10,this.tryRedirectSignIn(t);case 10:o=e.sent,i&&i!==a||!(null===o||void 0===o?void 0:o.user)||(r=o.user);case 12:if(r){e.next=14;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 14:if(r._redirectEventId){e.next=16;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 16:return Wi(this._popupRedirectResolver,this,"argument-error"),e.next=19,this.getOrInitRedirectPersistenceManager();case 19:if(!this.redirectUser||this.redirectUser._redirectEventId!==r._redirectEventId){e.next=21;break}return e.abrupt("return",this.directlySetCurrentUser(r));case 21:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=ue(ce().mark((function e(t){var n;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=ue(ce().mark((function e(t){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Na(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=ue(ce().mark((function e(){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=ue(ce().mark((function e(t){var n;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?$e(t):null)&&Wi(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=ue(ce().mark((function e(t){var n=this;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return t&&Wi(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e.abrupt("return",this.queue(ue(ce().mark((function e(){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.directlySetCurrentUser(t);case 2:n.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=ue(ce().mark((function e(){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=3;break}return e.next=3,this._setRedirectUser(null);case 3:return e.abrupt("return",this._updateCurrentUser(null));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(ue(ce().mark((function n(){return ce().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(Yi(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new Me("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=ue(ce().mark((function e(t,n){var r;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=ue(ce().mark((function e(t){var n;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Wi(n=t&&Yi(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,qa.create(this,[Yi(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=ue(ce().mark((function e(t){var n,r;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(ue(ce().mark((function e(){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=ue(ce().mark((function e(t){var n=this;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(ue(ce().mark((function e(){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Wi(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=ue(ce().mark((function e(t){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Wi(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=to(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=ue(ce().mark((function e(){var t,n,r;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Z({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function ro(e){return $e(e)}var io=function(){function e(t){var n=this;re(this,e),this.auth=t,this.observer=null,this.addObserver=We((function(e){return n.observer=e}))}return ae(e,[{key:"next",get:function(){return Wi(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function ao(e,t,n){var r=ro(e);Wi(r._canInitEmulator,r,"emulator-config-failed"),Wi(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=oo(t),o=function(e){var t=oo(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:uo(r.substr(a.length+1))}}var o=s(r.split(":"),2);return{host:o[0],port:uo(o[1])}}(t),u=o.host,c=o.port,l=null===c?"":":".concat(c);r.config.emulator={url:"".concat(a,"//").concat(u).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function oo(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function uo(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var so=function(){function e(t,n){re(this,e),this.providerId=t,this.signInMethod=n}return ae(e,[{key:"toJSON",value:function(){return Hi("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return Hi("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return Hi("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return Hi("not implemented")}}]),e}();function co(e,t){return lo.apply(this,arguments)}function lo(){return lo=ue(ce().mark((function e(t,n){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",aa(t,"POST","/v1/accounts:resetPassword",ia(t,n)));case 1:case"end":return e.stop()}}),e)}))),lo.apply(this,arguments)}function fo(e,t){return ho.apply(this,arguments)}function ho(){return ho=ue(ce().mark((function e(t,n){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",aa(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),ho.apply(this,arguments)}function po(e,t){return vo.apply(this,arguments)}function vo(){return vo=ue(ce().mark((function e(t,n){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",aa(t,"POST","/v1/accounts:update",ia(t,n)));case 1:case"end":return e.stop()}}),e)}))),vo.apply(this,arguments)}function mo(e,t){return yo.apply(this,arguments)}function yo(){return yo=ue(ce().mark((function e(t,n){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ca(t,"POST","/v1/accounts:signInWithPassword",ia(t,n)));case 1:case"end":return e.stop()}}),e)}))),yo.apply(this,arguments)}function go(e,t){return ko.apply(this,arguments)}function ko(){return ko=ue(ce().mark((function e(t,n){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",aa(t,"POST","/v1/accounts:sendOobCode",ia(t,n)));case 1:case"end":return e.stop()}}),e)}))),ko.apply(this,arguments)}function bo(e,t){return wo.apply(this,arguments)}function wo(){return wo=ue(ce().mark((function e(t,n){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",go(t,n));case 1:case"end":return e.stop()}}),e)}))),wo.apply(this,arguments)}function xo(e,t){return _o.apply(this,arguments)}function _o(){return _o=ue(ce().mark((function e(t,n){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",go(t,n));case 1:case"end":return e.stop()}}),e)}))),_o.apply(this,arguments)}function Io(e,t){return Eo.apply(this,arguments)}function Eo(){return Eo=ue(ce().mark((function e(t,n){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",go(t,n));case 1:case"end":return e.stop()}}),e)}))),Eo.apply(this,arguments)}function To(e,t){return So.apply(this,arguments)}function So(){return So=ue(ce().mark((function e(t,n){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",go(t,n));case 1:case"end":return e.stop()}}),e)}))),So.apply(this,arguments)}function Co(e,t){return No.apply(this,arguments)}function No(){return No=ue(ce().mark((function e(t,n){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ca(t,"POST","/v1/accounts:signInWithEmailLink",ia(t,n)));case 1:case"end":return e.stop()}}),e)}))),No.apply(this,arguments)}function Ao(e,t){return Do.apply(this,arguments)}function Do(){return Do=ue(ce().mark((function e(t,n){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ca(t,"POST","/v1/accounts:signInWithEmailLink",ia(t,n)));case 1:case"end":return e.stop()}}),e)}))),Do.apply(this,arguments)}var Po=function(e){he(n,e);var t=ye(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return re(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return ae(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=ue(ce().mark((function e(t){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",mo(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Co(t,{email:this._email,oobCode:this._password}));case 5:Vi(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=ue(ce().mark((function e(t,n){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",fo(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Ao(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Vi(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(so);function Oo(e,t){return Ro.apply(this,arguments)}function Ro(){return Ro=ue(ce().mark((function e(t,n){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ca(t,"POST","/v1/accounts:signInWithIdp",ia(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ro.apply(this,arguments)}var Lo=function(e){he(n,e);var t=ye(n);function n(){var e;return re(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return ae(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Oo(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Oo(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Oo(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=qe(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Vi("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=wi(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(so);function Mo(e,t){return Fo.apply(this,arguments)}function Fo(){return Fo=ue(ce().mark((function e(t,n){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",aa(t,"POST","/v1/accounts:sendVerificationCode",ia(t,n)));case 1:case"end":return e.stop()}}),e)}))),Fo.apply(this,arguments)}function jo(){return jo=ue(ce().mark((function e(t,n){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ca(t,"POST","/v1/accounts:signInWithPhoneNumber",ia(t,n)));case 1:case"end":return e.stop()}}),e)}))),jo.apply(this,arguments)}function Uo(){return Uo=ue(ce().mark((function e(t,n){var r;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ca(t,"POST","/v1/accounts:signInWithPhoneNumber",ia(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw da(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),Uo.apply(this,arguments)}var Vo=Z({},"USER_NOT_FOUND","user-not-found");function Bo(){return Bo=ue(ce().mark((function e(t,n){var r;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",ca(t,"POST","/v1/accounts:signInWithPhoneNumber",ia(t,r),Vo));case 2:case"end":return e.stop()}}),e)}))),Bo.apply(this,arguments)}var qo=function(e){he(n,e);var t=ye(n);function n(e){var r;return re(this,n),(r=t.call(this,"phone","phone")).params=e,r}return ae(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return jo.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Uo.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Bo.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(so);var zo=function(){function e(t){var n,r,i,a,o,u;re(this,e);var s=ze(Ke(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);Wi(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return ae(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=ze(Ke(e)).link,n=t?ze(Ke(t)).deep_link_id:null,r=ze(Ke(e)).deep_link_id;return(r?ze(Ke(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(F_){return null}}}]),e}();var Ko=function(){function e(){re(this,e),this.providerId=e.PROVIDER_ID}return ae(e,null,[{key:"credential",value:function(e,t){return Po._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=zo.parseLink(t);return Wi(n,"argument-error"),Po._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Ko.PROVIDER_ID="password",Ko.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Ko.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Wo=function(){function e(t){re(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return ae(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Ho=function(e){he(n,e);var t=ye(n);function n(){var e;return re(this,n),(e=t.apply(this,arguments)).scopes=[],e}return ae(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return X(this.scopes)}}]),n}(Wo),Go=function(e){he(n,e);var t=ye(n);function n(){return re(this,n),t.apply(this,arguments)}return ae(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return Wi(e.idToken||e.accessToken,"argument-error"),Lo._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return Wi("providerId"in t&&"signInMethod"in t,"argument-error"),Lo._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(oC){return null}}}]),n}(Ho),Qo=function(e){he(n,e);var t=ye(n);function n(){return re(this,n),t.call(this,"facebook.com")}return ae(n,null,[{key:"credential",value:function(e){return Lo._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(F_){return null}}}]),n}(Ho);Qo.FACEBOOK_SIGN_IN_METHOD="facebook.com",Qo.PROVIDER_ID="facebook.com";var Yo=function(e){he(n,e);var t=ye(n);function n(){var e;return re(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return ae(n,null,[{key:"credential",value:function(e,t){return Lo._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(F_){return null}}}]),n}(Ho);Yo.GOOGLE_SIGN_IN_METHOD="google.com",Yo.PROVIDER_ID="google.com";var $o=function(e){he(n,e);var t=ye(n);function n(){return re(this,n),t.call(this,"github.com")}return ae(n,null,[{key:"credential",value:function(e){return Lo._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(F_){return null}}}]),n}(Ho);$o.GITHUB_SIGN_IN_METHOD="github.com",$o.PROVIDER_ID="github.com";var Jo=function(e){he(n,e);var t=ye(n);function n(e,r){var i;return re(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return ae(n,[{key:"_getIdTokenResponse",value:function(e){return Oo(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Oo(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Oo(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(so),Xo=function(e){he(n,e);var t=ye(n);function n(e){return re(this,n),Wi(e.startsWith("saml."),"argument-error"),t.call(this,e)}return ae(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=Jo.fromJSON(e);return Wi(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return Jo._create(r,n)}catch(oC){return null}}}]),n}(Wo),Zo=function(e){he(n,e);var t=ye(n);function n(){return re(this,n),t.call(this,"twitter.com")}return ae(n,null,[{key:"credential",value:function(e,t){return Lo._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(F_){return null}}}]),n}(Ho);function eu(e,t){return tu.apply(this,arguments)}function tu(){return tu=ue(ce().mark((function e(t,n){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ca(t,"POST","/v1/accounts:signUp",ia(t,n)));case 1:case"end":return e.stop()}}),e)}))),tu.apply(this,arguments)}Zo.TWITTER_SIGN_IN_METHOD="twitter.com",Zo.PROVIDER_ID="twitter.com";var nu=function(){function e(t){re(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return ae(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=ue(ce().mark((function t(n,r,i){var a,o,u,s,c=arguments;return ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,ja._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=ru(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=ue(ce().mark((function t(n,r,i){var a;return ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=ru(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function ru(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function iu(){return iu=ue(ce().mark((function e(t){var n,r,i,a;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ro(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new nu({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,eu(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,nu._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),iu.apply(this,arguments)}var au=function(e){he(n,e);var t=ye(n);function n(e,r,i,a){var o,u;return re(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(le(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return ae(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(Le);function ou(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw au._fromErrorAndOperation(e,n,t,r);throw n}))}function uu(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function su(e,t){return cu.apply(this,arguments)}function cu(){return cu=ue(ce().mark((function e(t,n){var r,i,a,o;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$e(t),e.next=3,hu(!0,r,n);case 3:return e.t0=ma,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=uu(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),cu.apply(this,arguments)}function lu(e,t){return fu.apply(this,arguments)}function fu(){return fu=ue(ce().mark((function e(t,n){var r,i,a=arguments;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Ia,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",nu._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),fu.apply(this,arguments)}function hu(e,t,n){return du.apply(this,arguments)}function du(){return(du=ue(ce().mark((function e(t,n,r){var i,a;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Na(n);case 2:i=uu(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",Wi(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pu(e,t){return vu.apply(this,arguments)}function vu(){return vu=ue(ce().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,Ia(t,ou(i,a,n,t),r);case 6:return Wi((o=e.sent).idToken,i,"internal-error"),Wi(u=_a(o.idToken),i,"internal-error"),s=u.sub,Wi(t.uid===s,i,"user-mismatch"),e.abrupt("return",nu._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&Vi(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),vu.apply(this,arguments)}function mu(e,t){return yu.apply(this,arguments)}function yu(){return yu=ue(ce().mark((function e(t,n){var r,i,a,o,u=arguments;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,ou(t,i,n);case 4:return a=e.sent,e.next=7,nu._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),yu.apply(this,arguments)}function gu(e,t){return ku.apply(this,arguments)}function ku(){return ku=ue(ce().mark((function e(t,n){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",mu(ro(t),n));case 1:case"end":return e.stop()}}),e)}))),ku.apply(this,arguments)}function bu(e,t){return wu.apply(this,arguments)}function wu(){return(wu=ue(ce().mark((function e(t,n){var r;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$e(t),e.next=3,hu(!1,r,n.providerId);case 3:return e.abrupt("return",lu(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xu(e,t){return _u.apply(this,arguments)}function _u(){return(_u=ue(ce().mark((function e(t,n){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pu($e(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Iu(e,t){return Eu.apply(this,arguments)}function Eu(){return Eu=ue(ce().mark((function e(t,n){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ca(t,"POST","/v1/accounts:signInWithCustomToken",ia(t,n)));case 1:case"end":return e.stop()}}),e)}))),Eu.apply(this,arguments)}function Tu(){return Tu=ue(ce().mark((function e(t,n){var r,i,a;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ro(t),e.next=3,Iu(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,nu._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),Tu.apply(this,arguments)}var Su=function(){function e(t,n){re(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return ae(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?Cu._fromServerResponse(e,t):Vi(e,"internal-error")}}]),e}(),Cu=function(e){he(n,e);var t=ye(n);function n(e){var r;return re(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return ae(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(Su);function Nu(e,t,n){var r;Wi((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Wi("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Wi(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Wi(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Au(){return Au=ue(ce().mark((function e(t,n,r){var i,a;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=$e(t),a={requestType:"PASSWORD_RESET",email:n},r&&Nu(i,a,r),e.next=5,xo(i,a);case 5:case"end":return e.stop()}}),e)}))),Au.apply(this,arguments)}function Du(){return Du=ue(ce().mark((function e(t,n,r){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,co($e(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)}))),Du.apply(this,arguments)}function Pu(){return Pu=ue(ce().mark((function e(t,n){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,po($e(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),Pu.apply(this,arguments)}function Ou(e,t){return Ru.apply(this,arguments)}function Ru(){return Ru=ue(ce().mark((function e(t,n){var r,i,a,o;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$e(t),e.next=3,co(r,{oobCode:n});case 3:i=e.sent,Wi(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return Wi(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:Wi(i.mfaInfo,r,"internal-error");case 13:Wi(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=Su._fromServerResponse(ro(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)}))),Ru.apply(this,arguments)}function Lu(){return Lu=ue(ce().mark((function e(t,n){var r,i;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ou($e(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),Lu.apply(this,arguments)}function Mu(e,t,n){return Fu.apply(this,arguments)}function Fu(){return Fu=ue(ce().mark((function e(t,n,r){var i,a,o;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ro(t),e.next=3,eu(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,nu._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),Fu.apply(this,arguments)}function ju(){return ju=ue(ce().mark((function e(t,n,r){var i,a;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=$e(t),a={requestType:"EMAIL_SIGNIN",email:n},Wi(r.handleCodeInApp,i,"argument-error"),r&&Nu(i,a,r),e.next=6,Io(i,a);case 6:case"end":return e.stop()}}),e)}))),ju.apply(this,arguments)}function Uu(){return Uu=ue(ce().mark((function e(t,n,r){var i,a;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=$e(t),Wi((a=Ko.credentialWithLink(n,r||$i()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",gu(i,a));case 4:case"end":return e.stop()}}),e)}))),Uu.apply(this,arguments)}function Vu(e,t){return Bu.apply(this,arguments)}function Bu(){return Bu=ue(ce().mark((function e(t,n){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",aa(t,"POST","/v1/accounts:createAuthUri",ia(t,n)));case 1:case"end":return e.stop()}}),e)}))),Bu.apply(this,arguments)}function qu(){return qu=ue(ce().mark((function e(t,n){var r,i,a,o;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ji()?$i():"http://localhost",i={identifier:n,continueUri:r},e.next=4,Vu($e(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)}))),qu.apply(this,arguments)}function zu(){return(zu=ue(ce().mark((function e(t,n){var r,i,a,o;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$e(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&Nu(r.auth,a,n),e.next=8,bo(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ku(){return(Ku=ue(ce().mark((function e(t,n,r){var i,a,o,u;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=$e(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&Nu(i.auth,o,r),e.next=8,To(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wu(e,t){return Hu.apply(this,arguments)}function Hu(){return Hu=ue(ce().mark((function e(t,n){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",aa(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Hu.apply(this,arguments)}function Gu(){return(Gu=ue(ce().mark((function e(t,n){var r,i,a,o,u,s,c;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=$e(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,Ia(a,Wu(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qu(e,t,n){return Yu.apply(this,arguments)}function Yu(){return Yu=ue(ce().mark((function e(t,n,r){var i,a,o,u;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,Ia(t,fo(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)}))),Yu.apply(this,arguments)}var $u=ae((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};re(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),Ju=function(e){he(n,e);var t=ye(n);function n(e,r,i,a){var o;return re(this,n),(o=t.call(this,e,r,i)).username=a,o}return ae(n)}($u),Xu=function(e){he(n,e);var t=ye(n);function n(e,r){return re(this,n),t.call(this,e,"facebook.com",r)}return ae(n)}($u),Zu=function(e){he(n,e);var t=ye(n);function n(e,r){return re(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return ae(n)}(Ju),es=function(e){he(n,e);var t=ye(n);function n(e,r){return re(this,n),t.call(this,e,"google.com",r)}return ae(n)}($u),ts=function(e){he(n,e);var t=ye(n);function n(e,r,i){return re(this,n),t.call(this,e,"twitter.com",r,i)}return ae(n)}(Ju);function ns(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=_a(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new $u(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new Xu(a,i);case"github.com":return new Zu(a,i);case"google.com":return new es(a,i);case"twitter.com":return new ts(a,i,e.screenName||null);case"custom":case"anonymous":return new $u(a,null);default:return new $u(a,r,i)}}(n)}var rs=function(){function e(t,n){re(this,e),this.type=t,this.credential=n}return ae(e,[{key:"toJSON",value:function(){return{multiFactorSession:Z({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),is=function(){function e(t,n,r){re(this,e),this.session=t,this.hints=n,this.signInResolver=r}return ae(e,[{key:"resolveSignIn",value:function(){var e=ue(ce().mark((function e(t){var n;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=ro(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return Su._fromServerResponse(r,e)}));Wi(i.mfaPendingCredential,r,"internal-error");var o=rs._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=ue(ce().mark((function e(t){var a,u,s;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,nu._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return Wi(n.user,r,"internal-error"),e.abrupt("return",nu._forOperation(n.user,n.operationType,u));case 17:Vi(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function as(e,t){return aa(e,"POST","/v2/accounts/mfaEnrollment:start",ia(e,t))}function os(e,t){return aa(e,"POST","/v2/accounts/mfaEnrollment:withdraw",ia(e,t))}var us=function(){function e(t){var n=this;re(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return Su._fromServerResponse(t.auth,e)})))}))}return ae(e,[{key:"getSession",value:function(){var e=ue(ce().mark((function e(){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=rs,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=ue(ce().mark((function e(t,n){var r,i,a;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,Ia(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=ue(ce().mark((function e(t){var n,r,i;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.next=6,Ia(this.user,os(this.user.auth,{idToken:r,mfaEnrollmentId:n}));case 6:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=10,this.user._updateTokensIfNecessary(i);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),e.t0.code==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),ss=new WeakMap;var cs="__sak",ls=function(){function e(t,n){re(this,e),this.storageRetriever=t,this.type=n}return ae(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(cs,"1"),this.storage.removeItem(cs),Promise.resolve(!0)):Promise.resolve(!1)}catch(F_){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var fs=function(e){he(n,e);var t=ye(n);function n(){var e;return re(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=Se();return Wa(e)||Ja(e)}()&&function(){try{return!(!window||window===window.top)}catch(oC){return!1}}(),e.fallbackToPolling=eo(),e._shouldAllowMigration=!0,e}return ae(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);Za()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=ue(ce().mark((function e(t,r){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bi(de(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=ue(ce().mark((function e(t){var r;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bi(de(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=ue(ce().mark((function e(t){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bi(de(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(ls);fs.type="LOCAL";var hs=fs,ds=function(e){he(n,e);var t=ye(n);function n(){return re(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return ae(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(ls);ds.type="SESSION";var ps=ds;function vs(e){return Promise.all(e.map(function(){var e=ue(ce().mark((function e(t){var n;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var ms=function(){function e(t){re(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return ae(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=ue(ce().mark((function e(t){var n,r,i,a,o,u,s,c;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=ue(ce().mark((function e(t){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,vs(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function ys(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}ms.receivers=[];var gs=function(){function e(t){re(this,e),this.target=t,this.handlers=new Set}return ae(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=ue(ce().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=ys("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function ks(){return window}function bs(){return"undefined"!==typeof ks().WorkerGlobalScope&&"function"===typeof ks().importScripts}function ws(){return xs.apply(this,arguments)}function xs(){return(xs=ue(ce().mark((function e(){var t;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function _s(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Is="firebaseLocalStorageDb",Es="firebaseLocalStorage",Ts="fbase_key",Ss=function(){function e(t){re(this,e),this.request=t}return ae(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Cs(e,t){return e.transaction([Es],t?"readwrite":"readonly").objectStore(Es)}function Ns(){var e=indexedDB.deleteDatabase(Is);return new Ss(e).toPromise()}function As(){var e=indexedDB.open(Is,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(Es,{keyPath:Ts})}catch(oC){n(oC)}})),e.addEventListener("success",ue(ce().mark((function n(){var r;return ce().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(Es)){n.next=12;break}return r.close(),n.next=5,Ns();case 5:return n.t0=t,n.next=8,As();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function Ds(e,t,n){return Ps.apply(this,arguments)}function Ps(){return Ps=ue(ce().mark((function e(t,n,r){var i,a;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Cs(t,!0).put((Z(i={},Ts,n),Z(i,"value",r),i)),e.abrupt("return",new Ss(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),Ps.apply(this,arguments)}function Os(e,t){return Rs.apply(this,arguments)}function Rs(){return Rs=ue(ce().mark((function e(t,n){var r,i;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Cs(t,!1).get(n),e.next=3,new Ss(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Rs.apply(this,arguments)}function Ls(e,t){var n=Cs(e,!0).delete(t);return new Ss(n).toPromise()}var Ms=function(){function e(){re(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return ae(e,[{key:"_openDb",value:function(){var e=ue(ce().mark((function e(){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,As();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=ue(ce().mark((function e(t){var n,r;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=ue(ce().mark((function e(){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bs()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=ue(ce().mark((function e(){var t=this;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=ms._getInstance(bs()?self:null),this.receiver._subscribe("keyChanged",function(){var e=ue(ce().mark((function e(n,r){var i;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=ue(ce().mark((function e(t,n){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=ue(ce().mark((function e(){var t,n,r;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ws();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new gs(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=ue(ce().mark((function e(t){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&_s()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=ue(ce().mark((function e(){var t;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,As();case 5:return t=e.sent,e.next=8,Ds(t,cs,"1");case 8:return e.next=10,Ls(t,cs);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=ue(ce().mark((function e(t){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=ue(ce().mark((function e(t,n){var r=this;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(ue(ce().mark((function e(){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return Ds(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=ue(ce().mark((function e(t){var n;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return Os(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=ue(ce().mark((function e(t){var n=this;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(ue(ce().mark((function e(){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Ls(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=ue(ce().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Cs(e,!1).getAll();return new Ss(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=ne(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(ue(ce().mark((function t(){return ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Ms.type="LOCAL";var Fs=Ms;function js(e,t){return aa(e,"POST","/v2/accounts/mfaSignIn:start",ia(e,t))}function Us(e){return Vs.apply(this,arguments)}function Vs(){return Vs=ue(ce().mark((function e(t){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,aa(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),Vs.apply(this,arguments)}function Bs(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Bi("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function qs(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var zs=1e12,Ks=function(){function e(t){re(this,e),this.auth=t,this.counter=zs,this._widgets=new Map}return ae(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new Ws(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||zs;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||zs;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=ue(ce().mark((function e(t){var n,r;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||zs,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Ws=function(){function e(t,n,r){var i=this;re(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;Wi(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return ae(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(oC){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(oC){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var Hs=qs("rcb"),Gs=new Zi(3e4,6e4),Qs="https://www.google.com/recaptcha/api.js?",Ys=function(){function e(){re(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!ks().grecaptcha}return ae(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Wi($s(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(ks().grecaptcha):new Promise((function(r,i){var a=ks().setTimeout((function(){i(Bi(e,"network-request-failed"))}),Gs.get());ks()[Hs]=function(){ks().clearTimeout(a),delete ks()[Hs];var o=ks().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(Bi(e,"internal-error"))},Bs("".concat(Qs,"?").concat(qe({onload:Hs,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(Bi(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){return!!ks().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function $s(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var Js=function(){function e(){re(this,e)}return ae(e,[{key:"load",value:function(){var e=ue(ce().mark((function e(t){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Ks(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),Xs="recaptcha",Zs={theme:"light",type:"image"},ec=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},Zs),r=arguments.length>2?arguments[2]:void 0;re(this,e),this.parameters=n,this.type=Xs,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ro(r),this.isInvisible="invisible"===this.parameters.size,Wi("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;Wi(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Js:new Ys,this.validateStartingState()}return ae(e,[{key:"verify",value:function(){var e=ue(ce().mark((function e(){var t,n,r,i=this;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(oC){return Promise.reject(oC)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){Wi(!this.parameters.sitekey,this.auth,"argument-error"),Wi(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Wi("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=ks()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){Wi(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=ue(ce().mark((function e(){var t,n;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=ue(ce().mark((function e(){var t;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Wi(Ji()&&!bs(),this.auth,"internal-error"),e.next=3,tc();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,Us(this.auth);case 8:Wi(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return Wi(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function tc(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var nc=function(){function e(t,n){re(this,e),this.verificationId=t,this.onConfirmation=n}return ae(e,[{key:"confirm",value:function(e){var t=qo._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function rc(){return rc=ue(ce().mark((function e(t,n,r){var i,a;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ro(t),e.next=3,uc(i,n,$e(r));case 3:return a=e.sent,e.abrupt("return",new nc(a,(function(e){return gu(i,e)})));case 5:case"end":return e.stop()}}),e)}))),rc.apply(this,arguments)}function ic(e,t,n){return ac.apply(this,arguments)}function ac(){return(ac=ue(ce().mark((function e(t,n,r){var i,a;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=$e(t),e.next=3,hu(!1,i,"phone");case 3:return e.next=5,uc(i.auth,n,$e(r));case 5:return a=e.sent,e.abrupt("return",new nc(a,(function(e){return bu(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oc(){return(oc=ue(ce().mark((function e(t,n,r){var i,a;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=$e(t),e.next=3,uc(i.auth,n,$e(r));case 3:return a=e.sent,e.abrupt("return",new nc(a,(function(e){return xu(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function uc(e,t,n){return sc.apply(this,arguments)}function sc(){return sc=ue(ce().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,Wi("string"===typeof a,t,"argument-error"),Wi(r.type===Xs,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return Wi("enroll"===u.type,t,"internal-error"),e.next=13,as(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return Wi("signin"===u.type,t,"internal-error"),Wi(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,js(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Mo(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),sc.apply(this,arguments)}function cc(){return(cc=ue(ce().mark((function e(t,n){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lu($e(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var lc=function(){function e(t){re(this,e),this.providerId=e.PROVIDER_ID,this.auth=ro(t)}return ae(e,[{key:"verifyPhoneNumber",value:function(e,t){return uc(this.auth,e,$e(t))}}],[{key:"credential",value:function(e,t){return qo._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?qo._fromTokenResponse(n,r):null}}]),e}();function fc(e,t){return t?Yi(t):(Wi(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}lc.PROVIDER_ID="phone",lc.PHONE_SIGN_IN_METHOD="phone";var hc=function(e){he(n,e);var t=ye(n);function n(e){var r;return re(this,n),(r=t.call(this,"custom","custom")).params=e,r}return ae(n,[{key:"_getIdTokenResponse",value:function(e){return Oo(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Oo(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Oo(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(so);function dc(e){return mu(e.auth,new hc(e),e.bypassAuthState)}function pc(e){var t=e.auth,n=e.user;return Wi(n,t,"internal-error"),pu(n,new hc(e),e.bypassAuthState)}function vc(e){return mc.apply(this,arguments)}function mc(){return mc=ue(ce().mark((function e(t){var n,r;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,Wi(r=t.user,n,"internal-error"),e.abrupt("return",lu(r,new hc(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),mc.apply(this,arguments)}var yc=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];re(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return ae(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=ue(ce().mark((function t(n,r){return ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=ue(ce().mark((function e(t){var n,r,i,a,o,u,s;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return dc;case"linkViaPopup":case"linkViaRedirect":return vc;case"reauthViaPopup":case"reauthViaRedirect":return pc;default:Vi(this.auth,"internal-error")}}},{key:"resolve",value:function(e){Gi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){Gi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),gc=new Zi(2e3,1e4);function kc(e,t,n){return bc.apply(this,arguments)}function bc(){return bc=ue(ce().mark((function e(t,n,r){var i,a,o;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ro(t),zi(t,n,Wo),a=fc(i,r),o=new Ic(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),bc.apply(this,arguments)}function wc(){return(wc=ue(ce().mark((function e(t,n,r){var i,a,o;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return zi((i=$e(t)).auth,n,Wo),a=fc(i.auth,r),o=new Ic(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xc(e,t,n){return _c.apply(this,arguments)}function _c(){return(_c=ue(ce().mark((function e(t,n,r){var i,a,o;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return zi((i=$e(t)).auth,n,Wo),a=fc(i.auth,r),o=new Ic(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ic=function(e){he(n,e);var t=ye(n);function n(e,r,i,a,o){var u;return re(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=le(u),u}return ae(n,[{key:"executeNotNull",value:function(){var e=ue(ce().mark((function e(){var t;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return Wi(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=ue(ce().mark((function e(){var t,n=this;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Gi(1===this.filter.length,"Popup operations only handle one event"),t=ys(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Bi(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Bi(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Bi(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,gc.get())}()}}]),n}(yc);Ic.currentPopupAction=null;var Ec=new Map,Tc=function(e){he(n,e);var t=ye(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return re(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return ae(n,[{key:"execute",value:function(){var e=ue(ce().mark((function e(){var t,r;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Ec.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Sc(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,bi(de(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:Ec.set(this.auth._key(),t);case 21:return this.bypassAuthState||Ec.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=ue(ce().mark((function e(t){var r;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",bi(de(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",bi(de(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=ue(ce().mark((function e(){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(yc);function Sc(e,t){return Cc.apply(this,arguments)}function Cc(){return Cc=ue(ce().mark((function e(t,n){var r,i,a;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Pc(n),i=Dc(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),Cc.apply(this,arguments)}function Nc(e,t){return Ac.apply(this,arguments)}function Ac(){return Ac=ue(ce().mark((function e(t,n){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Dc(t)._set(Pc(n),"true"));case 1:case"end":return e.stop()}}),e)}))),Ac.apply(this,arguments)}function Dc(e){return Yi(e._redirectPersistence)}function Pc(e){return Ba("pendingRedirect",e.config.apiKey,e.name)}function Oc(e,t,n){return function(e,t,n){return Rc.apply(this,arguments)}(e,t,n)}function Rc(){return Rc=ue(ce().mark((function e(t,n,r){var i,a;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ro(t),zi(t,n,Wo),a=fc(i,r),e.next=5,Nc(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)}))),Rc.apply(this,arguments)}function Lc(e,t,n){return function(e,t,n){return Mc.apply(this,arguments)}(e,t,n)}function Mc(){return(Mc=ue(ce().mark((function e(t,n,r){var i,a,o;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return zi((i=$e(t)).auth,n,Wo),a=fc(i.auth,r),e.next=5,Nc(a,i.auth);case 5:return e.next=7,zc(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fc(e,t,n){return function(e,t,n){return jc.apply(this,arguments)}(e,t,n)}function jc(){return(jc=ue(ce().mark((function e(t,n,r){var i,a,o;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return zi((i=$e(t)).auth,n,Wo),a=fc(i.auth,r),e.next=5,hu(!1,i,n.providerId);case 5:return e.next=7,Nc(a,i.auth);case 7:return e.next=9,zc(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Uc(e,t){return Vc.apply(this,arguments)}function Vc(){return Vc=ue(ce().mark((function e(t,n){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ro(t)._initializationPromise;case 2:return e.abrupt("return",Bc(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),Vc.apply(this,arguments)}function Bc(e,t){return qc.apply(this,arguments)}function qc(){return qc=ue(ce().mark((function e(t,n){var r,i,a,o,u,s=arguments;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=ro(t),a=fc(i,n),o=new Tc(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),qc.apply(this,arguments)}function zc(e){return Kc.apply(this,arguments)}function Kc(){return(Kc=ue(ce().mark((function e(t){var n;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ys("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Wc=function(){function e(t){re(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return ae(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Gc(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Gc(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Bi(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Hc(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Hc(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function Hc(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Gc(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function Qc(e){return Yc.apply(this,arguments)}function Yc(){return Yc=ue(ce().mark((function e(t){var n,r=arguments;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",aa(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),Yc.apply(this,arguments)}var $c=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Jc=/^https?/;function Xc(){return Xc=ue(ce().mark((function e(t){var n,r,i,a,o;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Qc(t);case 4:n=e.sent,r=n.authorizedDomains,i=ne(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!Zc(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Vi(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),Xc.apply(this,arguments)}function Zc(e){var t=$i(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!Jc.test(r))return!1;if($c.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var el=new Zi(3e4,6e4);function tl(){var e=ks().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=X(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var nl=null;function rl(e){return nl=nl||function(e){return new Promise((function(t,n){var r,i,a;function o(){tl(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){tl(),n(Bi(e,"network-request-failed"))},timeout:el.get()})}if(null===(i=null===(r=ks().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=ks().gapi)||void 0===a?void 0:a.load)){var u=qs("iframefcb");return ks()[u]=function(){gapi.load?o():n(Bi(e,"network-request-failed"))},Bs("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw nl=null,e}))}(e),nl}var il=new Zi(5e3,15e3),al={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ol=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ul(e){var t=e.config;Wi(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?ea(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Rt},i=ol.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(qe(r).slice(1))}function sl(e){return cl.apply(this,arguments)}function cl(){return cl=ue(ce().mark((function e(t){var n,r;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rl(t);case 2:return n=e.sent,Wi(r=ks().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:ul(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:al,dontclear:!0},(function(e){return new Promise(function(){var n=ue(ce().mark((function n(r,i){var a,o,u;return ce().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){ks().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Bi(t,"network-request-failed"),o=ks().setTimeout((function(){i(a)}),il.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),cl.apply(this,arguments)}var ll={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},fl="_blank",hl="http://localhost",dl=function(){function e(t){re(this,e),this.window=t,this.associatedEvent=null}return ae(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(oC){}}}]),e}();function pl(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",c=Object.assign(Object.assign({},ll),{width:r.toString(),height:i.toString(),top:a,left:o}),l=Se().toLowerCase();n&&(u=Ha(l)?fl:n),Ka(l)&&(t=t||hl,c.scrollbars="yes");var f=Object.entries(c).reduce((function(e,t){var n=s(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(Xa(l)&&"_self"!==u)return vl(t||"",u),new dl(null);var h=window.open(t||"",u,f);Wi(h,e,"popup-blocked");try{h.focus()}catch(oC){}return new dl(h)}function vl(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var ml="__/auth/handler",yl="emulator/auth/handler";function gl(e,t,n,r,i,a){Wi(e.config.authDomain,e,"auth-domain-config-required"),Wi(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Rt,eventId:i};if(t instanceof Wo){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,c=Object.entries(a||{});u<c.length;u++){var l=s(c[u],2),f=l[0],h=l[1];o[f]=h}}if(t instanceof Ho){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,v=0,m=Object.keys(p);v<m.length;v++){var y=m[v];void 0===p[y]&&delete p[y]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(ml);return ea(t,yl)}(e),"?").concat(qe(p).slice(1))}var kl="webStorageSupport",bl=function(){function e(){re(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ps,this._completeRedirectFn=Bc}return ae(e,[{key:"_openPopup",value:function(){var e=ue(ce().mark((function e(t,n,r,i){var a,o;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Gi(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=gl(t,n,r,$i(),i),e.abrupt("return",pl(t,o,ys()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=ue(ce().mark((function e(t,n,r,i){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=gl(t,n,r,$i(),i),ks().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(Gi(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=ue(ce().mark((function e(t){var n,r;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sl(t);case 2:return n=e.sent,r=new Wc(t),n.register("authEvent",(function(e){return Wi(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(kl,{type:kl},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),Vi(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Xc.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return eo()||Wa()||Ja()}}]),e}(),wl=bl,xl=function(){function e(t){re(this,e),this.factorId=t}return ae(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Hi("unexpected MultiFactorSessionType")}}}]),e}(),_l=function(e){he(n,e);var t=ye(n);function n(e){var r;return re(this,n),(r=t.call(this,"phone")).credential=e,r}return ae(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return aa(e,"POST","/v2/accounts/mfaEnrollment:finalize",ia(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return aa(e,"POST","/v2/accounts/mfaSignIn:finalize",ia(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(xl),Il=function(){function e(){re(this,e)}return ae(e,null,[{key:"assertion",value:function(e){return _l._fromCredential(e)}}]),e}();Il.FACTOR_ID="phone";var El,Tl="@firebase/auth",Sl="0.19.10",Cl=function(){function e(t){re(this,e),this.auth=t,this.internalListeners=new Map}return ae(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=ue(ce().mark((function e(t){var n;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Wi(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function Nl(){return window}El="Browser",St(new rt("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){Wi(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),Wi(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:El,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:to(El)},i=new no(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Yi);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),St(new rt("auth-internal",(function(e){return function(e){return new Cl(e)}(ro(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Vt(Tl,Sl,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(El)),Vt(Tl,Sl,"esm2017");function Al(e,t,n){return Dl.apply(this,arguments)}function Dl(){return Dl=ue(ce().mark((function e(t,n,r){var i,a,o,u,s;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Nl(),o=a.BuildInfo,Gi(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,Fl(n.sessionId);case 4:return u=e.sent,s={},Ja()?s.ibi=o.packageName:Qa()?s.apn=o.packageName:Vi(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",gl(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),Dl.apply(this,arguments)}function Pl(){return Pl=ue(ce().mark((function e(t){var n,r,i;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Nl(),r=n.BuildInfo,i={},Ja()?i.iosBundleId=r.packageName:Qa()?i.androidPackageName=r.packageName:Vi(t,"operation-not-supported-in-this-environment"),e.next=5,Qc(t,i);case 5:case"end":return e.stop()}}),e)}))),Pl.apply(this,arguments)}function Ol(e){var t=Nl().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function Rl(e,t,n){return Ll.apply(this,arguments)}function Ll(){return Ll=ue(ce().mark((function e(t,n,r){var i,a,o;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Nl(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(Bi(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),Qa()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),Ll.apply(this,arguments)}function Ml(e){var t,n,r,i,a,o,u,s,c,l,f=Nl();Wi("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Wi("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Wi("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Wi("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Wi("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function Fl(e){return jl.apply(this,arguments)}function jl(){return(jl=ue(ce().mark((function e(t){var n,r,i;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ul(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ul(e){if(Gi(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var Vl=function(e){he(n,e);var t=ye(n);function n(){var e;return re(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return ae(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),bi(de(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=ue(ce().mark((function e(){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Wc);function Bl(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:Hl(),postBody:null,tenantId:e.tenantId,error:Bi(e,"no-auth-event")}}function ql(e,t){return Gl()._set(Ql(e),t)}function zl(e){return Kl.apply(this,arguments)}function Kl(){return Kl=ue(ce().mark((function e(t){var n;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gl()._get(Ql(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,Gl()._remove(Ql(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),Kl.apply(this,arguments)}function Wl(e,t){var n,r,i=function(e){var t=Yl(e),n=t.link?decodeURIComponent(t.link):void 0,r=Yl(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Yl(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=Yl(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(oC){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?Bi(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function Hl(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function Gl(){return Yi(hs)}function Ql(e){return Ba("authEvent",e.config.apiKey,e.name)}function Yl(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=i(t=n)||J(t)||o(t)||u();r[0];return ze(r.slice(1).join("?"))}var $l=function(){function e(){re(this,e),this._redirectPersistence=ps,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Bc}return ae(e,[{key:"_initialize",value:function(){var e=ue(ce().mark((function e(t){var n,r;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new Vl(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){Vi(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=ue(ce().mark((function e(t,n,r,i){var a,o,u,s;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ml(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),Ec.clear(),e.next=10,this._originValidation(t);case 10:return o=Bl(t,r,i),e.next=13,ql(t,o);case 13:return e.next=15,Al(t,o,n);case 15:return u=e.sent,e.next=18,Ol(u);case 18:return s=e.sent,e.abrupt("return",Rl(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Pl.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=Nl(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(ue(ce().mark((function n(){return ce().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,zl(e);case 2:t.onEvent(Xl());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=ue(ce().mark((function n(r){var i,a;return ce().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,zl(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=Wl(i,r.url)),t.onEvent(a||Xl());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");Nl().handleOpenURL=function(){var e=ue(ce().mark((function e(t){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(oC){console.error(oC)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),Jl=$l;function Xl(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Bi("no-auth-event")}}function Zl(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function ef(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se();return!("file:"!==Zl()&&"ionic:"!==Zl()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function tf(){return Pe()&&11===(null===document||void 0===document?void 0:document.documentMode)}function nf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se();return/Edge\/\d+/.test(e)}function rf(){try{var e=self.localStorage,t=ys();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se();return tf()||nf(e)}()||Oe()}catch(oC){return af()&&Oe()}return!1}function af(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function of(){return("http:"===Zl()||"https:"===Zl()||Ae()||ef())&&!(De()||Ne())&&rf()&&!af()}function uf(){return ef()&&"undefined"!==typeof document}function sf(){return cf.apply(this,arguments)}function cf(){return(cf=ue(ce().mark((function e(){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(uf()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var lf={LOCAL:"local",NONE:"none",SESSION:"session"},ff=Wi,hf="persistence";function df(e,t){ff(Object.values(lf).includes(t),e,"invalid-persistence-type"),De()?ff(t!==lf.SESSION,e,"unsupported-persistence-type"):Ne()?ff(t===lf.NONE,e,"unsupported-persistence-type"):af()?ff(t===lf.NONE||t===lf.LOCAL&&Oe(),e,"unsupported-persistence-type"):ff(t===lf.NONE||rf(),e,"unsupported-persistence-type")}function pf(e){return vf.apply(this,arguments)}function vf(){return vf=ue(ce().mark((function e(t){var n,r;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=mf(),r=Ba(hf,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),vf.apply(this,arguments)}function mf(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(oC){return null}}var yf=Wi,gf=function(){function e(){re(this,e),this.browserResolver=Yi(wl),this.cordovaResolver=Yi(Jl),this.underlyingResolver=null,this._redirectPersistence=ps,this._completeRedirectFn=Bc}return ae(e,[{key:"_initialize",value:function(){var e=ue(ce().mark((function e(t){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=ue(ce().mark((function e(t,n,r,i){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=ue(ce().mark((function e(t,n,r,i){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return uf()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return yf(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=ue(ce().mark((function e(){var t;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,sf();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function kf(e){return e.unwrap()}function bf(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new Ef(e,function(e,t){var n,r=$e(e),i=t;return Wi(t.customData.operationType,r,"argument-error"),Wi(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),is._fromError(r,i)}(e,t));else if(r){var i=wf(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function wf(e){var t=(e instanceof Le?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof Le)&&"temporaryProof"in t&&"phoneNumber"in t)return lc.credentialFromResult(e);var n,r=t.providerId;if(!r||r===Ti)return null;switch(r){case Ei:n=Yo;break;case _i:n=Qo;break;case Ii:n=$o;break;case Si:n=Zo;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?Jo._create(r,u):Lo._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new Go(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof Le?n.credentialFromError(e):n.credentialFromResult(e)}function xf(e,t){return t.catch((function(t){throw t instanceof Le&&bf(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,wf(t)),additionalUserInfo:ns(e),user:Tf.getOrCreate(r)}}))}function _f(e,t){return If.apply(this,arguments)}function If(){return If=ue(ce().mark((function e(t,n){var r;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return xf(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),If.apply(this,arguments)}var Ef=function(){function e(t,n){re(this,e),this.resolver=n,this.auth=t.wrapped()}return ae(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return xf(kf(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),Tf=function(){function e(t){re(this,e),this._delegate=t,this.multiFactor=function(e){var t=$e(e);return ss.has(t)||ss.set(t,us._fromUser(t)),ss.get(t)}(t)}return ae(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=ue(ce().mark((function e(t){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xf(this.auth,bu(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=ue(ce().mark((function e(t,n){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_f(this.auth,ic(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=ue(ce().mark((function e(t){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xf(this.auth,xc(this._delegate,t,gf)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=ue(ce().mark((function e(t){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pf(ro(this.auth));case 2:return e.abrupt("return",Fc(this._delegate,t,gf));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=ue(ce().mark((function e(t){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xf(this.auth,xu(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return _f(this.auth,function(e,t,n){return oc.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return xf(this.auth,function(e,t,n){return wc.apply(this,arguments)}(this._delegate,e,gf))}},{key:"reauthenticateWithRedirect",value:function(){var e=ue(ce().mark((function e(t){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pf(ro(this.auth));case 2:return e.abrupt("return",Lc(this._delegate,t,gf));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return zu.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=ue(ce().mark((function e(t){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,su(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return Qu($e(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return Qu($e(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return cc.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return Gu.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return Ku.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();Tf.USER_MAP=new WeakMap;var Sf=Wi,Cf=function(){function e(t,n){if(re(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;Sf(r,"invalid-api-key",{appName:t.name}),Sf(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?gf:void 0;this._delegate=n.initialize({options:{persistence:Af(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(Li),this.linkUnderlyingAuth()}return ae(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?Tf.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){ao(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return Pu.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return Ou(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return Du.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=ue(ce().mark((function e(t,n){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xf(this._delegate,Mu(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return qu.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=zo.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=ue(ce().mark((function e(){var t;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Sf(of(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Uc(this._delegate,gf);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",xf(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){ro(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=Nf(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=Nf(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return ju.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return Au.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=ue(ce().mark((function e(t){var n,r;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:df(this._delegate,t),e.t0=t,e.next=e.t0===lf.SESSION?4:e.t0===lf.LOCAL?6:e.t0===lf.NONE?11:13;break;case 4:return n=ps,e.abrupt("break",14);case 6:return e.next=8,Yi(Fs)._isAvailable();case 8:return r=e.sent,n=r?Fs:hs,e.abrupt("break",14);case 11:return n=Va,e.abrupt("break",14);case 13:return e.abrupt("return",Vi("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return xf(this._delegate,function(e){return iu.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return xf(this._delegate,gu(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return xf(this._delegate,function(e,t){return Tu.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return xf(this._delegate,function(e,t,n){return gu($e(e),Ko.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return xf(this._delegate,function(e,t,n){return Uu.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return _f(this._delegate,function(e,t,n){return rc.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=ue(ce().mark((function e(t){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Sf(of(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",xf(this._delegate,kc(this._delegate,t,gf)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=ue(ce().mark((function e(t){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Sf(of(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,pf(this._delegate);case 3:return e.abrupt("return",Oc(this._delegate,t,gf));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return Lu.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function Nf(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&Tf.getOrCreate(e))},error:t,complete:n}}function Af(e,t){var n=function(e,t){var n=mf();if(!n)return[];var r=Ba(hf,e,t);switch(n.getItem(r)){case lf.NONE:return[Va];case lf.LOCAL:return[Fs,ps];case lf.SESSION:return[ps];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Fs)||n.push(Fs),"undefined"!==typeof window)for(var r=0,i=[hs,ps];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(Va)||n.push(Va),n}Cf.Persistence=lf;var Df=function(){function e(){re(this,e),this.providerId="phone",this._delegate=new lc(kf(gi.auth()))}return ae(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return lc.credential(e,t)}}]),e}();Df.PHONE_SIGN_IN_METHOD=lc.PHONE_SIGN_IN_METHOD,Df.PROVIDER_ID=lc.PROVIDER_ID;var Pf,Of=Wi,Rf=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:gi.app();re(this,e),Of(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new ec(t,n,i.auth()),this.type=this._delegate.type}return ae(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(Pf=gi).INTERNAL.registerComponent(new rt("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Cf(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Ci,PASSWORD_RESET:Ni,RECOVER_EMAIL:Ai,REVERT_SECOND_FACTOR_ADDITION:Di,VERIFY_AND_CHANGE_EMAIL:Pi,VERIFY_EMAIL:Oi}},EmailAuthProvider:Ko,FacebookAuthProvider:Qo,GithubAuthProvider:$o,GoogleAuthProvider:Yo,OAuthProvider:Go,SAMLAuthProvider:Xo,PhoneAuthProvider:Df,PhoneMultiFactorGenerator:Il,RecaptchaVerifier:Rf,TwitterAuthProvider:Zo,Auth:Cf,AuthCredential:so,Error:Le}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Pf.registerVersion("@firebase/auth-compat","0.2.10");var Lf,Mf="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Ff={},jf=jf||{},Uf=Mf||self;function Vf(){}function Bf(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function qf(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var zf="closure_uid_"+(1e9*Math.random()>>>0),Kf=0;function Wf(e,t,n){return e.call.apply(e.bind,arguments)}function Hf(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Gf(e,t,n){return(Gf=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Wf:Hf).apply(null,arguments)}function Qf(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Yf(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function $f(){this.s=this.s,this.o=this.o}var Jf={};$f.prototype.s=!1,$f.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,zf)&&e[zf]||(e[zf]=++Kf)}(this);delete Jf[e]}},$f.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Xf=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Zf=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function eh(e){return Array.prototype.concat.apply([],arguments)}function th(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function nh(e){return/^[\s\xa0]*$/.test(e)}var rh,ih=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function ah(e,t){return-1!=e.indexOf(t)}function oh(e,t){return e<t?-1:e>t?1:0}e:{var uh=Uf.navigator;if(uh){var sh=uh.userAgent;if(sh){rh=sh;break e}}rh=""}function ch(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function lh(e){var t={};for(var n in e)t[n]=e[n];return t}var fh="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function hh(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<fh.length;a++)n=fh[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function dh(e){return dh[" "](e),e}dh[" "]=Vf;var ph,vh=ah(rh,"Opera"),mh=ah(rh,"Trident")||ah(rh,"MSIE"),yh=ah(rh,"Edge"),gh=yh||mh,kh=ah(rh,"Gecko")&&!(ah(rh.toLowerCase(),"webkit")&&!ah(rh,"Edge"))&&!(ah(rh,"Trident")||ah(rh,"MSIE"))&&!ah(rh,"Edge"),bh=ah(rh.toLowerCase(),"webkit")&&!ah(rh,"Edge");function wh(){var e=Uf.document;return e?e.documentMode:void 0}e:{var xh="",_h=function(){var e=rh;return kh?/rv:([^\);]+)(\)|;)/.exec(e):yh?/Edge\/([\d\.]+)/.exec(e):mh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):bh?/WebKit\/(\S+)/.exec(e):vh?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(_h&&(xh=_h?_h[1]:""),mh){var Ih=wh();if(null!=Ih&&Ih>parseFloat(xh)){ph=String(Ih);break e}}ph=xh}var Eh,Th={};function Sh(){return function(e){var t=Th;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=ih(String(ph)).split("."),n=ih("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=oh(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||oh(0==a[2].length,0==o[2].length)||oh(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(Uf.document&&mh){var Ch=wh();Eh=Ch||(parseInt(ph,10)||void 0)}else Eh=void 0;var Nh=Eh,Ah=function(){if(!Uf.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Uf.addEventListener("test",Vf,t),Uf.removeEventListener("test",Vf,t)}catch(dC){}return e}();function Dh(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Ph(e,t){if(Dh.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(kh){e:{try{dh(t.nodeName);var i=!0;break e}catch(gC){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Oh[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Ph.Z.h.call(this)}}Dh.prototype.h=function(){this.defaultPrevented=!0},Yf(Ph,Dh);var Oh={2:"touch",3:"pen",4:"mouse"};Ph.prototype.h=function(){Ph.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Rh="closure_listenable_"+(1e6*Math.random()|0),Lh=0;function Mh(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++Lh,this.ca=this.fa=!1}function Fh(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function jh(e){this.src=e,this.g={},this.h=0}function Uh(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Xf(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Fh(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Vh(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}jh.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Vh(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Mh(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var Bh="closure_lm_"+(1e6*Math.random()|0),qh={};function zh(e,t,n,r,i){if(r&&r.once)return Wh(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)zh(e,t[a],n,r,i);return null}return n=Xh(n),e&&e[Rh]?e.N(t,n,qf(r)?!!r.capture:!!r,i):Kh(e,t,n,!1,r,i)}function Kh(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=qf(i)?!!i.capture:!!i,u=$h(e);if(u||(e[Bh]=u=new jh(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Yh;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Ah||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Qh(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Wh(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Wh(e,t[a],n,r,i);return null}return n=Xh(n),e&&e[Rh]?e.O(t,n,qf(r)?!!r.capture:!!r,i):Kh(e,t,n,!0,r,i)}function Hh(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Hh(e,t[a],n,r,i);else r=qf(r)?!!r.capture:!!r,n=Xh(n),e&&e[Rh]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Vh(a=e.g[t],n,r,i))&&(Fh(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=$h(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Vh(t,n,r,i)),(n=-1<e?t[e]:null)&&Gh(n))}function Gh(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[Rh])Uh(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Qh(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=$h(t))?(Uh(n,e),0==n.h&&(n.src=null,t[Bh]=null)):Fh(e)}}}function Qh(e){return e in qh?qh[e]:qh[e]="on"+e}function Yh(e,t){if(e.ca)e=!0;else{t=new Ph(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&Gh(e),e=n.call(r,t)}return e}function $h(e){return(e=e[Bh])instanceof jh?e:null}var Jh="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xh(e){return"function"===typeof e?e:(e[Jh]||(e[Jh]=function(t){return e.handleEvent(t)}),e[Jh])}function Zh(){$f.call(this),this.i=new jh(this),this.P=this,this.I=null}function ed(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new Dh(t,e);else if(t instanceof Dh)t.target=t.target||e;else{var i=t;hh(t=new Dh(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=td(o,r,!0,t)&&i}if(i=td(o=t.g=e,r,!0,t)&&i,i=td(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=td(o=t.g=n[a],r,!1,t)&&i}function td(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var u=o.listener,s=o.ia||o.src;o.fa&&Uh(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}Yf(Zh,$f),Zh.prototype[Rh]=!0,Zh.prototype.removeEventListener=function(e,t,n,r){Hh(this,e,t,n,r)},Zh.prototype.M=function(){if(Zh.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Fh(n[r]);delete t.g[e],t.h--}}this.I=null},Zh.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Zh.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var nd=Uf.JSON.stringify;function rd(){var e=fd,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var id,ad=function(){function e(){re(this,e),this.h=this.g=null}return ae(e,[{key:"add",value:function(e,t){var n=od.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),od=new(function(){function e(t,n){re(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return ae(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new ud}),(function(e){return e.reset()})),ud=function(){function e(){re(this,e),this.next=this.g=this.h=null}return ae(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function sd(e){Uf.setTimeout((function(){throw e}),0)}function cd(e,t){id||function(){var e=Uf.Promise.resolve(void 0);id=function(){e.then(hd)}}(),ld||(id(),ld=!0),fd.add(e,t)}var ld=!1,fd=new ad;function hd(){for(var e;e=rd();){try{e.h.call(e.g)}catch(dC){sd(dC)}var t=od;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}ld=!1}function dd(e,t){Zh.call(this),this.h=e||1,this.g=t||Uf,this.j=Gf(this.kb,this),this.l=Date.now()}function pd(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function vd(e,t,n){if("function"===typeof e)n&&(e=Gf(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Gf(e.handleEvent,e)}return 2147483647<Number(t)?-1:Uf.setTimeout(e,t||0)}function md(e){e.g=vd((function(){e.g=null,e.i&&(e.i=!1,md(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Yf(dd,Zh),(Lf=dd.prototype).da=!1,Lf.S=null,Lf.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ed(this,"tick"),this.da&&(pd(this),this.start()))}},Lf.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Lf.M=function(){dd.Z.M.call(this),pd(this),delete this.g};var yd=function(e){he(n,e);var t=ye(n);function n(e,r){var i;return re(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return ae(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:md(this)}},{key:"M",value:function(){bi(de(n.prototype),"M",this).call(this),this.g&&(Uf.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}($f);function gd(e){$f.call(this),this.h=e,this.g={}}Yf(gd,$f);var kd=[];function bd(e,t,n,r){Array.isArray(n)||(n&&(kd[0]=n.toString()),n=kd);for(var i=0;i<n.length;i++){var a=zh(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function wd(e){ch(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Gh(e)}),e),e.g={}}function xd(){this.g=!0}function _d(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return nd(n)}catch(lC){return t}}(e,n)+(r?" "+r:"")}))}gd.prototype.M=function(){gd.Z.M.call(this),wd(this)},gd.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},xd.prototype.Aa=function(){this.g=!1},xd.prototype.info=function(){};var Id={},Ed=null;function Td(){return Ed=Ed||new Zh}function Sd(e){Dh.call(this,Id.Ma,e)}function Cd(e){var t=Td();ed(t,new Sd(t,e))}function Nd(e,t){Dh.call(this,Id.STAT_EVENT,e),this.stat=t}function Ad(e){var t=Td();ed(t,new Nd(t,e))}function Dd(e,t){Dh.call(this,Id.Na,e),this.size=t}function Pd(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Uf.setTimeout((function(){e()}),t)}Id.Ma="serverreachability",Yf(Sd,Dh),Id.STAT_EVENT="statevent",Yf(Nd,Dh),Id.Na="timingevent",Yf(Dd,Dh);var Od={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Rd={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Ld(){}function Md(e){return e.h||(e.h=e.i())}function Fd(){}Ld.prototype.h=null;var jd,Ud={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Vd(){Dh.call(this,"d")}function Bd(){Dh.call(this,"c")}function qd(){}function zd(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new gd(this),this.P=Wd,e=gh?125:void 0,this.W=new dd(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Kd}function Kd(){this.i=null,this.g="",this.h=!1}Yf(Vd,Dh),Yf(Bd,Dh),Yf(qd,Ld),qd.prototype.g=function(){return new XMLHttpRequest},qd.prototype.i=function(){return{}},jd=new qd;var Wd=45e3,Hd={},Gd={};function Qd(e,t,n){e.K=1,e.v=yp(fp(t)),e.s=n,e.U=!0,Yd(e,null)}function Yd(e,t){e.F=Date.now(),Zd(e),e.A=fp(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Ap(n.h,"t",r),e.C=0,n=e.l.H,e.h=new Kd,e.g=Dv(e.l,n?t:null,!e.s),0<e.O&&(e.L=new yd(Gf(e.Ia,e,e.g),e.O)),bd(e.V,e.g,"readystatechange",e.gb),t=e.H?lh(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Cd(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function $d(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function Jd(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Xd(e,n))==Gd){4==t&&(e.o=4,Ad(14),i=!1),_d(e.j,e.m,null,"[Incomplete Response]");break}if(r==Hd){e.o=4,Ad(15),_d(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}_d(e.j,e.m,r,null),ip(e,r)}$d(e)&&r!=Gd&&r!=Hd&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Ad(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),_v(t),t.L=!0,Ad(11))):(_d(e.j,e.m,n,"[Invalid Chunked Response]"),rp(e),np(e))}function Xd(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Gd:(n=Number(t.substring(n,r)),isNaN(n)?Hd:(r+=1)+n>t.length?Gd:(t=t.substr(r,n),e.C=r+n,t))}function Zd(e){e.Y=Date.now()+e.P,ep(e,e.P)}function ep(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Pd(Gf(e.eb,e),t)}function tp(e){e.B&&(Uf.clearTimeout(e.B),e.B=null)}function np(e){0==e.l.G||e.I||Tv(e.l,e)}function rp(e){tp(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,pd(e.W),wd(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function ip(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Fp(n.i,e)))if(n.I=e.N,!e.J&&Fp(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Ev(n),pv(n)}xv(n),Ad(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Pd(Gf(n.ab,n),6e3));if(1>=Mp(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else Cv(n,11)}else if((e.J||n.g==e)&&Ev(n),!nh(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var u=a[4];null!=u&&(n.za=u,n.h.info("SVER="+n.za));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(ah(l,"spdy")||ah(l,"quic")||ah(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(jp(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,mp(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=Av(r,r.H?r.la:null,r.W),d.J){Up(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(tp(p),Zd(p)),r.g=d}else wv(r);0<n.l.length&&yv(n)}else"stop"!=a[0]&&"close"!=a[0]||Cv(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Cv(n,7):dv(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}Cd(4)}catch(a){}}function ap(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Bf(e)||"string"===typeof e)Zf(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(Bf(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(Bf(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function op(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof op)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function up(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];sp(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)sp(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function sp(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Lf=zd.prototype).setTimeout=function(e){this.P=e},Lf.gb=function(e){e=e.target;var t=this.L;t&&3==sv(e)?t.l():this.Ia(e)},Lf.Ia=function(e){try{if(e==this.g)e:{var t=sv(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||gh||this.g&&(this.h.h||this.g.ga()||cv(this.g)))){this.I||4!=t||7==n||Cd(8==n||0>=r?3:2),tp(this);var i=this.g.ba();this.N=i;t:if($d(this)){var a=cv(this.g);e="";var o=a.length,u=4==sv(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){rp(this),np(this);var s="";break t}this.h.i=new Uf.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!nh(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,Ad(12),rp(this),np(this);break e}_d(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ip(this,i)}this.U?(Jd(this,t,s),gh&&this.i&&3==t&&(bd(this.V,this.W,"tick",this.fb),this.W.start())):(_d(this.j,this.m,s,null),ip(this,s)),4==t&&rp(this),this.i&&!this.I&&(4==t?Tv(this.l,this):(this.i=!1,Zd(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,Ad(12)):(this.o=0,Ad(13)),rp(this),np(this)}}}catch(t){}},Lf.fb=function(){if(this.g){var e=sv(this.g),t=this.g.ga();this.C<t.length&&(tp(this),Jd(this,e,t),this.i&&4!=e&&Zd(this))}},Lf.cancel=function(){this.I=!0,rp(this)},Lf.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Cd(3),Ad(17)),rp(this),this.o=2,np(this)):ep(this,this.Y-e)},(Lf=op.prototype).R=function(){up(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Lf.T=function(){return up(this),this.g.concat()},Lf.get=function(e,t){return sp(this.h,e)?this.h[e]:t},Lf.set=function(e,t){sp(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Lf.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var cp=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function lp(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof lp){this.g=void 0!==t?t:e.g,hp(this,e.j),this.s=e.s,dp(this,e.i),pp(this,e.m),this.l=e.l,t=e.h;var n=new Tp;n.i=t.i,t.g&&(n.g=new op(t.g),n.h=t.h),vp(this,n),this.o=e.o}else e&&(n=String(e).match(cp))?(this.g=!!t,hp(this,n[1]||"",!0),this.s=gp(n[2]||""),dp(this,n[3]||"",!0),pp(this,n[4]),this.l=gp(n[5]||"",!0),vp(this,n[6]||"",!0),this.o=gp(n[7]||"")):(this.g=!!t,this.h=new Tp(null,this.g))}function fp(e){return new lp(e)}function hp(e,t,n){e.j=n?gp(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function dp(e,t,n){e.i=n?gp(t,!0):t}function pp(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function vp(e,t,n){t instanceof Tp?(e.h=t,function(e,t){t&&!e.j&&(Sp(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Cp(this,t),Ap(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=kp(t,Ip)),e.h=new Tp(t,e.g))}function mp(e,t,n){e.h.set(t,n)}function yp(e){return mp(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function gp(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function kp(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,bp),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function bp(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}lp.prototype.toString=function(){var e=[],t=this.j;t&&e.push(kp(t,wp,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(kp(t,wp,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(kp(n,"/"==n.charAt(0)?_p:xp,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",kp(n,Ep)),e.join("")};var wp=/[#\/\?@]/g,xp=/[#\?:]/g,_p=/[#\?]/g,Ip=/[#\?@]/g,Ep=/#/g;function Tp(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Sp(e){e.g||(e.g=new op,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Cp(e,t){Sp(e),t=Dp(e,t),sp(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,sp((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&up(e)))}function Np(e,t){return Sp(e),t=Dp(e,t),sp(e.g.h,t)}function Ap(e,t,n){Cp(e,t),0<n.length&&(e.i=null,e.g.set(Dp(e,t),th(n)),e.h+=n.length)}function Dp(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Lf=Tp.prototype).add=function(e,t){Sp(this),this.i=null,e=Dp(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Lf.forEach=function(e,t){Sp(this),this.g.forEach((function(n,r){Zf(n,(function(n){e.call(t,n,r,this)}),this)}),this)},Lf.T=function(){Sp(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Lf.R=function(e){Sp(this);var t=[];if("string"===typeof e)Np(this,e)&&(t=eh(t,this.g.get(Dp(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=eh(t,e[n])}return t},Lf.set=function(e,t){return Sp(this),this.i=null,Np(this,e=Dp(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Lf.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Lf.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var Pp=ae((function e(t,n){re(this,e),this.h=t,this.g=n}));function Op(e){this.l=e||Rp,Uf.PerformanceNavigationTiming?e=0<(e=Uf.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Uf.g&&Uf.g.Ea&&Uf.g.Ea()&&Uf.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Rp=10;function Lp(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Mp(e){return e.h?1:e.g?e.g.size:0}function Fp(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function jp(e,t){e.g?e.g.add(t):e.h=t}function Up(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Vp(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=ne(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return th(e.i)}function Bp(){}function qp(){this.g=new Bp}function zp(e,t,n){var r=n||"";try{ap(e,(function(e,n){var i=e;qf(e)&&(i=nd(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(oC){throw t.push(r+"type="+encodeURIComponent("_badmap")),oC}}function Kp(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(gC){}}function Wp(e){this.l=e.$b||null,this.j=e.ib||!1}function Hp(e,t){Zh.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Gp,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Op.prototype.cancel=function(){if(this.i=Vp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=ne(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Bp.prototype.stringify=function(e){return Uf.JSON.stringify(e,void 0)},Bp.prototype.parse=function(e){return Uf.JSON.parse(e,void 0)},Yf(Wp,Ld),Wp.prototype.g=function(){return new Hp(this.l,this.j)},Wp.prototype.i=function(e){return function(){return e}}({}),Yf(Hp,Zh);var Gp=0;function Qp(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function Yp(e){e.readyState=4,e.l=null,e.j=null,e.A=null,$p(e)}function $p(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Lf=Hp.prototype).open=function(e,t){if(this.readyState!=Gp)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,$p(this)},Lf.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Uf).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Lf.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Yp(this)),this.readyState=Gp},Lf.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,$p(this)),this.g&&(this.readyState=3,$p(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof Uf.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Qp(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Lf.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Yp(this):$p(this),3==this.readyState&&Qp(this)}},Lf.Ua=function(e){this.g&&(this.response=this.responseText=e,Yp(this))},Lf.Ta=function(e){this.g&&(this.response=e,Yp(this))},Lf.ha=function(){this.g&&Yp(this)},Lf.setRequestHeader=function(e,t){this.v.append(e,t)},Lf.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Lf.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Hp.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Jp=Uf.JSON.parse;function Xp(e){Zh.call(this),this.headers=new op,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Zp,this.K=this.L=!1}Yf(Xp,Zh);var Zp="",ev=/^https?$/i,tv=["POST","PUT"];function nv(e){return"content-type"==e.toLowerCase()}function rv(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,iv(e),ov(e)}function iv(e){e.D||(e.D=!0,ed(e,"complete"),ed(e,"error"))}function av(e){if(e.h&&"undefined"!=typeof jf&&(!e.C[1]||4!=sv(e)||2!=e.ba()))if(e.v&&4==sv(e))vd(e.Fa,0,e);else if(ed(e,"readystatechange"),4==sv(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(cp)[1]||null;if(!a&&Uf.self&&Uf.self.location){var o=Uf.self.location.protocol;a=o.substr(0,o.length-1)}i=!ev.test(a?a.toLowerCase():"")}t=i}if(t)ed(e,"complete"),ed(e,"success");else{e.m=6;try{var u=2<sv(e)?e.g.statusText:""}catch(vC){u=""}e.j=u+" ["+e.ba()+"]",iv(e)}}finally{ov(e)}}}function ov(e,t){if(e.g){uv(e);var n=e.g,r=e.C[0]?Vf:null;e.g=null,e.C=null,t||ed(e,"ready");try{n.onreadystatechange=r}catch(oC){}}}function uv(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Uf.clearTimeout(e.A),e.A=null)}function sv(e){return e.g?e.g.readyState:0}function cv(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Zp:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(kC){return null}}function lv(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return ch(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):mp(e,t,n))}function fv(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function hv(e){this.za=0,this.l=[],this.h=new xd,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=fv("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=fv("baseRetryDelayMs",5e3,e),this.$a=fv("retryDelaySeedMs",1e4,e),this.Ya=fv("forwardChannelMaxRetries",2,e),this.ra=fv("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Op(e&&e.concurrentRequestLimit),this.Ca=new qp,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function dv(e){if(vv(e),3==e.G){var t=e.V++,n=fp(e.F);mp(n,"SID",e.J),mp(n,"RID",t),mp(n,"TYPE","terminate"),kv(e,n),(t=new zd(e,e.h,t,void 0)).K=2,t.v=yp(fp(n)),n=!1,Uf.navigator&&Uf.navigator.sendBeacon&&(n=Uf.navigator.sendBeacon(t.v.toString(),"")),!n&&Uf.Image&&((new Image).src=t.v,n=!0),n||(t.g=Dv(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Zd(t)}Nv(e)}function pv(e){e.g&&(_v(e),e.g.cancel(),e.g=null)}function vv(e){pv(e),e.u&&(Uf.clearTimeout(e.u),e.u=null),Ev(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Uf.clearTimeout(e.m),e.m=null)}function mv(e,t){e.l.push(new Pp(e.Za++,t)),3==e.G&&yv(e)}function yv(e){Lp(e.i)||e.m||(e.m=!0,cd(e.Ha,e),e.C=0)}function gv(e,t){var n;n=t?t.m:e.V++;var r=fp(e.F);mp(r,"SID",e.J),mp(r,"RID",n),mp(r,"AID",e.U),kv(e,r),e.o&&e.s&&lv(r,e.o,e.s),n=new zd(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=bv(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),jp(e.i,n),Qd(n,r,t)}function kv(e,t){e.j&&ap({},(function(e,n){mp(t,n,e)}))}function bv(e,t,n){n=Math.min(e.l.length,n);var r=e.j?Gf(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{zp(l,o,"req"+c+"_")}catch(am){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function wv(e){e.g||e.u||(e.Y=1,cd(e.Ga,e),e.A=0)}function xv(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=Pd(Gf(e.Ga,e),Sv(e,e.A)),e.A++,!0)}function _v(e){null!=e.B&&(Uf.clearTimeout(e.B),e.B=null)}function Iv(e){e.g=new zd(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=fp(e.oa);mp(t,"RID","rpc"),mp(t,"SID",e.J),mp(t,"CI",e.N?"0":"1"),mp(t,"AID",e.U),kv(e,t),mp(t,"TYPE","xmlhttp"),e.o&&e.s&&lv(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=yp(fp(t)),n.s=null,n.U=!0,Yd(n,e)}function Ev(e){null!=e.v&&(Uf.clearTimeout(e.v),e.v=null)}function Tv(e,t){var n=null;if(e.g==t){Ev(e),_v(e),e.g=null;var r=2}else{if(!Fp(e.i,t))return;n=t.D,Up(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;ed(r=Td(),new Dd(r,n,t,i)),yv(e)}else wv(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(Mp(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=Pd(Gf(e.Ha,e,t),Sv(e,e.C)),e.C++,!0))}(e,t)||2==r&&xv(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Cv(e,5);break;case 4:Cv(e,10);break;case 3:Cv(e,6);break;default:Cv(e,2)}}function Sv(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Cv(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=Gf(e.jb,e);n||(n=new lp("//www.google.com/images/cleardot.gif"),Uf.location&&"http"==Uf.location.protocol||hp(n,"https"),yp(n)),function(e,t){var n=new xd;if(Uf.Image){var r=new Image;r.onload=Qf(Kp,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Qf(Kp,n,r,"TestLoadImage: error",!1,t),r.onabort=Qf(Kp,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Qf(Kp,n,r,"TestLoadImage: timeout",!1,t),Uf.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Ad(2);e.G=0,e.j&&e.j.va(t),Nv(e),vv(e)}function Nv(e){e.G=0,e.I=-1,e.j&&(0==Vp(e.i).length&&0==e.l.length||(e.i.i.length=0,th(e.l),e.l.length=0),e.j.ua())}function Av(e,t,n){var r=function(e){return e instanceof lp?fp(e):new lp(e,void 0)}(n);if(""!=r.i)t&&dp(r,t+"."+r.i),pp(r,r.m);else{var i=Uf.location;r=function(e,t,n,r){var i=new lp(null,void 0);return e&&hp(i,e),t&&dp(i,t),n&&pp(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&ch(e.aa,(function(e,t){mp(r,t,e)})),t=e.D,n=e.sa,t&&n&&mp(r,t,n),mp(r,"VER",e.ma),kv(e,r),r}function Dv(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new Xp(new Wp({ib:!0})):new Xp(e.qa)).L=e.H,t}function Pv(){}function Ov(){if(mh&&!(10<=Number(Nh)))throw Error("Environmental error: no available transport.")}function Rv(e,t){Zh.call(this),this.g=new hv(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!nh(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!nh(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Fv(this)}function Lv(e){Vd.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Mv(){Bd.call(this),this.status=1}function Fv(e){this.g=e}(Lf=Xp.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():jd.g(),this.C=this.u?Md(this.u):Md(jd),this.g.onreadystatechange=Gf(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(gC){return void rv(this,gC)}e=n||"";var i=new op(this.headers);r&&ap(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=nv,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=Uf.FormData&&e instanceof Uf.FormData,!(0<=Xf(tv,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{uv(this),0<this.B&&((this.K=function(e){return mh&&Sh()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Gf(this.pa,this)):this.A=vd(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(gC){rv(this,gC)}},Lf.pa=function(){"undefined"!=typeof jf&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ed(this,"timeout"),this.abort(8))},Lf.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,ed(this,"complete"),ed(this,"abort"),ov(this))},Lf.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ov(this,!0)),Xp.Z.M.call(this)},Lf.Fa=function(){this.s||(this.F||this.v||this.l?av(this):this.cb())},Lf.cb=function(){av(this)},Lf.ba=function(){try{return 2<sv(this)?this.g.status:-1}catch(cC){return-1}},Lf.ga=function(){try{return this.g?this.g.responseText:""}catch(cC){return""}},Lf.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Jp(t)}},Lf.Da=function(){return this.m},Lf.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(Lf=hv.prototype).ma=8,Lf.G=1,Lf.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(kC){}},Lf.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new zd(this,this.h,e,void 0),n=this.s;if(this.P&&(n?hh(n=lh(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=bv(this,t,r),mp(i=fp(this.F),"RID",e),mp(i,"CVER",22),this.D&&mp(i,"X-HTTP-Session-Id",this.D),kv(this,i),this.o&&n&&lv(i,this.o,n),jp(this.i,t),this.Ra&&mp(i,"TYPE","init"),this.ja?(mp(i,"$req",r),mp(i,"SID","null"),t.$=!0,Qd(t,i,null)):Qd(t,i,r),this.G=2}}else 3==this.G&&(e?gv(this,e):0==this.l.length||Lp(this.i)||gv(this))},Lf.Ga=function(){if(this.u=null,Iv(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Pd(Gf(this.bb,this),e)}},Lf.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ad(10),pv(this),Iv(this))},Lf.ab=function(){null!=this.v&&(this.v=null,pv(this),xv(this),Ad(19))},Lf.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Ad(2)):(this.h.info("Failed to ping google.com"),Ad(1))},(Lf=Pv.prototype).xa=function(){},Lf.wa=function(){},Lf.va=function(){},Lf.ua=function(){},Lf.Oa=function(){},Ov.prototype.g=function(e,t){return new Rv(e,t)},Yf(Rv,Zh),Rv.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),cd(Gf(e.hb,e,t))),Ad(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Av(e,null,e.W),yv(e)},Rv.prototype.close=function(){dv(this.g)},Rv.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,mv(this.g,t)}else this.v?((t={}).__data__=nd(e),mv(this.g,t)):mv(this.g,e)},Rv.prototype.M=function(){this.g.j=null,delete this.j,dv(this.g),delete this.g,Rv.Z.M.call(this)},Yf(Lv,Vd),Yf(Mv,Bd),Yf(Fv,Pv),Fv.prototype.xa=function(){ed(this.g,"a")},Fv.prototype.wa=function(e){ed(this.g,new Lv(e))},Fv.prototype.va=function(e){ed(this.g,new Mv(e))},Fv.prototype.ua=function(){ed(this.g,"b")},Ov.prototype.createWebChannel=Ov.prototype.g,Rv.prototype.send=Rv.prototype.u,Rv.prototype.open=Rv.prototype.m,Rv.prototype.close=Rv.prototype.close,Od.NO_ERROR=0,Od.TIMEOUT=8,Od.HTTP_ERROR=6,Rd.COMPLETE="complete",Fd.EventType=Ud,Ud.OPEN="a",Ud.CLOSE="b",Ud.ERROR="c",Ud.MESSAGE="d",Zh.prototype.listen=Zh.prototype.N,Xp.prototype.listenOnce=Xp.prototype.O,Xp.prototype.getLastError=Xp.prototype.La,Xp.prototype.getLastErrorCode=Xp.prototype.Da,Xp.prototype.getStatus=Xp.prototype.ba,Xp.prototype.getResponseJson=Xp.prototype.Qa,Xp.prototype.getResponseText=Xp.prototype.ga,Xp.prototype.send=Xp.prototype.ea;var jv=Ff.createWebChannelTransport=function(){return new Ov},Uv=Ff.getStatEventTarget=function(){return Td()},Vv=Ff.ErrorCode=Od,Bv=Ff.EventType=Rd,qv=Ff.Event=Id,zv=Ff.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Kv=Ff.FetchXmlHttpFactory=Wp,Wv=Ff.WebChannel=Fd,Hv=Ff.XhrIo=Xp,Gv="@firebase/firestore",Qv=function(){function e(t){re(this,e),this.uid=t}return ae(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Qv.UNAUTHENTICATED=new Qv(null),Qv.GOOGLE_CREDENTIALS=new Qv("google-credentials-uid"),Qv.FIRST_PARTY=new Qv("first-party-uid"),Qv.MOCK_USER=new Qv("mock-user");var Yv="9.6.9",$v=new mt("@firebase/firestore");function Jv(){return $v.logLevel}function Xv(e){if($v.logLevel<=ut.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(tm);$v.debug.apply($v,["Firestore (".concat(Yv,"): ").concat(e)].concat(X(i)))}}function Zv(e){if($v.logLevel<=ut.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(tm);$v.error.apply($v,["Firestore (".concat(Yv,"): ").concat(e)].concat(X(i)))}}function em(e){if($v.logLevel<=ut.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(tm);$v.warn.apply($v,["Firestore (".concat(Yv,"): ").concat(e)].concat(X(i)))}}function tm(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function nm(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Yv,") INTERNAL ASSERTION FAILED: ")+e;throw Zv(t),new Error(t)}function rm(e,t){e||nm()}function im(e,t){return e}var am={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},om=function(e){he(n,e);var t=ye(n);function n(e,r){var i;return re(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return ae(n)}(Le),um=ae((function e(){var t=this;re(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),sm=ae((function e(t,n){re(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),cm=function(){function e(){re(this,e)}return ae(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Qv.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),lm=function(){function e(t){re(this,e),this.token=t,this.changeListener=null}return ae(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),fm=function(){function e(t){re(this,e),this.t=t,this.currentUser=Qv.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return ae(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new um;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new um,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(ue(ce().mark((function e(){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){Xv("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(Xv("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new um)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Xv("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(rm("string"==typeof n.accessToken),new sm(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return rm(null===e||"string"==typeof e),new Qv(e)}}]),e}(),hm=ae((function e(t,n,r){re(this,e),this.type="FirstParty",this.user=Qv.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),dm=function(){function e(t,n,r){re(this,e),this.h=t,this.l=n,this.m=r}return ae(e,[{key:"getToken",value:function(){return Promise.resolve(new hm(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Qv.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),pm=ae((function e(t){re(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),vm=function(){function e(t){re(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return ae(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Xv("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,Xv("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){Xv("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):Xv("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(rm("string"==typeof t.token),e.p=t.token,new pm(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}(),mm=function(){function e(t,n){var r=this;re(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.I(e)},this.T=function(e){return n.writeSequenceNumber(e)})}return ae(e,[{key:"I",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.T&&this.T(e),e}}]),e}();function ym(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}mm.A=-1;var gm=function(){function e(){re(this,e)}return ae(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=ym(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function km(e,t){return e<t?-1:e>t?1:0}function bm(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function wm(e){return e+"\0"}var xm=function(){function e(t,n){if(re(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new om(am.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new om(am.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new om(am.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new om(am.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return ae(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?km(this.nanoseconds,e.nanoseconds):km(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),_m=function(){function e(t){re(this,e),this.timestamp=t}return ae(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new xm(0,0))}}]),e}();function Im(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Em(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Tm(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Sm=function(){function e(t,n,r){re(this,e),void 0===n?n=0:n>t.length&&nm(),void 0===r?r=t.length-n:r>t.length-n&&nm(),this.segments=t,this.offset=n,this.len=r}return ae(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Cm=function(e){he(n,e);var t=ye(n);function n(){return re(this,n),t.apply(this,arguments)}return ae(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new om(am.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,X(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Sm),Nm=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Am=function(e){he(n,e);var t=ye(n);function n(){return re(this,n),t.apply(this,arguments)}return ae(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Nm.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new om(am.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new om(am.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new om(am.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new om(am.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Sm),Dm=function(){function e(t){re(this,e),this.fields=t,t.sort(Am.comparator)}return ae(e,[{key:"covers",value:function(e){var t,n=ne(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return bm(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}]),e}();var Pm=function(e){function t(e){re(this,t),this.binaryString=e}return ae(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return km(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Pm.EMPTY_BYTE_STRING=new Pm("");var Om=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rm(e){if(rm(!!e),"string"==typeof e){var t=0,n=Om.exec(e);if(rm(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Lm(e.seconds),nanos:Lm(e.nanos)}}function Lm(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Mm(e){return"string"==typeof e?Pm.fromBase64String(e):Pm.fromUint8Array(e)}function Fm(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function jm(e){var t=e.mapValue.fields.__previous_value__;return Fm(t)?jm(t):t}function Um(e){var t=Rm(e.mapValue.fields.__local_write_time__.timestampValue);return new xm(t.seconds,t.nanos)}var Vm=ae((function e(t,n,r,i,a,o,u,s){re(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),Bm=function(){function e(t,n){re(this,e),this.projectId=t,this.database=n||"(default)"}return ae(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function qm(e){return null==e}function zm(e){return 0===e&&1/e==-1/0}function Km(e){return"number"==typeof e&&Number.isInteger(e)&&!zm(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var Wm=function(){function e(t){re(this,e),this.path=t}return ae(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Cm.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Cm.fromString(t))}},{key:"fromName",value:function(t){return new e(Cm.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Cm.emptyPath())}},{key:"comparator",value:function(e,t){return Cm.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Cm(t.slice()))}}]),e}(),Hm={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Gm={nullValue:"NULL_VALUE"};function Qm(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Fm(e)?4:sy(e)?9:10:nm()}function Ym(e,t){if(e===t)return!0;var n=Qm(e);if(n!==Qm(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Um(e).isEqual(Um(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Rm(e.timestampValue),r=Rm(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Mm(e.bytesValue).isEqual(Mm(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Lm(e.geoPointValue.latitude)===Lm(t.geoPointValue.latitude)&&Lm(e.geoPointValue.longitude)===Lm(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Lm(e.integerValue)===Lm(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Lm(e.doubleValue),r=Lm(t.doubleValue);return n===r?zm(n)===zm(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return bm(e.arrayValue.values||[],t.arrayValue.values||[],Ym);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Im(n)!==Im(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ym(n[i],r[i])))return!1;return!0}(e,t);default:return nm()}}function $m(e,t){return void 0!==(e.values||[]).find((function(e){return Ym(e,t)}))}function Jm(e,t){if(e===t)return 0;var n=Qm(e),r=Qm(t);if(n!==r)return km(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return km(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Lm(e.integerValue||e.doubleValue),r=Lm(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Xm(e.timestampValue,t.timestampValue);case 4:return Xm(Um(e),Um(t));case 5:return km(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Mm(e),r=Mm(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=km(n[i],r[i]);if(0!==a)return a}return km(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=km(Lm(e.latitude),Lm(t.latitude));return 0!==n?n:km(Lm(e.longitude),Lm(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Jm(n[i],r[i]);if(a)return a}return km(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=km(r[o],a[o]);if(0!==u)return u;var s=Jm(n[r[o]],i[a[o]]);if(0!==s)return s}return km(r.length,a.length)}(e.mapValue,t.mapValue);default:throw nm()}}function Xm(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return km(e,t);var n=Rm(e),r=Rm(t),i=km(n.seconds,r.seconds);return 0!==i?i:km(n.nanos,r.nanos)}function Zm(e){return ey(e)}function ey(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Rm(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Mm(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Wm.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=ne(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=ey(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=ne(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(ey(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):nm();var t,n}function ty(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function ny(e){return!!e&&"integerValue"in e}function ry(e){return!!e&&"arrayValue"in e}function iy(e){return!!e&&"nullValue"in e}function ay(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function oy(e){return!!e&&"mapValue"in e}function uy(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Em(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=uy(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=uy(e.arrayValue.values[r]);return n}return Object.assign({},e)}function sy(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function cy(e,t){return void 0===e?t:void 0===t||Jm(e,t)>0?e:t}function ly(e,t){return void 0===e?t:void 0===t||Jm(e,t)<0?e:t}var fy=function(){function e(t){re(this,e),this.value=t}return ae(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!oy(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=uy(t)}},{key:"setAll",value:function(e){var t=this,n=Am.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=uy(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());oy(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Ym(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];oy(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Em(t,(function(t,n){return e[t]=n}));var r,i=ne(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(uy(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function hy(e){var t=[];return Em(e.fields,(function(e,n){var r=new Am([e]);if(oy(n)){var i=hy(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=ne(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new Dm(t)}var dy=function(){function e(t,n,r,i,a,o){re(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return ae(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=fy.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=fy.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,_m.min(),_m.min(),fy.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,_m.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,_m.min(),fy.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,_m.min(),fy.empty(),2)}}]),e}(),py=ae((function e(t,n,r,i){re(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function vy(e){return e.fields.find((function(e){return 2===e.kind}))}function my(e){return e.fields.filter((function(e){return 2!==e.kind}))}py.UNKNOWN_ID=-1;var yy=ae((function e(t,n){re(this,e),this.fieldPath=t,this.kind=n})),gy=function(){function e(t,n){re(this,e),this.sequenceNumber=t,this.offset=n}return ae(e,null,[{key:"empty",value:function(){return new e(0,ky.min())}}]),e}(),ky=function(){function e(t,n,r){re(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return ae(e,null,[{key:"min",value:function(){return new e(_m.min(),Wm.empty(),-1)}}]),e}(),by=ae((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;re(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.P=null}));function wy(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new by(e,t,n,r,i,a,o)}function xy(e){var t=im(e);if(null===t.P){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+Zm(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),qm(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return Zm(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return Zm(e)})).join(",")),t.P=n}return t.P}function _y(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Fy(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!Ym(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Uy(e.startAt,t.startAt)&&Uy(e.endAt,t.endAt)}function Iy(e){return Wm.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Ey(e,t){return e.filters.filter((function(e){return e instanceof Ty&&e.field.isEqual(t)}))}var Ty=function(e){he(n,e);var t=ye(n);function n(e,r,i){var a;return re(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return ae(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Jm(t,this.value)):null!==t&&Qm(this.value)===Qm(t)&&this.v(Jm(t,this.value))}},{key:"v",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return nm()}}},{key:"S",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new Sy(e,t,r):"array-contains"===t?new Dy(e,r):"in"===t?new Py(e,r):"not-in"===t?new Oy(e,r):"array-contains-any"===t?new Ry(e,r):new n(e,t,r)}},{key:"V",value:function(e,t,n){return"in"===t?new Cy(e,n):new Ny(e,n)}}]),n}(function(){return ae((function e(){re(this,e)}))}()),Sy=function(e){he(n,e);var t=ye(n);function n(e,r,i){var a;return re(this,n),(a=t.call(this,e,r,i)).key=Wm.fromName(i.referenceValue),a}return ae(n,[{key:"matches",value:function(e){var t=Wm.comparator(e.key,this.key);return this.v(t)}}]),n}(Ty),Cy=function(e){he(n,e);var t=ye(n);function n(e,r){var i;return re(this,n),(i=t.call(this,e,"in",r)).keys=Ay("in",r),i}return ae(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Ty),Ny=function(e){he(n,e);var t=ye(n);function n(e,r){var i;return re(this,n),(i=t.call(this,e,"not-in",r)).keys=Ay("not-in",r),i}return ae(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Ty);function Ay(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Wm.fromName(e.referenceValue)}))}var Dy=function(e){he(n,e);var t=ye(n);function n(e,r){return re(this,n),t.call(this,e,"array-contains",r)}return ae(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return ry(t)&&$m(t.arrayValue,this.value)}}]),n}(Ty),Py=function(e){he(n,e);var t=ye(n);function n(e,r){return re(this,n),t.call(this,e,"in",r)}return ae(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&$m(this.value.arrayValue,t)}}]),n}(Ty),Oy=function(e){he(n,e);var t=ye(n);function n(e,r){return re(this,n),t.call(this,e,"not-in",r)}return ae(n,[{key:"matches",value:function(e){if($m(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!$m(this.value.arrayValue,t)}}]),n}(Ty),Ry=function(e){he(n,e);var t=ye(n);function n(e,r){return re(this,n),t.call(this,e,"array-contains-any",r)}return ae(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!ry(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return $m(t.value.arrayValue,e)}))}}]),n}(Ty),Ly=ae((function e(t,n){re(this,e),this.position=t,this.inclusive=n})),My=ae((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";re(this,e),this.field=t,this.dir=n}));function Fy(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function jy(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Wm.comparator(Wm.fromName(o.referenceValue),n.key):Jm(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Uy(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Ym(e.position[n],t.position[n]))return!1;return!0}var Vy=ae((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;re(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.D=null,this.C=null,this.startAt,this.endAt}));function By(e,t,n,r,i,a,o,u){return new Vy(e,t,n,r,i,a,o,u)}function qy(e){return new Vy(e)}function zy(e){return!qm(e.limit)&&"F"===e.limitType}function Ky(e){return!qm(e.limit)&&"L"===e.limitType}function Wy(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Hy(e){var t,n=ne(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.S())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function Gy(e){return null!==e.collectionGroup}function Qy(e){var t=im(e);if(null===t.D){t.D=[];var n=Hy(t),r=Wy(t);if(null!==n&&null===r)n.isKeyField()||t.D.push(new My(n)),t.D.push(new My(Am.keyField(),"asc"));else{var i,a=!1,o=ne(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.D.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new My(Am.keyField(),s))}}}return t.D}function Yy(e){var t=im(e);if(!t.C)if("F"===t.limitType)t.C=wy(t.path,t.collectionGroup,Qy(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=ne(Qy(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new My(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new Ly(t.endAt.position,!t.endAt.inclusive):null,s=t.startAt?new Ly(t.startAt.position,!t.startAt.inclusive):null;t.C=wy(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.C}function $y(e,t,n){return new Vy(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Jy(e,t){return _y(Yy(e),Yy(t))&&e.limitType===t.limitType}function Xy(e){return"".concat(xy(Yy(e)),"|lt:").concat(e.limitType)}function Zy(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(Zm(t.value));var t})).join(", "),"]")),qm(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return Zm(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return Zm(e)})).join(",")),"Target(".concat(t,")")}(Yy(e)),"; limitType=").concat(e.limitType,")")}function eg(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Wm.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=ne(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=ne(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=jy(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Qy(e),t))&&!(e.endAt&&!function(e,t,n){var r=jy(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Qy(e),t))}(e,t)}function tg(e){return function(t,n){var r,i=!1,a=ne(Qy(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=ng(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function ng(e,t,n){var r=e.field.isKeyField()?Wm.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Jm(r,i):nm()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return nm()}}function rg(e,t){if(e.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zm(t)?"-0":t}}function ig(e){return{integerValue:""+e}}function ag(e,t){return Km(t)?ig(t):rg(e,t)}var og=ae((function e(){re(this,e),this._=void 0}));function ug(e,t,n){return e instanceof lg?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof fg?hg(e,t):e instanceof dg?pg(e,t):function(e,t){var n=cg(e,t),r=mg(n)+mg(e.k);return ny(n)&&ny(e.k)?ig(r):rg(e.M,r)}(e,t)}function sg(e,t,n){return e instanceof fg?hg(e,t):e instanceof dg?pg(e,t):n}function cg(e,t){return e instanceof vg?ny(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var lg=function(e){he(n,e);var t=ye(n);function n(){return re(this,n),t.apply(this,arguments)}return ae(n)}(og),fg=function(e){he(n,e);var t=ye(n);function n(e){var r;return re(this,n),(r=t.call(this)).elements=e,r}return ae(n)}(og);function hg(e,t){var n,r=yg(t),i=ne(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Ym(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var dg=function(e){he(n,e);var t=ye(n);function n(e){var r;return re(this,n),(r=t.call(this)).elements=e,r}return ae(n)}(og);function pg(e,t){var n,r=yg(t),i=ne(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Ym(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var vg=function(e){he(n,e);var t=ye(n);function n(e,r){var i;return re(this,n),(i=t.call(this)).M=e,i.k=r,i}return ae(n)}(og);function mg(e){return Lm(e.integerValue||e.doubleValue)}function yg(e){return ry(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var gg=ae((function e(t,n){re(this,e),this.field=t,this.transform=n}));var kg=ae((function e(t,n){re(this,e),this.version=t,this.transformResults=n})),bg=function(){function e(t,n){re(this,e),this.updateTime=t,this.exists=n}return ae(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function wg(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var xg=ae((function e(){re(this,e)}));function _g(e,t,n){e instanceof Cg?function(e,t,n){var r=e.value.clone(),i=Dg(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Ng?function(e,t,n){if(wg(e.precondition,t)){var r=Dg(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Ag(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Ig(e,t,n){e instanceof Cg?function(e,t,n){if(wg(e.precondition,t)){var r=e.value.clone(),i=Pg(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(Sg(t),r).setHasLocalMutations()}}(e,t,n):e instanceof Ng?function(e,t,n){if(wg(e.precondition,t)){var r=Pg(e.fieldTransforms,n,t),i=t.data;i.setAll(Ag(e)),i.setAll(r),t.convertToFoundDocument(Sg(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){wg(e.precondition,t)&&t.convertToNoDocument(_m.min())}(e,t)}function Eg(e,t){var n,r=null,i=ne(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=cg(a.transform,o||null);null!=u&&(null==r&&(r=fy.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function Tg(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&bm(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof fg&&t instanceof fg||e instanceof dg&&t instanceof dg?bm(e.elements,t.elements,Ym):e instanceof vg&&t instanceof vg?Ym(e.k,t.k):e instanceof lg&&t instanceof lg}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function Sg(e){return e.isFoundDocument()?e.version:_m.min()}var Cg=function(e){he(n,e);var t=ye(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return re(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return ae(n)}(xg),Ng=function(e){he(n,e);var t=ye(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return re(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return ae(n)}(xg);function Ag(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Dg(e,t,n){var r=new Map;rm(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,sg(o,u,n[i]))}return r}function Pg(e,t,n){var r,i=new Map,a=ne(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,ug(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Og,Rg,Lg=function(e){he(n,e);var t=ye(n);function n(e,r){var i;return re(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return ae(n)}(xg),Mg=function(e){he(n,e);var t=ye(n);function n(e,r){var i;return re(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return ae(n)}(xg),Fg=ae((function e(t){re(this,e),this.count=t}));function jg(e){switch(e){default:return nm();case am.CANCELLED:case am.UNKNOWN:case am.DEADLINE_EXCEEDED:case am.RESOURCE_EXHAUSTED:case am.INTERNAL:case am.UNAVAILABLE:case am.UNAUTHENTICATED:return!1;case am.INVALID_ARGUMENT:case am.NOT_FOUND:case am.ALREADY_EXISTS:case am.PERMISSION_DENIED:case am.FAILED_PRECONDITION:case am.ABORTED:case am.OUT_OF_RANGE:case am.UNIMPLEMENTED:case am.DATA_LOSS:return!0}}function Ug(e){if(void 0===e)return Zv("GRPC error has no .code"),am.UNKNOWN;switch(e){case Og.OK:return am.OK;case Og.CANCELLED:return am.CANCELLED;case Og.UNKNOWN:return am.UNKNOWN;case Og.DEADLINE_EXCEEDED:return am.DEADLINE_EXCEEDED;case Og.RESOURCE_EXHAUSTED:return am.RESOURCE_EXHAUSTED;case Og.INTERNAL:return am.INTERNAL;case Og.UNAVAILABLE:return am.UNAVAILABLE;case Og.UNAUTHENTICATED:return am.UNAUTHENTICATED;case Og.INVALID_ARGUMENT:return am.INVALID_ARGUMENT;case Og.NOT_FOUND:return am.NOT_FOUND;case Og.ALREADY_EXISTS:return am.ALREADY_EXISTS;case Og.PERMISSION_DENIED:return am.PERMISSION_DENIED;case Og.FAILED_PRECONDITION:return am.FAILED_PRECONDITION;case Og.ABORTED:return am.ABORTED;case Og.OUT_OF_RANGE:return am.OUT_OF_RANGE;case Og.UNIMPLEMENTED:return am.UNIMPLEMENTED;case Og.DATA_LOSS:return am.DATA_LOSS;default:return nm()}}(Rg=Og||(Og={}))[Rg.OK=0]="OK",Rg[Rg.CANCELLED=1]="CANCELLED",Rg[Rg.UNKNOWN=2]="UNKNOWN",Rg[Rg.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Rg[Rg.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Rg[Rg.NOT_FOUND=5]="NOT_FOUND",Rg[Rg.ALREADY_EXISTS=6]="ALREADY_EXISTS",Rg[Rg.PERMISSION_DENIED=7]="PERMISSION_DENIED",Rg[Rg.UNAUTHENTICATED=16]="UNAUTHENTICATED",Rg[Rg.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Rg[Rg.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Rg[Rg.ABORTED=10]="ABORTED",Rg[Rg.OUT_OF_RANGE=11]="OUT_OF_RANGE",Rg[Rg.UNIMPLEMENTED=12]="UNIMPLEMENTED",Rg[Rg.INTERNAL=13]="INTERNAL",Rg[Rg.UNAVAILABLE=14]="UNAVAILABLE",Rg[Rg.DATA_LOSS=15]="DATA_LOSS";var Vg=function(){function e(t,n){re(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return ae(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=ne(n);try{for(i.s();!(r=i.n()).done;){var a=s(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(c){i.e(c)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Em(this.inner,(function(t,n){var r,i=ne(n);try{for(i.s();!(r=i.n()).done;){var a=s(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(c){i.e(c)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Tm(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Bg=function(){function e(t,n){re(this,e),this.comparator=t,this.root=n||zg.EMPTY}return ae(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,zg.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,zg.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new qg(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new qg(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new qg(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new qg(this.root,e,this.comparator,!0)}}]),e}(),qg=function(){function e(t,n,r,i){re(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return ae(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),zg=function(){function e(t,n,r,i,a){re(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return ae(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw nm();if(this.right.isRed())throw nm();var e=this.left.check();if(e!==this.right.check())throw nm();return e+(this.isRed()?0:1)}}]),e}();zg.EMPTY=null,zg.RED=!0,zg.BLACK=!1,zg.EMPTY=new(function(){function e(){re(this,e),this.size=0}return ae(e,[{key:"key",get:function(){throw nm()}},{key:"value",get:function(){throw nm()}},{key:"color",get:function(){throw nm()}},{key:"left",get:function(){throw nm()}},{key:"right",get:function(){throw nm()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new zg(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Kg=function(){function e(t){re(this,e),this.comparator=t,this.data=new Bg(this.comparator)}return ae(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Wg(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Wg(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Wg=function(){function e(t){re(this,e),this.iter=t}return ae(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Hg(e){return e.hasNext()?e.getNext():void 0}var Gg=new Bg(Wm.comparator);function Qg(){return Gg}var Yg=new Bg(Wm.comparator);function $g(){return Yg}function Jg(){return new Vg((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var Xg=new Bg(Wm.comparator),Zg=new Kg(Wm.comparator);function ek(){for(var e=Zg,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var tk=new Kg(km);function nk(){return tk}var rk=function(){function e(t,n,r,i,a){re(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return ae(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,ik.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(_m.min(),r,nk(),Qg(),ek())}}]),e}(),ik=function(){function e(t,n,r,i,a){re(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return ae(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(Pm.EMPTY_BYTE_STRING,n,ek(),ek(),ek())}}]),e}(),ak=ae((function e(t,n,r,i){re(this,e),this.O=t,this.removedTargetIds=n,this.key=r,this.$=i})),ok=ae((function e(t,n){re(this,e),this.targetId=t,this.F=n})),uk=ae((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Pm.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;re(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),sk=function(){function e(){re(this,e),this.B=0,this.L=fk(),this.q=Pm.EMPTY_BYTE_STRING,this.U=!1,this.K=!0}return ae(e,[{key:"current",get:function(){return this.U}},{key:"resumeToken",get:function(){return this.q}},{key:"G",get:function(){return 0!==this.B}},{key:"j",get:function(){return this.K}},{key:"W",value:function(e){e.approximateByteSize()>0&&(this.K=!0,this.q=e)}},{key:"H",value:function(){var e=ek(),t=ek(),n=ek();return this.L.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:nm()}})),new ik(this.q,this.U,e,t,n)}},{key:"J",value:function(){this.K=!1,this.L=fk()}},{key:"Y",value:function(e,t){this.K=!0,this.L=this.L.insert(e,t)}},{key:"X",value:function(e){this.K=!0,this.L=this.L.remove(e)}},{key:"Z",value:function(){this.B+=1}},{key:"tt",value:function(){this.B-=1}},{key:"et",value:function(){this.K=!0,this.U=!0}}]),e}(),ck=function(){function e(t){re(this,e),this.nt=t,this.st=new Map,this.it=Qg(),this.rt=lk(),this.ot=new Kg(km)}return ae(e,[{key:"at",value:function(e){var t,n=ne(e.O);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.$&&e.$.isFoundDocument()?this.ut(r,e.$):this.ct(r,e.key,e.$)}}catch(u){n.e(u)}finally{n.f()}var i,a=ne(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.ct(o,e.key,e.$)}}catch(u){a.e(u)}finally{a.f()}}},{key:"ht",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.lt(n);switch(e.state){case 0:t.ft(n)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||t.removeTarget(n);break;case 3:t.ft(n)&&(r.et(),r.W(e.resumeToken));break;case 4:t.ft(n)&&(t.dt(n),r.W(e.resumeToken));break;default:nm()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((function(e,r){n.ft(r)&&t(r)}))}},{key:"_t",value:function(e){var t=e.targetId,n=e.F.count,r=this.wt(t);if(r){var i=r.target;if(Iy(i))if(0===n){var a=new Wm(i.path);this.ct(t,a,dy.newNoDocument(a,_m.min()))}else rm(1===n);else this.gt(t)!==n&&(this.dt(t),this.ot=this.ot.add(t))}}},{key:"yt",value:function(e){var t=this,n=new Map;this.st.forEach((function(r,i){var a=t.wt(i);if(a){if(r.current&&Iy(a.target)){var o=new Wm(a.target.path);null!==t.it.get(o)||t.It(i,o)||t.ct(i,o,dy.newNoDocument(o,e))}r.j&&(n.set(i,r.H()),r.J())}}));var r=ek();this.rt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.wt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.it.forEach((function(t,n){return n.setReadTime(e)}));var i=new rk(e,n,this.ot,this.it,r);return this.it=Qg(),this.rt=lk(),this.ot=new Kg(km),i}},{key:"ut",value:function(e,t){if(this.ft(e)){var n=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,n),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}}},{key:"ct",value:function(e,t,n){if(this.ft(e)){var r=this.lt(e);this.It(e,t)?r.Y(t,1):r.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),n&&(this.it=this.it.insert(t,n))}}},{key:"removeTarget",value:function(e){this.st.delete(e)}},{key:"gt",value:function(e){var t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Z",value:function(e){this.lt(e).Z()}},{key:"lt",value:function(e){var t=this.st.get(e);return t||(t=new sk,this.st.set(e,t)),t}},{key:"Tt",value:function(e){var t=this.rt.get(e);return t||(t=new Kg(km),this.rt=this.rt.insert(e,t)),t}},{key:"ft",value:function(e){var t=null!==this.wt(e);return t||Xv("WatchChangeAggregator","Detected inactive target",e),t}},{key:"wt",value:function(e){var t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}},{key:"dt",value:function(e){var t=this;this.st.set(e,new sk),this.nt.getRemoteKeysForTarget(e).forEach((function(n){t.ct(e,n,null)}))}},{key:"It",value:function(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}]),e}();function lk(){return new Bg(Wm.comparator)}function fk(){return new Bg(Wm.comparator)}var hk={asc:"ASCENDING",desc:"DESCENDING"},dk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pk=ae((function e(t,n){re(this,e),this.databaseId=t,this.N=n}));function vk(e,t){return e.N?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function mk(e,t){return e.N?t.toBase64():t.toUint8Array()}function yk(e,t){return vk(e,t.toTimestamp())}function gk(e){return rm(!!e),_m.fromTimestamp(function(e){var t=Rm(e);return new xm(t.seconds,t.nanos)}(e))}function kk(e,t){return function(e){return new Cm(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function bk(e){var t=Cm.fromString(e);return rm(zk(t)),t}function wk(e,t){return kk(e.databaseId,t.path)}function xk(e,t){var n=bk(t);if(n.get(1)!==e.databaseId.projectId)throw new om(am.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new om(am.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Wm(Tk(n))}function _k(e,t){return kk(e.databaseId,t)}function Ik(e){var t=bk(e);return 4===t.length?Cm.emptyPath():Tk(t)}function Ek(e){return new Cm(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Tk(e){return rm(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Sk(e,t,n){return{name:wk(e,t),fields:n.value.mapValue.fields}}function Ck(e,t,n){var r=xk(e,t.name),i=gk(t.updateTime),a=new fy({mapValue:{fields:t.fields}}),o=dy.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Nk(e,t){return"found"in t?function(e,t){rm(!!t.found),t.found.name,t.found.updateTime;var n=xk(e,t.found.name),r=gk(t.found.updateTime),i=new fy({mapValue:{fields:t.found.fields}});return dy.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){rm(!!t.missing),rm(!!t.readTime);var n=xk(e,t.missing),r=gk(t.readTime);return dy.newNoDocument(n,r)}(e,t):nm()}function Ak(e,t){var n;if(t instanceof Cg)n={update:Sk(e,t.key,t.value)};else if(t instanceof Lg)n={delete:wk(e,t.key)};else if(t instanceof Ng)n={update:Sk(e,t.key,t.data),updateMask:qk(t.fieldMask)};else{if(!(t instanceof Mg))return nm();n={verify:wk(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof lg)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof fg)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof dg)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof vg)return{fieldPath:t.field.canonicalString(),increment:n.k};throw nm()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:yk(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:nm()}(e,t.precondition)),n}function Dk(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?bg.updateTime(gk(e.updateTime)):void 0!==e.exists?bg.exists(e.exists):bg.none()}(t.currentDocument):bg.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)rm("REQUEST_TIME"===t.setToServerValue),n=new lg;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new fg(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new dg(i)}else"increment"in t?n=new vg(e,t.increment):nm();var a=Am.fromServerFormat(t.fieldPath);return new gg(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=xk(e,t.update.name),a=new fy({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Dm(t.map((function(e){return Am.fromServerFormat(e)})))}(t.updateMask);return new Ng(i,a,o,n,r)}return new Cg(i,a,n,r)}if(t.delete){var u=xk(e,t.delete);return new Lg(u,n)}if(t.verify){var s=xk(e,t.verify);return new Mg(s,n)}return nm()}function Pk(e,t){return{documents:[_k(e,t.path)]}}function Ok(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=_k(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=_k(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(ay(e.value))return{unaryFilter:{field:jk(e.field),op:"IS_NAN"}};if(iy(e.value))return{unaryFilter:{field:jk(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(ay(e.value))return{unaryFilter:{field:jk(e.field),op:"IS_NOT_NAN"}};if(iy(e.value))return{unaryFilter:{field:jk(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jk(e.field),op:Fk(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:jk(e.field),direction:Mk(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.N||qm(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Rk(e){var t=Ik(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){rm(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=Lk(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new My(Uk(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return qm(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Ly(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Ly(n,t)}(n.endAt)),By(t,i,u,o,s,"F",c,l)}function Lk(e){return e?void 0!==e.unaryFilter?[Bk(e)]:void 0!==e.fieldFilter?[Vk(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return Lk(e)})).reduce((function(e,t){return e.concat(t)})):nm():[]}function Mk(e){return hk[e]}function Fk(e){return dk[e]}function jk(e){return{fieldPath:e.canonicalString()}}function Uk(e){return Am.fromServerFormat(e.fieldPath)}function Vk(e){return Ty.create(Uk(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return nm()}}(e.fieldFilter.op),e.fieldFilter.value)}function Bk(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Uk(e.unaryFilter.field);return Ty.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Uk(e.unaryFilter.field);return Ty.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Uk(e.unaryFilter.field);return Ty.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Uk(e.unaryFilter.field);return Ty.create(i,"!=",{nullValue:"NULL_VALUE"});default:return nm()}}function qk(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function zk(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function Kk(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Hk(t)),t=Wk(e.get(n),t);return Hk(t)}function Wk(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Hk(e){return e+"\x01\x01"}function Gk(e){var t=e.length;if(rm(t>=2),2===t)return rm("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Cm.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&nm(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:nm()}a=o+2}return new Cm(r)}var Qk=["userId","batchId"];function Yk(e,t){return[e,Kk(t)]}function $k(e,t,n){return[e,Kk(t),n]}var Jk={},Xk=["parentPath","readTime"],Zk=["canonicalId","targetId"],eb=["targetId","path"],tb=["path","targetId"],nb=["collectionId","parent"],rb=["indexId","uid"],ib=["uid","sequenceNumber"],ab=["indexId","uid","arrayValue","directionalValue","documentKey"],ob=["indexId","uid","documentKey"],ub=["userId","collectionPath","documentId"],sb=["userId","collectionPath","largestBatchId"],cb=["userId","collectionGroup","largestBatchId"],lb=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),fb=[].concat(X(lb),["documentOverlays"]),hb=[].concat(X(fb),["indexConfiguration","indexState","indexEntries"]),db="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",pb=function(){function e(){re(this,e),this.onCommittedListeners=[]}return ae(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}(),vb=function(){function e(t){var n=this;re(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return ae(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&nm(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=ne(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}}]),e}(),mb=function(){function e(t,n){var r=this;re(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.At=new um,this.transaction.oncomplete=function(){r.At.resolve()},this.transaction.onabort=function(){n.error?r.At.reject(new kb(t,n.error)):r.At.resolve()},this.transaction.onerror=function(e){var n=Ib(e.target.error);r.At.reject(new kb(t,n))}}return ae(e,[{key:"Rt",get:function(){return this.At.promise}},{key:"abort",value:function(e){e&&this.At.reject(e),this.aborted||(Xv("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"bt",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new wb(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new kb(n,t)}}}]),e}(),yb=function(){function e(t,n,r){re(this,e),this.name=t,this.version=n,this.Pt=r,12.2===e.Vt(Se())&&Zv("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return ae(e,[{key:"Nt",value:function(){var e=ue(ce().mark((function e(t){var n=this;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return Xv("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new kb(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new om(am.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new om(am.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new kb(t,n))},i.onupgradeneeded=function(e){Xv("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.Pt.kt(t,i.transaction,e.oldVersion,n.version).next((function(){Xv("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.Mt&&(this.db.onversionchange=function(e){return n.Mt(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ot",value:function(e){this.Mt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=ue(ce().mark((function e(t,n,r,i){var a,o,u,s,c=this;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(ce().mark((function e(){var n,o;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Nt(t);case 2:return c.db=e.sent,n=mb.open(c.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.bt(),e})).catch((function(e){return n.abort(e),vb.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.Rt;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s="FirebaseError"!==e.t1.name&&o<3,Xv("SimpleDb","Transaction failed with error:",e.t1.message,"Retrying:",s),this.close(),s){e.next=15;break}return e.abrupt("return",Promise.reject(e.t1));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return Xv("SimpleDb","Removing database:",e),xb(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"vt",value:function(){if(!Oe())return!1;if(e.St())return!0;var t=Se(),n=e.Vt(t),r=0<n&&n<10,i=e.Dt(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"St",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyChTp5Ul-w9yGjUMlhhtB6-vf1_otnaDFg",REACT_APP_FIREBASE_AUTH_DOMAIN:"streamline-9ad12.firebaseapp.com",REACT_APP_FIREBASE_PROJECT_ID:"streamline-9ad12",REACT_APP_FIREBASE_STORAGE_BUCKET:"streamline-9ad12.appspot.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"361052811272",REACT_APP_FIREBASE_APP_ID:"1:361052811272:web:5085a904fbfe607ecf21bd",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-1G6JD8MKCY"})||void 0===e?void 0:e.Ct)}},{key:"xt",value:function(e,t){return e.store(t)}},{key:"Vt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"Dt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),gb=function(){function e(t){re(this,e),this.$t=t,this.Ft=!1,this.Bt=null}return ae(e,[{key:"isDone",get:function(){return this.Ft}},{key:"Lt",get:function(){return this.Bt}},{key:"cursor",set:function(e){this.$t=e}},{key:"done",value:function(){this.Ft=!0}},{key:"qt",value:function(e){this.Bt=e}},{key:"delete",value:function(){return xb(this.$t.delete())}}]),e}(),kb=function(e){he(n,e);var t=ye(n);function n(e,r){var i;return re(this,n),(i=t.call(this,am.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return ae(n)}(om);function bb(e){return"IndexedDbTransactionError"===e.name}var wb=function(){function e(t){re(this,e),this.store=t}return ae(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(Xv("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Xv("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),xb(n)}},{key:"add",value:function(e){return Xv("SimpleDb","ADD",this.store.name,e,e),xb(this.store.add(e))}},{key:"get",value:function(e){var t=this;return xb(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Xv("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return Xv("SimpleDb","DELETE",this.store.name,e),xb(this.store.delete(e))}},{key:"count",value:function(){return Xv("SimpleDb","COUNT",this.store.name),xb(this.store.count())}},{key:"Ut",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.Kt(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new vb((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"Gt",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new vb((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Qt",value:function(e,t){Xv("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.jt=!1;var r=this.cursor(n);return this.Kt(r,(function(e,t,n){return n.delete()}))}},{key:"Wt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Kt(r,t)}},{key:"zt",value:function(e){var t=this.cursor({});return new vb((function(n,r){t.onerror=function(e){var t=Ib(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"Kt",value:function(e,t){var n=[];return new vb((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new gb(i),o=t(i.primaryKey,i.value,a);if(o instanceof vb){var u=o.catch((function(e){return a.done(),vb.reject(e)}));n.push(u)}a.isDone?r():null===a.Lt?i.continue():i.continue(a.Lt)}else r()}})).next((function(){return vb.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.jt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function xb(e){return new vb((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Ib(e.target.error);n(t)}}))}var _b=!1;function Ib(e){var t=yb.Vt(Se());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new om("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return _b||(_b=!0,setTimeout((function(){throw r}),0)),r}}return e}var Eb=function(e){he(n,e);var t=ye(n);function n(e,r){var i;return re(this,n),(i=t.call(this)).Ht=e,i.currentSequenceNumber=r,i}return ae(n)}(pb);function Tb(e,t){var n=im(e);return yb.xt(n.Ht,t)}var Sb=function(){function e(t,n,r,i){re(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return ae(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&_g(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=ne(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&Ig(r,e,this.localWriteTime)}}catch(u){n.e(u)}finally{n.f()}var i,a=ne(this.mutations);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.key.isEqual(e.key)&&Ig(o,e,this.localWriteTime)}}catch(u){a.e(u)}finally{a.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(_m.min())}))}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),ek())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&bm(this.mutations,e.mutations,(function(e,t){return Tg(e,t)}))&&bm(this.baseMutations,e.baseMutations,(function(e,t){return Tg(e,t)}))}}]),e}(),Cb=function(){function e(t,n,r,i){re(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return ae(e,null,[{key:"from",value:function(t,n,r){rm(t.mutations.length===r.length);for(var i=Xg,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Nb=function(){function e(t,n){re(this,e),this.largestBatchId=t,this.mutation=n}return ae(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Ab=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:_m.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:_m.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Pm.EMPTY_BYTE_STRING;re(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return ae(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),Db=ae((function e(t){re(this,e),this.Jt=t}));function Pb(e,t){var n;if(t.document)n=Ck(e.Jt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Wm.fromSegments(t.noDocument.path),i=Fb(t.noDocument.readTime);n=dy.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return nm();var a=Wm.fromSegments(t.unknownDocument.path),o=Fb(t.unknownDocument.version);n=dy.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(Lb(t.readTime)),n}function Ob(e,t){var n=t.key.path.popLast().toArray(),r=Rb(t.readTime);if(t.isFoundDocument()){var i=function(e,t){return{name:wk(e,t.key),fields:t.data.value.mapValue.fields,updateTime:vk(e,t.version.toTimestamp())}}(e.Jt,t);return{document:i,hasCommittedMutations:t.hasCommittedMutations,readTime:r,parentPath:n}}if(t.isNoDocument()){var a=t.key.path.toArray(),o=t.hasCommittedMutations;return{noDocument:{path:a,readTime:Mb(t.version)},hasCommittedMutations:o,readTime:r,parentPath:n}}return t.isUnknownDocument()?{unknownDocument:{path:t.key.path.toArray(),version:Mb(t.version)},hasCommittedMutations:!0,readTime:r,parentPath:n}:nm()}function Rb(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Lb(e){var t=new xm(e[0],e[1]);return _m.fromTimestamp(t)}function Mb(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Fb(e){var t=new xm(e.seconds,e.nanoseconds);return _m.fromTimestamp(t)}function jb(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Dk(e.Jt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return Dk(e.Jt,t)})),u=xm.fromMillis(t.localWriteTimeMs);return new Sb(t.batchId,u,n,o)}function Ub(e){var t,n,r=Fb(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?Fb(e.lastLimboFreeSnapshotVersion):_m.min();return void 0!==e.query.documents?(rm(1===(n=e.query).documents.length),t=Yy(qy(Ik(n.documents[0])))):t=function(e){return Yy(Rk(e))}(e.query),new Ab(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Pm.fromBase64String(e.resumeToken))}function Vb(e,t){var n,r=Mb(t.snapshotVersion),i=Mb(t.lastLimboFreeSnapshotVersion);n=Iy(t.target)?Pk(e.Jt,t.target):Ok(e.Jt,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:xy(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function Bb(e){var t=Rk({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?$y(t,t.limit,"L"):t}function qb(e,t){return new Nb(t.largestBatchId,Dk(e.Jt,t.overlayMutation))}function zb(e,t){var n=t.path.lastSegment();return[e,Kk(t.path.popLast()),n]}var Kb=function(){function e(){re(this,e)}return ae(e,[{key:"getBundleMetadata",value:function(e,t){return Wb(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:Fb(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return Wb(e).put({bundleId:(n=t).id,createTime:Mb(gk(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return Hb(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:Bb(t.bundledQuery),readTime:Fb(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return Hb(e).put(function(e){return{name:e.name,readTime:Mb(gk(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function Wb(e){return Tb(e,"bundles")}function Hb(e){return Tb(e,"namedQueries")}var Gb=function(){function e(t,n){re(this,e),this.M=t,this.userId=n}return ae(e,[{key:"getOverlay",value:function(e,t){var n=this;return Qb(e).get(zb(this.userId,t)).next((function(e){return e?qb(n.M,e):null}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new Nb(t,a);i.push(r.Xt(e,o))})),vb.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(Kk(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(Qb(e).Qt("collectionPathOverlayIndex",i))})),vb.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=Jg(),a=Kk(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Qb(e).Ut("collectionPathOverlayIndex",o).next((function(e){var t,n=ne(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=qb(r.M,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=Jg(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Qb(e).Wt({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=qb(a.M,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"Xt",value:function(e,t){return Qb(e).put(function(e,t,n){var r=s(zb(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Ak(e.Jt,n.mutation)}}(this.M,this.userId,t))}}],[{key:"Yt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function Qb(e){return Tb(e,"documentOverlays")}var Yb=function(){function e(){re(this,e)}return ae(e,[{key:"Zt",value:function(e,t){this.te(e,t),t.ee()}},{key:"te",value:function(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Lm(e.integerValue));else if("doubleValue"in e){var n=Lm(e.doubleValue);isNaN(n)?this.ne(t,13):(this.ne(t,15),zm(n)?t.se(0):t.se(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie("".concat(r.seconds||"")),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ae(Mm(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ue(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ne(t,45),t.se(i.latitude||0),t.se(i.longitude||0)}else"mapValue"in e?sy(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):nm()}},{key:"re",value:function(e,t){this.ne(t,25),this.le(e,t)}},{key:"le",value:function(e,t){t.ie(e)}},{key:"ce",value:function(e,t){var n=e.fields||{};this.ne(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.re(a,t),this.te(n[a],t)}}},{key:"he",value:function(e,t){var n=e.values||[];this.ne(t,50);var r,i=ne(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.te(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ue",value:function(e,t){var n=this;this.ne(t,37),Wm.fromName(e).path.forEach((function(e){n.ne(t,60),n.le(e,t)}))}},{key:"ne",value:function(e,t){e.se(t)}},{key:"oe",value:function(e){e.se(2)}}]),e}();function $b(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Jb(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=$b(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Yb.fe=new Yb;var Xb=function(){function e(){re(this,e),this.buffer=new Uint8Array(1024),this.position=0}return ae(e,[{key:"de",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this._e(n.value),n=t.next();this.we()}},{key:"me",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.ge(n.value),n=t.next();this.ye()}},{key:"pe",value:function(e){var t,n=ne(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this._e(i);else if(i<2048)this._e(960|i>>>6),this._e(128|63&i);else if(r<"\ud800"||"\udbff"<r)this._e(480|i>>>12),this._e(128|63&i>>>6),this._e(128|63&i);else{var a=r.codePointAt(0);this._e(240|a>>>18),this._e(128|63&a>>>12),this._e(128|63&a>>>6),this._e(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.we()}},{key:"Ie",value:function(e){var t,n=ne(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.ge(i);else if(i<2048)this.ge(960|i>>>6),this.ge(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.ge(480|i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i);else{var a=r.codePointAt(0);this.ge(240|a>>>18),this.ge(128|63&a>>>12),this.ge(128|63&a>>>6),this.ge(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ye()}},{key:"Te",value:function(e){var t=this.Ee(e),n=Jb(t);this.Ae(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Re",value:function(e){var t=this.Ee(e),n=Jb(t);this.Ae(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"be",value:function(){this.Pe(255),this.Pe(255)}},{key:"Ve",value:function(){this.ve(255),this.ve(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Se",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ee",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"_e",value:function(e){var t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}},{key:"ge",value:function(e){var t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}},{key:"we",value:function(){this.Pe(0),this.Pe(1)}},{key:"ye",value:function(){this.ve(0),this.ve(1)}},{key:"Pe",value:function(e){this.Ae(1),this.buffer[this.position++]=e}},{key:"ve",value:function(e){this.Ae(1),this.buffer[this.position++]=~e}},{key:"Ae",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),Zb=function(){function e(t){re(this,e),this.De=t}return ae(e,[{key:"ae",value:function(e){this.De.de(e)}},{key:"ie",value:function(e){this.De.pe(e)}},{key:"se",value:function(e){this.De.Te(e)}},{key:"ee",value:function(){this.De.be()}}]),e}(),ew=function(){function e(t){re(this,e),this.De=t}return ae(e,[{key:"ae",value:function(e){this.De.me(e)}},{key:"ie",value:function(e){this.De.Ie(e)}},{key:"se",value:function(e){this.De.Re(e)}},{key:"ee",value:function(){this.De.Ve()}}]),e}(),tw=function(){function e(){re(this,e),this.De=new Xb,this.Ce=new Zb(this.De),this.xe=new ew(this.De)}return ae(e,[{key:"seed",value:function(e){this.De.seed(e)}},{key:"Ne",value:function(e){return 0===e?this.Ce:this.xe}},{key:"Se",value:function(){return this.De.Se()}},{key:"reset",value:function(){this.De.reset()}}]),e}(),nw=function(){function e(t,n,r,i){re(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return ae(e,[{key:"ke",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function rw(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=iw(e.arrayValue,t.arrayValue))?n:0!==(n=iw(e.directionalValue,t.directionalValue))?n:Wm.comparator(e.documentKey,t.documentKey)}function iw(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var aw=function(){function e(t){re(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Me=t.orderBy,this.Oe=[];var n,r=ne(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.S()?this.$e=i:this.Oe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return ae(e,[{key:"Fe",value:function(e){var t=vy(e);if(void 0!==t&&!this.Be(t))return!1;for(var n=my(e),r=0,i=0;r<n.length&&this.Be(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.$e){var a=n[r];if(!this.Le(this.$e,a)||!this.qe(this.Me[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Me.length||!this.qe(this.Me[i++],o))return!1}return!0}},{key:"Be",value:function(e){var t,n=ne(this.Oe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.Le(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"Le",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"qe",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),ow=function(){function e(){re(this,e),this.Ue=new uw}return ae(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.Ue.add(t),vb.resolve()}},{key:"getCollectionParents",value:function(e,t){return vb.resolve(this.Ue.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return vb.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return vb.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return vb.resolve(null)}},{key:"getFieldIndex",value:function(e,t){return vb.resolve(null)}},{key:"getFieldIndexes",value:function(e,t){return vb.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return vb.resolve(null)}},{key:"updateCollectionGroup",value:function(e,t,n){return vb.resolve()}},{key:"updateIndexEntries",value:function(e,t){return vb.resolve()}}]),e}(),uw=function(){function e(){re(this,e),this.index={}}return ae(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Kg(Cm.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Kg(Cm.comparator)).toArray()}}]),e}(),sw=new Uint8Array(0),cw=function(){function e(t){re(this,e),this.user=t,this.Ke=new uw,this.Ge=new Vg((function(e){return xy(e)}),(function(e,t){return _y(e,t)})),this.uid=t.uid||""}return ae(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Ke.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Ke.add(t)}));var a={collectionId:r,parent:Kk(i)};return lw(e).put(a)}return vb.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[wm(t),""],!1,!0);return lw(e).Ut(r).next((function(e){var r,i=ne(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(Gk(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=hw(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);return delete r.indexId,n.add(r).next()}},{key:"deleteFieldIndex",value:function(e,t){var n=hw(e),r=dw(e),i=fw(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=fw(e),i=!0,a=new Map;return vb.forEach(this.Qe(t),(function(t){return n.getFieldIndex(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=ek();return vb.forEach(a,(function(i,a){var o;Xv("IndexedDbIndexManager","Using index ".concat((o=i,"id=".concat(o.indexId,"|cg=").concat(o.collectionGroup,"|f=").concat(o.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(xy(t)));var u=function(e,t){var n=vy(t);if(void 0===n)return null;var r,i=ne(Ey(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),s=function(e,t){var n,r=new Map,i=ne(my(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=ne(Ey(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r,i=[],a=!0,o=ne(my(t));try{for(o.s();!(n=o.n()).done;){var u,s=n.value,c=void 0,l=!0,f=ne(Ey(e,s.fieldPath));try{for(f.s();!(u=f.n()).done;){var h=u.value,d=void 0,p=!0;switch(h.op){case"<":case"<=":d="nullValue"in(r=h.value)?Gm:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?ty(Bm.empty(),Wm.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?{mapValue:{}}:nm();break;case"==":case"in":case">=":d=h.value;break;case">":d=h.value,p=!1;break;case"!=":case"not-in":d=Gm}cy(c,d)===d&&(c=d,l=p)}}catch(y){f.e(y)}finally{f.f()}if(null!==e.startAt)for(var v=0;v<e.orderBy.length;++v)if(e.orderBy[v].field.isEqual(s.fieldPath)){var m=e.startAt.position[v];cy(c,m)===m&&(c=m,l=e.startAt.inclusive);break}if(void 0===c)return null;i.push(c),a&&(a=l)}}catch(y){o.e(y)}finally{o.f()}return new Ly(i,a)}(a,i),l=function(e,t){var n,r,i=[],a=!0,o=ne(my(t));try{for(o.s();!(n=o.n()).done;){var u,s=n.value,c=void 0,l=!0,f=ne(Ey(e,s.fieldPath));try{for(f.s();!(u=f.n()).done;){var h=u.value,d=void 0,p=!0;switch(h.op){case">=":case">":d="nullValue"in(r=h.value)?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?ty(Bm.empty(),Wm.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?{mapValue:{}}:"mapValue"in r?Hm:nm(),p=!1;break;case"==":case"in":case"<=":d=h.value;break;case"<":d=h.value,p=!1;break;case"!=":case"not-in":d=Hm}ly(c,d)===d&&(c=d,l=p)}}catch(y){f.e(y)}finally{f.f()}if(null!==e.endAt)for(var v=0;v<e.orderBy.length;++v)if(e.orderBy[v].field.isEqual(s.fieldPath)){var m=e.endAt.position[v];ly(c,m)===m&&(c=m,l=e.endAt.inclusive);break}if(void 0===c)return null;i.push(c),a&&(a=l)}}catch(y){o.e(y)}finally{o.f()}return new Ly(i,a)}(a,i),f=n.je(i,a,c),h=n.je(i,a,l),d=n.We(i,a,s),p=n.ze(i.indexId,u,f,!!c&&c.inclusive,h,!!l&&l.inclusive,d);return vb.forEach(p,(function(n){return r.Gt(n,t.limit).next((function(t){t.forEach((function(t){e=e.add(new Wm(Gk(t.documentKey)))}))}))}))})).next((function(){return e}))}return vb.resolve(null)}))}},{key:"Qe",value:function(e){var t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}},{key:"ze",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(null!=n?n.length:1,null!=i?i.length:1),c=s/(null!=t?t.length:1),l=[],f=function(s){var f=t?u.He(t[s/c]):sw,h=n?u.Je(e,f,n[s%c],r):u.Ye(e),d=i?u.Xe(e,f,i[s%c],a):u.Ye(e+1);l.push.apply(l,X(u.createRange(h,d,o.map((function(t){return u.Je(e,f,t,!0)})))))},h=0;h<s;++h)f(h);return l}},{key:"Je",value:function(e,t,n,r){var i=new nw(e,Wm.empty(),t,n);return r?i:i.ke()}},{key:"Xe",value:function(e,t,n,r){var i=new nw(e,Wm.empty(),t,n);return r?i.ke():i}},{key:"Ye",value:function(e){return new nw(e,Wm.empty(),sw,sw)}},{key:"getFieldIndex",value:function(e,t){var n=new aw(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t=e.filter((function(e){return n.Fe(e)}));return t.sort((function(e,t){return t.fields.length-e.fields.length})),t.length>0?t[0]:null}))}},{key:"Ze",value:function(e,t){var n,r=new tw,i=ne(my(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Ne(a.kind);Yb.fe.Zt(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Se()}},{key:"He",value:function(e){var t=new tw;return Yb.fe.Zt(e,t.Ne(0)),t.Se()}},{key:"We",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new tw);var i,a=0,o=ne(my(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=ne(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.tn(t,s.fieldPath)&&ry(c))r=this.en(r,s,c);else{var h=f.Ne(s.kind);Yb.fe.Zt(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.nn(r)}},{key:"je",value:function(e,t,n){return null==n?null:this.We(e,t,n.position)}},{key:"nn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Se();return t}},{key:"en",value:function(e,t,n){var r,i=X(e),a=[],o=ne(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=ne(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new tw;f.seed(l.Se()),Yb.fe.Zt(s,f.Ne(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"tn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof Ty&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=hw(e),i=dw(e);return(t?r.Ut("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.Ut()).next((function(e){var t=[];return vb.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new gy(t.sequenceNumber,new ky(Fb(t.readTime),new Wm(Gk(t.documentKey)),t.largestBatchId)):gy.empty(),r=e.fields.map((function(e){var t=s(e,2),n=t[0],r=t[1];return new yy(Am.fromServerFormat(n),r)}));return new py(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:km(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=hw(e),a=dw(e);return this.sn(e).next((function(e){return i.Ut("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return vb.forEach(t,(function(t){return a.put(function(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Mb(r.readTime),documentKey:Kk(r.documentKey.path),largestBatchId:r.largestBatchId}}(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return vb.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?vb.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),vb.forEach(a,(function(r){return n.rn(e,t,r).next((function(t){var a=n.on(i,r);return t.isEqual(a)?vb.resolve():n.an(e,i,t,a)}))}))}))}))}},{key:"un",value:function(e,t,n){return fw(e).put({indexId:n.indexId,uid:this.uid,arrayValue:n.arrayValue,directionalValue:n.directionalValue,documentKey:Kk(t.key.path)})}},{key:"cn",value:function(e,t,n){return fw(e).delete([n.indexId,this.uid,n.arrayValue,n.directionalValue,Kk(t.key.path)])}},{key:"rn",value:function(e,t,n){var r=fw(e),i=new Kg(rw);return r.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,Kk(t.path)])},(function(e,r){i=i.add(new nw(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"on",value:function(e,t){var n=new Kg(rw),r=this.Ze(t,e);if(null==r)return n;var i=vy(t);if(null!=i){var a=e.data.field(i.fieldPath);if(ry(a)){var o,u=ne(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new nw(t.indexId,e.key,this.He(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new nw(t.indexId,e.key,sw,r));return n}},{key:"an",value:function(e,t,n,r){var i=this;Xv("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var a=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=Hg(a),s=Hg(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=Hg(o)):l?(i(u),u=Hg(a)):(u=Hg(a),s=Hg(o))}}(n,r,rw,(function(n){a.push(i.un(e,t,n))}),(function(n){a.push(i.cn(e,t,n))})),vb.waitFor(a)}},{key:"sn",value:function(e){var t=1;return dw(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return rw(e,t)})).filter((function(e,t,n){return!t||0!==rw(e,n[t-1])}));var r=[];r.push(e);var i,a=ne(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=rw(o,e),s=rw(o,t);if(0===u)r[0]=e.ke();else if(u>0&&s<0)r.push(o),r.push(o.ke());else if(s>0)break}}catch(f){a.e(f)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,""],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,""]));return c}}]),e}();function lw(e){return Tb(e,"collectionParents")}function fw(e){return Tb(e,"indexEntries")}function hw(e){return Tb(e,"indexConfiguration")}function dw(e){return Tb(e,"indexState")}var pw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},vw=function(){function e(t,n,r){re(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return ae(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function mw(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Wt({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){rm(1===u)})));var c,l=[],f=ne(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=$k(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return vb.waitFor(a).next((function(){return l}))}function yw(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw nm();t=e.noDocument}return JSON.stringify(t).length}vw.DEFAULT_COLLECTION_PERCENTILE=10,vw.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vw.DEFAULT=new vw(41943040,vw.DEFAULT_COLLECTION_PERCENTILE,vw.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vw.DISABLED=new vw(-1,0,0);var gw=function(){function e(t,n,r,i){re(this,e),this.userId=t,this.M=n,this.indexManager=r,this.referenceDelegate=i,this.hn={}}return ae(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return bw(e).Wt({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=ww(e),o=bw(e);return o.add({}).next((function(u){rm("number"==typeof u);var s,c=new Sb(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return Ak(e.Jt,t)})),i=n.mutations.map((function(t){return Ak(e.Jt,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.M,i.userId,c),f=[],h=new Kg((function(e,t){return km(e.canonicalString(),t.canonicalString())})),d=ne(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=$k(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,Jk))}}catch(m){d.e(m)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.hn[u]=c.keys()})),vb.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return bw(e).get(t).next((function(e){return e?(rm(e.userId===n.userId),jb(n.M,e)):null}))}},{key:"ln",value:function(e,t){var n=this;return this.hn[t]?vb.resolve(this.hn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.hn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return bw(e).Wt({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(rm(t.batchId>=r),a=jb(n.M,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return bw(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return bw(e).Ut("userMutationsIndex",n).next((function(e){return e.map((function(e){return jb(t.M,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=Yk(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return ww(e).Wt({range:i},(function(r,i,o){var u=s(r,3),c=u[0],l=u[1],f=u[2],h=Gk(l);if(c===n.userId&&t.path.isEqual(h))return bw(e).get(f).next((function(e){if(!e)throw nm();rm(e.userId===n.userId),a.push(jb(n.M,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Kg(km),i=[];return t.forEach((function(t){var a=Yk(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=ww(e).Wt({range:o},(function(e,i,a){var o=s(e,3),u=o[0],c=o[1],l=o[2],f=Gk(c);u===n.userId&&t.path.isEqual(f)?r=r.add(l):a.done()}));i.push(u)})),vb.waitFor(i).next((function(){return n.fn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=Yk(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new Kg(km);return ww(e).Wt({range:o},(function(e,t,a){var o=s(e,3),c=o[0],l=o[1],f=o[2],h=Gk(l);c===n.userId&&r.isPrefixOf(h)?h.length===i&&(u=u.add(f)):a.done()})).next((function(){return n.fn(e,u)}))}},{key:"fn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(bw(e).get(t).next((function(e){if(null===e)throw nm();rm(e.userId===n.userId),r.push(jb(n.M,e))})))})),vb.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return mw(e.Ht,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.dn(t.batchId)})),vb.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"dn",value:function(e){delete this.hn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return vb.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return ww(e).Wt({range:r},(function(e,n,r){if(e[0]===t.userId){var a=Gk(e[1]);i.push(a)}else r.done()})).next((function(){rm(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return kw(e,this.userId,t)}},{key:"_n",value:function(e){var t=this;return xw(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"Yt",value:function(t,n,r,i){return rm(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function kw(e,t,n){var r=Yk(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return ww(e).Wt({range:a,jt:!0},(function(e,n,r){var a=s(e,3),u=a[0],c=a[1];a[2];u===t&&c===i&&(o=!0),r.done()})).next((function(){return o}))}function bw(e){return Tb(e,"mutations")}function ww(e){return Tb(e,"documentMutations")}function xw(e){return Tb(e,"mutationQueues")}var _w=function(){function e(t){re(this,e),this.wn=t}return ae(e,[{key:"next",value:function(){return this.wn+=2,this.wn}}],[{key:"mn",value:function(){return new e(0)}},{key:"gn",value:function(){return new e(-1)}}]),e}(),Iw=function(){function e(t,n){re(this,e),this.referenceDelegate=t,this.M=n}return ae(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.yn(e).next((function(n){var r=new _w(n.highestTargetId);return n.highestTargetId=r.next(),t.pn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.yn(e).next((function(e){return _m.fromTimestamp(new xm(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.yn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.yn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.pn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.In(e,t).next((function(){return n.yn(e).next((function(r){return r.targetCount+=1,n.Tn(t,r),n.pn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.In(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Ew(e).delete(t.targetId)})).next((function(){return n.yn(e)})).next((function(t){return rm(t.targetCount>0),t.targetCount-=1,n.pn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Ew(e).Wt((function(o,u){var s=Ub(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return vb.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return Ew(e).Wt((function(e,n){var r=Ub(n);t(r)}))}},{key:"yn",value:function(e){return Tw(e).get("targetGlobalKey").next((function(e){return rm(null!==e),e}))}},{key:"pn",value:function(e,t){return Tw(e).put("targetGlobalKey",t)}},{key:"In",value:function(e,t){return Ew(e).put(Vb(this.M,t))}},{key:"Tn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.yn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=xy(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Ew(e).Wt({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=Ub(n);_y(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Sw(e);return t.forEach((function(t){var o=Kk(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),vb.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Sw(e);return vb.forEach(t,(function(t){var a=Kk(t.path);return vb.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Sw(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Sw(e),i=ek();return r.Wt({range:n,jt:!0},(function(e,t,n){var r=Gk(e[1]),a=new Wm(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=Kk(t.path),r=IDBKeyRange.bound([n],[wm(n)],!1,!0),i=0;return Sw(e).Wt({index:"documentTargetsIndex",jt:!0,range:r},(function(e,t,n){var r=s(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"Et",value:function(e,t){return Ew(e).get(t).next((function(e){return e?Ub(e):null}))}}]),e}();function Ew(e){return Tb(e,"targets")}function Tw(e){return Tb(e,"targetGlobal")}function Sw(e){return Tb(e,"targetDocuments")}function Cw(e){return Nw.apply(this,arguments)}function Nw(){return Nw=ue(ce().mark((function e(t){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===am.FAILED_PRECONDITION&&t.message===db){e.next=2;break}throw t;case 2:Xv("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Nw.apply(this,arguments)}function Aw(e,t){var n=s(e,2),r=n[0],i=n[1],a=s(t,2),o=a[0],u=a[1],c=km(r,o);return 0===c?km(i,u):c}var Dw=function(){function e(t){re(this,e),this.En=t,this.buffer=new Kg(Aw),this.An=0}return ae(e,[{key:"Rn",value:function(){return++this.An}},{key:"bn",value:function(e){var t=[e,this.Rn()];if(this.buffer.size<this.En)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Aw(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),Pw=function(){function e(t,n){re(this,e),this.garbageCollector=t,this.asyncQueue=n,this.Pn=!1,this.Vn=null}return ae(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.vn(e)}},{key:"stop",value:function(){this.Vn&&(this.Vn.cancel(),this.Vn=null)}},{key:"started",get:function(){return null!==this.Vn}},{key:"vn",value:function(e){var t=this,n=this.Pn?3e5:6e4;Xv("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this.Vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,ue(ce().mark((function n(){return ce().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.Vn=null,t.Pn=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!bb(n.t0)){n.next=12;break}Xv("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,Cw(n.t0);case 14:return n.next=16,t.vn(e);case 16:case"end":return n.stop()}}),n,null,[[1,6]])}))))}}]),e}(),Ow=function(){function e(t,n){re(this,e),this.Sn=t,this.params=n}return ae(e,[{key:"calculateTargetCount",value:function(e,t){return this.Sn.Dn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return vb.resolve(mm.A);var r=new Dw(t);return this.Sn.forEachTarget(e,(function(e){return r.bn(e.sequenceNumber)})).next((function(){return n.Sn.Cn(e,(function(e){return r.bn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Sn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Sn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Xv("LruGarbageCollector","Garbage collection skipped; disabled"),vb.resolve(pw)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Xv("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),pw):n.xn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Sn.getCacheSize(e)}},{key:"xn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(Xv("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),Jv()<=ut.DEBUG&&Xv("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),vb.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),Rw=function(){function e(t,n){re(this,e),this.db=t,this.garbageCollector=function(e,t){return new Ow(e,t)}(this,n)}return ae(e,[{key:"Dn",value:function(e){var t=this.Nn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Nn",value:function(e){var t=0;return this.Cn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Cn",value:function(e,t){return this.kn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return Lw(e,n)}},{key:"removeReference",value:function(e,t,n){return Lw(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return Lw(e,t)}},{key:"Mn",value:function(e,t){return function(e,t){var n=!1;return xw(e).zt((function(r){return kw(e,r,t).next((function(e){return e&&(n=!0),vb.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.kn(e,(function(o,u){if(u<=t){var s=n.Mn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,_m.min()),Sw(e).delete([0,Kk(o.path)])}))}));i.push(s)}})).next((function(){return vb.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return Lw(e,t)}},{key:"kn",value:function(e,t){var n,r=Sw(e),i=mm.A;return r.Wt({index:"documentTargetsIndex"},(function(e,r){var a=s(e,2),o=a[0],u=(a[1],r.path),c=r.sequenceNumber;0===o?(i!==mm.A&&t(new Wm(Gk(n)),i),i=c,n=u):i=mm.A})).next((function(){i!==mm.A&&t(new Wm(Gk(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function Lw(e,t){return Sw(e).put(function(e,t){return{targetId:0,path:Kk(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var Mw=function(){function e(){re(this,e),this.changes=new Vg((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return ae(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,dy.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?vb.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),Fw=function(){function e(t){re(this,e),this.M=t}return ae(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return Vw(e).put(Bw(t),n)}},{key:"removeEntry",value:function(e,t){var n=Vw(e),r=Bw(t);return n.delete(r)}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.On(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this;return Vw(e).get(Bw(t)).next((function(e){return n.$n(t,e)}))}},{key:"Fn",value:function(e,t){var n=this;return Vw(e).get(Bw(t)).next((function(e){return{document:n.$n(t,e),size:yw(e)}}))}},{key:"getEntries",value:function(e,t){var n=this,r=Qg();return this.Bn(e,t,(function(e,t){var i=n.$n(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Ln",value:function(e,t){var n=this,r=Qg(),i=new Bg(Wm.comparator);return this.Bn(e,t,(function(e,t){var a=n.$n(e,t);r=r.insert(e,a),i=i.insert(e,yw(t))})).next((function(){return{documents:r,qn:i}}))}},{key:"Bn",value:function(e,t,n){if(t.isEmpty())return vb.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),a=i.getNext();return Vw(e).Wt({range:r},(function(e,t,r){for(var o=Wm.fromSegments(e);a&&Wm.comparator(a,o)<0;)n(a,null),a=i.getNext();a&&a.isEqual(o)&&(n(a,t),a=i.hasNext()?i.getNext():null),a?r.qt(a.path.toArray()):r.done()})).next((function(){for(;a;)n(a,null),a=i.hasNext()?i.getNext():null}))}},{key:"getAll",value:function(e,t,n){var r=this,i=Qg(),a=t.length+1,o={};if(n.isEqual(_m.min())){var u=t.toArray();o.range=IDBKeyRange.lowerBound(u)}else{var s=t.toArray(),c=Rb(n);o.range=IDBKeyRange.lowerBound([s,c],!0),o.index="collectionReadTimeIndex"}return Vw(e).Wt(o,(function(e,n,o){if(e.length===a){var u=r.$n(Wm.fromSegments(e),n);t.isPrefixOf(u.key.path)?i=i.insert(u.key,u):o.done()}})).next((function(){return i}))}},{key:"newChangeBuffer",value:function(e){return new jw(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return Uw(e).get("remoteDocumentGlobalKey").next((function(e){return rm(!!e),e}))}},{key:"On",value:function(e,t){return Uw(e).put("remoteDocumentGlobalKey",t)}},{key:"$n",value:function(e,t){if(t){var n=Pb(this.M,t);if(!n.isNoDocument()||!n.version.isEqual(_m.min()))return n}return dy.newInvalidDocument(e)}}]),e}(),jw=function(e){he(n,e);var t=ye(n);function n(e,r){var i;return re(this,n),(i=t.call(this)).Un=e,i.trackRemovals=r,i.Kn=new Vg((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return ae(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Kg((function(e,t){return km(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Kn.get(a);if(o.isValidDocument()){var s=Ob(t.Un.M,o);i=i.add(a.path.popLast());var c=yw(s);r+=c-u,n.push(t.Un.addEntry(e,a,s))}else if(r-=u,t.trackRemovals){var l=Ob(t.Un.M,o.convertToNoDocument(_m.min()));n.push(t.Un.addEntry(e,a,l))}else n.push(t.Un.removeEntry(e,a))})),i.forEach((function(r){n.push(t.Un.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Un.updateMetadata(e,r)),vb.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Un.Fn(e,t).next((function(e){return n.Kn.set(t,e.size),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Un.Ln(e,t).next((function(e){var t=e.documents;return e.qn.forEach((function(e,t){n.Kn.set(e,t)})),t}))}}]),n}(Mw);function Uw(e){return Tb(e,"remoteDocumentGlobal")}function Vw(e){return Tb(e,"remoteDocuments")}function Bw(e){return e.path.toArray()}var qw=function(){function e(t){re(this,e),this.M=t}return ae(e,[{key:"kt",value:function(e,t,n,r){var i=this,a=new mb("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Qk,{unique:!0}),e.createObjectStore("documentMutations")}(e),zw(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=vb.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),zw(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:_m.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").Ut().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Qk,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return vb.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Gn(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Qn(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.jn(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.Wn(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){var t=e.objectStore("remoteDocuments");t.createIndex("readTimeIndex","readTime",{unique:!1}),t.createIndex("collectionReadTimeIndex",Xk,{unique:!1})}(t)}))),n<10&&r>=10&&(o=o.next((function(){return i.zn(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:ub});t.createIndex("collectionPathOverlayIndex",sb,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",cb,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){!function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:rb}).createIndex("sequenceNumberIndex",ib,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:ab}).createIndex("documentKeyIndex",ob,{unique:!1})}(e)}))),o}},{key:"Qn",value:function(e){var t=0;return e.store("remoteDocuments").Wt((function(e,n){t+=yw(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Gn",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.Ut().next((function(n){return vb.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Ut("userMutationsIndex",i).next((function(r){return vb.forEach(r,(function(r){rm(r.userId===n.userId);var i=jb(t.M,r);return mw(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"jn",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Wt((function(n,i){var a=new Cm(n),o=function(e){return[0,Kk(e)]}(a);r.push(t.get(o).next((function(n){return n?vb.resolve():function(n){return t.put({targetId:0,path:Kk(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return vb.waitFor(r)}))}))}},{key:"Wn",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:nb});var n=t.store("collectionParents"),r=new uw,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Kk(i)})}};return t.store("remoteDocuments").Wt({jt:!0},(function(e,t){var n=new Cm(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Wt({jt:!0},(function(e,t){var n=s(e,3),r=(n[0],n[1]),a=(n[2],Gk(r));return i(a.popLast())}))}))}},{key:"zn",value:function(e){var t=this,n=e.store("targets");return n.Wt((function(e,r){var i=Ub(r),a=Vb(t.M,i);return n.put(a)}))}}]),e}();function zw(e){e.createObjectStore("targetDocuments",{keyPath:eb}).createIndex("documentTargetsIndex",tb,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Zk,{unique:!0}),e.createObjectStore("targetGlobal")}var Kw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Ww=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:12;if(re(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Hn=a,this.window=o,this.document=u,this.Jn=c,this.Yn=l,this.Xn=f,this.Zn=null,this.ts=!1,this.isPrimary=!1,this.networkEnabled=!0,this.es=null,this.inForeground=!1,this.ns=null,this.ss=null,this.rs=Number.NEGATIVE_INFINITY,this.os=function(e){return Promise.resolve()},!e.vt())throw new om(am.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Rw(this,i),this.us=n+"main",this.M=new Db(s),this.cs=new yb(this.us,this.Xn,new qw(this.M)),this.hs=new Iw(this.referenceDelegate,this.M),this.ls=function(e){return new Fw(e)}(this.M),this.fs=new Kb,this.window&&this.window.localStorage?this.ds=this.window.localStorage:(this.ds=null,!1===l&&Zv("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return ae(e,[{key:"start",value:function(){var e=this;return this._s().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new om(am.FAILED_PRECONDITION,Kw);return e.ws(),e.gs(),e.ys(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.hs.getHighestSequenceNumber(t)}))})).then((function(t){e.Zn=new mm(t,e.Jn)})).then((function(){e.ts=!0})).catch((function(t){return e.cs&&e.cs.close(),Promise.reject(t)}))}},{key:"ps",value:function(e){var t=this;return this.os=function(){var n=ue(ce().mark((function n(r){return ce().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.cs.Ot(function(){var t=ue(ce().mark((function t(n){return ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hn.enqueueAndForget(ue(ce().mark((function e(){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t._s();case 4:case"end":return e.stop()}}),e)})))))}},{key:"_s",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return Gw(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.Is(t).next((function(t){t||(e.isPrimary=!1,e.Hn.enqueueRetryable((function(){return e.os(!1)})))}))})).next((function(){return e.Ts(t)})).next((function(n){return e.isPrimary&&!n?e.Es(t).next((function(){return!1})):!!n&&e.As(t).next((function(){return!0}))}))})).catch((function(t){if(bb(t))return Xv("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Xv("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Hn.enqueueRetryable((function(){return e.os(t)})),e.isPrimary=t}))}},{key:"Is",value:function(e){var t=this;return Hw(e).get("owner").next((function(e){return vb.resolve(t.Rs(e))}))}},{key:"bs",value:function(e){return Gw(e).delete(this.clientId)}},{key:"Ps",value:function(){var e=ue(ce().mark((function e(){var t,n,r,i,a=this;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.Vs(this.rs,18e5)){e.next=6;break}return this.rs=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Tb(e,"clientMetadata");return t.Ut().next((function(e){var n=a.vs(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return vb.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.ds){n=ne(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.ds.removeItem(this.Ss(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ys",value:function(){var e=this;this.ss=this.Hn.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e._s().then((function(){return e.Ps()})).then((function(){return e.ys()}))}))}},{key:"Rs",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"Ts",value:function(e){var t=this;return this.Yn?vb.resolve(!0):Hw(e).get("owner").next((function(n){if(null!==n&&t.Vs(n.leaseTimestampMs,5e3)&&!t.Ds(n.ownerId)){if(t.Rs(n)&&t.networkEnabled)return!0;if(!t.Rs(n)){if(!n.allowTabSynchronization)throw new om(am.FAILED_PRECONDITION,Kw);return!1}}return!(!t.networkEnabled||!t.inForeground)||Gw(e).Ut().next((function(e){return void 0===t.vs(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Xv("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=ue(ce().mark((function e(){var t=this;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.ts=!1,this.Cs(),this.ss&&(this.ss.cancel(),this.ss=null),this.xs(),this.Ns(),e.next=7,this.cs.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Eb(e,mm.A);return t.Es(n).next((function(){return t.bs(n)}))}));case 7:this.cs.close(),this.ks();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"vs",value:function(e,t){var n=this;return e.filter((function(e){return n.Vs(e.updateTimeMs,t)&&!n.Ds(e.clientId)}))}},{key:"Ms",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return Gw(t).Ut().next((function(t){return e.vs(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.ts}},{key:"getMutationQueue",value:function(e,t){return gw.Yt(e,this.M,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.hs}},{key:"getRemoteDocumentCache",value:function(){return this.ls}},{key:"getIndexManager",value:function(e){return new cw(e)}},{key:"getDocumentOverlayCache",value:function(e){return Gb.Yt(this.M,e)}},{key:"getBundleCache",value:function(){return this.fs}},{key:"runTransaction",value:function(e,t,n){var r=this;Xv("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=13===(i=this.Xn)?hb:12===i?fb:11===i?lb:void nm();return this.cs.runTransaction(e,o,u,(function(i){return a=new Eb(i,r.Zn?r.Zn.next():mm.A),"readwrite-primary"===t?r.Is(a).next((function(e){return!!e||r.Ts(a)})).next((function(t){if(!t)throw Zv("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Hn.enqueueRetryable((function(){return r.os(!1)})),new om(am.FAILED_PRECONDITION,db);return n(a)})).next((function(e){return r.As(a).next((function(){return e}))})):r.Os(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Os",value:function(e){var t=this;return Hw(e).get("owner").next((function(e){if(null!==e&&t.Vs(e.leaseTimestampMs,5e3)&&!t.Ds(e.ownerId)&&!t.Rs(e)&&!(t.Yn||t.allowTabSynchronization&&e.allowTabSynchronization))throw new om(am.FAILED_PRECONDITION,Kw)}))}},{key:"As",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Hw(e).put("owner",t)}},{key:"Es",value:function(e){var t=this,n=Hw(e);return n.get("owner").next((function(e){return t.Rs(e)?(Xv("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):vb.resolve()}))}},{key:"Vs",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(Zv("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ws",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ns=function(){e.Hn.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e._s()}))},this.document.addEventListener("visibilitychange",this.ns),this.inForeground="visible"===this.document.visibilityState)}},{key:"xs",value:function(){this.ns&&(this.document.removeEventListener("visibilitychange",this.ns),this.ns=null)}},{key:"gs",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.es=function(){t.Cs(),!Ne()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Hn.enterRestrictedMode(!0),t.Hn.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.es))}},{key:"Ns",value:function(){this.es&&(this.window.removeEventListener("pagehide",this.es),this.es=null)}},{key:"Ds",value:function(e){var t;try{var n=null!==(null===(t=this.ds)||void 0===t?void 0:t.getItem(this.Ss(e)));return Xv("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Zv("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Cs",value:function(){if(this.ds)try{this.ds.setItem(this.Ss(this.clientId),String(Date.now()))}catch(Yf){Zv("Failed to set zombie client id.",Yf)}}},{key:"ks",value:function(){if(this.ds)try{this.ds.removeItem(this.Ss(this.clientId))}catch(Yf){}}},{key:"Ss",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"vt",value:function(){return yb.vt()}}]),e}();function Hw(e){return Tb(e,"owner")}function Gw(e){return Tb(e,"clientMetadata")}function Qw(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Yw=ae((function e(t,n){re(this,e),this.progress=t,this.$s=n})),$w=function(){function e(t,n,r){re(this,e),this.ls=t,this.Fs=n,this.indexManager=r}return ae(e,[{key:"Bs",value:function(e,t){var n=this;return this.Fs.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.Ls(e,t,r)}))}},{key:"Ls",value:function(e,t,n){return this.ls.getEntry(e,t).next((function(e){var t,r=ne(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(i){r.e(i)}finally{r.f()}return e}))}},{key:"qs",value:function(e,t){e.forEach((function(e,n){var r,i=ne(t);try{for(i.s();!(r=i.n()).done;){r.value.applyToLocalView(n)}}catch(a){i.e(a)}finally{i.f()}}))}},{key:"Us",value:function(e,t){var n=this;return this.ls.getEntries(e,t).next((function(t){return n.Ks(e,t).next((function(){return t}))}))}},{key:"Ks",value:function(e,t){var n=this;return this.Fs.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.qs(t,e)}))}},{key:"Gs",value:function(e,t,n){return function(e){return Wm.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Qs(e,t.path):Gy(t)?this.js(e,t,n):this.Ws(e,t,n)}},{key:"Qs",value:function(e,t){return this.Bs(e,new Wm(t)).next((function(e){var t=$g();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"js",value:function(e,t,n){var r=this,i=t.collectionGroup,a=$g();return this.indexManager.getCollectionParents(e,i).next((function(o){return vb.forEach(o,(function(o){var u=function(e,t){return new Vy(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.Ws(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"Ws",value:function(e,t,n){var r,i=this;return this.ls.getAll(e,t.path,n).next((function(n){return r=n,i.Fs.getAllMutationBatchesAffectingQuery(e,t)})).next((function(e){var t,n=ne(e);try{for(n.s();!(t=n.n()).done;){var i,a=t.value,o=ne(a.mutations);try{for(o.s();!(i=o.n()).done;){var u=i.value,s=u.key,c=r.get(s);null==c&&(c=dy.newInvalidDocument(s),r=r.insert(s,c)),Ig(u,c,a.localWriteTime),c.isFoundDocument()||(r=r.remove(s))}}catch(l){o.e(l)}finally{o.f()}}}catch(l){n.e(l)}finally{n.f()}})).next((function(){return r.forEach((function(e,n){eg(t,n)||(r=r.remove(e))})),r}))}}]),e}(),Jw=function(){function e(t,n,r,i){re(this,e),this.targetId=t,this.fromCache=n,this.zs=r,this.Hs=i}return ae(e,null,[{key:"Js",value:function(t,n){var r,i=ek(),a=ek(),o=ne(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),Xw=function(){function e(){re(this,e)}return ae(e,[{key:"Ys",value:function(e){this.Xs=e}},{key:"Gs",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(_m.min())?this.Zs(e,t):this.Xs.Us(e,r).next((function(a){var o=i.ti(t,a);return(zy(t)||Ky(t))&&i.ei(t.limitType,o,r,n)?i.Zs(e,t):(Jv()<=ut.DEBUG&&Xv("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Zy(t)),i.Xs.Gs(e,t,n).next((function(e){return o.forEach((function(t){e=e.insert(t.key,t)})),e})))}))}},{key:"ti",value:function(e,t){var n=new Kg(tg(e));return t.forEach((function(t,r){eg(e,r)&&(n=n.add(r))})),n}},{key:"ei",value:function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Zs",value:function(e,t){return Jv()<=ut.DEBUG&&Xv("QueryEngine","Using full collection scan to execute query:",Zy(t)),this.Xs.Gs(e,t,_m.min())}}]),e}(),Zw=function(){function e(t,n,r,i){re(this,e),this.persistence=t,this.ni=n,this.M=i,this.si=new Bg(km),this.ii=new Vg((function(e){return xy(e)}),_y),this.ri=_m.min(),this.oi=t.getRemoteDocumentCache(),this.hs=t.getTargetCache(),this.fs=t.getBundleCache(),this.ai(r)}return ae(e,[{key:"ai",value:function(e){this.indexManager=this.persistence.getIndexManager(e),this.Fs=this.persistence.getMutationQueue(e,this.indexManager),this.ui=new $w(this.oi,this.Fs,this.indexManager),this.oi.setIndexManager(this.indexManager),this.ni.Ys(this.ui)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.si)}))}}]),e}();function ex(e,t,n,r){return new Zw(e,t,n,r)}function tx(e,t){return nx.apply(this,arguments)}function nx(){return nx=ue(ce().mark((function e(t,n){var r;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=im(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.Fs.getAllMutationBatches(e).next((function(i){return t=i,r.ai(n),r.Fs.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=ek(),s=ne(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=ne(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=ne(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,y=ne(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;u=u.add(g.key)}}catch(k){y.e(k)}finally{y.f()}}}catch(k){p.e(k)}finally{p.f()}return r.ui.Us(e,u).next((function(e){return{ci:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),nx.apply(this,arguments)}function rx(e,t){var n=im(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.oi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=vb.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);rm(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.Fs.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.Fs.performConsistencyCheck(e)})).next((function(){return n.ui.Us(e,r)}))}))}function ix(e){var t=im(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.hs.getLastRemoteSnapshotVersion(e)}))}function ax(e,t){var n=im(e),r=t.snapshotVersion,i=n.si;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.oi.newChangeBuffer({trackRemovals:!0});i=n.si;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.hs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.hs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(Pm.EMPTY_BYTE_STRING,_m.min()).withLastLimboFreeSnapshotVersion(_m.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.hs.updateTargetData(e,c))}}));var u=Qg();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(ox(e,a,t.documentUpdates).next((function(e){u=e}))),!r.isEqual(_m.min())){var s=n.hs.getLastRemoteSnapshotVersion(e).next((function(t){return n.hs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(s)}return vb.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.ui.Ks(e,u)})).next((function(){return u}))})).then((function(e){return n.si=i,e}))}function ox(e,t,n){var r=ek();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=Qg();return n.forEach((function(n,i){var a=e.get(n);i.isNoDocument()&&i.version.isEqual(_m.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):Xv("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)})),r}))}function ux(e,t){var n=im(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.Fs.getNextMutationBatchAfterBatchId(e,t)}))}function sx(e,t){var n=im(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.hs.getTargetData(e,t).next((function(i){return i?(r=i,vb.resolve(r)):n.hs.allocateTargetId(e).next((function(i){return r=new Ab(t,i,0,e.currentSequenceNumber),n.hs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.si.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.si=n.si.insert(e.targetId,e),n.ii.set(t,e.targetId)),e}))}function cx(e,t,n){return lx.apply(this,arguments)}function lx(){return lx=ue(ce().mark((function e(t,n,r){var i,a,o;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=im(t),a=i.si.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),bb(e.t1)){e.next=12;break}throw e.t1;case 12:Xv("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.si=i.si.remove(n),i.ii.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),lx.apply(this,arguments)}function fx(e,t,n){var r=im(e),i=_m.min(),a=ek();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=im(e),i=r.ii.get(n);return void 0!==i?vb.resolve(r.si.get(i)):r.hs.getTargetData(t,n)}(r,e,Yy(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.hs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.ni.Gs(e,t,n?i:_m.min(),n?a:ek())})).next((function(e){return{documents:e,hi:a}}))}))}function hx(e,t){var n=im(e),r=im(n.hs),i=n.si.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.Et(e,t).next((function(e){return e?e.target:null}))}))}function dx(e){var t=im(e);return t.persistence.runTransaction("Get new document changes","readonly",(function(e){return function(e,t,n){var r=im(e),i=Qg(),a=Rb(n),o=Vw(t),u=IDBKeyRange.lowerBound(a,!0);return o.Wt({index:"readTimeIndex",range:u},(function(e,t){var n=Pb(r.M,t);i=i.insert(n.key,n),a=t.readTime})).next((function(){return{$s:i,readTime:Lb(a)}}))}(t.oi,e,t.ri)})).then((function(e){var n=e.$s,r=e.readTime;return t.ri=r,n}))}function px(e){return vx.apply(this,arguments)}function vx(){return vx=ue(ce().mark((function e(t){var n;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=im(t),e.abrupt("return",n.persistence.runTransaction("Synchronize last document change read time","readonly",(function(e){return function(e){var t=Vw(e),n=_m.min();return t.Wt({index:"readTimeIndex",reverse:!0},(function(e,t,r){t.readTime&&(n=Lb(t.readTime)),r.done()})).next((function(){return n}))}(e)})).then((function(e){n.ri=e})));case 2:case"end":return e.stop()}}),e)}))),vx.apply(this,arguments)}function mx(e,t,n,r){return yx.apply(this,arguments)}function yx(){return yx=ue(ce().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=im(t),o=ek(),u=Qg(),s=ne(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.li(l.metadata.name),l.document&&(o=o.add(f)),(h=n.fi(l)).setReadTime(n.di(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a.oi.newChangeBuffer({trackRemovals:!0}),e.next=7,sx(a,function(e){return Yy(qy(Cm.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return ox(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.hs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.hs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.ui.Ks(e,t)})).next((function(){return t}))}))})));case 9:case"end":return e.stop()}}),e)}))),yx.apply(this,arguments)}function gx(e,t){return kx.apply(this,arguments)}function kx(){return kx=ue(ce().mark((function e(t,n){var r,i,a,o=arguments;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:ek(),e.next=3,sx(t,Yy(Bb(n.bundledQuery)));case 3:return i=e.sent,a=im(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=gk(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.fs.saveNamedQuery(e,n);var o=i.withResumeToken(Pm.EMPTY_BYTE_STRING,t);return a.si=a.si.insert(o.targetId,o),a.hs.updateTargetData(e,o).next((function(){return a.hs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.hs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.fs.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),kx.apply(this,arguments)}var bx=function(){function e(t){re(this,e),this.M=t,this._i=new Map,this.wi=new Map}return ae(e,[{key:"getBundleMetadata",value:function(e,t){return vb.resolve(this._i.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this._i.set(t.id,{id:(n=t).id,version:n.version,createTime:gk(n.createTime)}),vb.resolve()}},{key:"getNamedQuery",value:function(e,t){return vb.resolve(this.wi.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.wi.set(t.name,function(e){return{name:e.name,query:Bb(e.bundledQuery),readTime:gk(e.readTime)}}(t)),vb.resolve()}}]),e}(),wx=function(){function e(){re(this,e),this.overlays=new Bg(Wm.comparator),this.mi=new Map}return ae(e,[{key:"getOverlay",value:function(e,t){return vb.resolve(this.overlays.get(t))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.Xt(e,t,i)})),vb.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.mi.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.mi.delete(n)),vb.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Jg(),i=t.length+1,a=new Wm(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return vb.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Bg((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=Jg(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=Jg(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return vb.resolve(s)}},{key:"Xt",value:function(e,t,n){if(null!==n){var r=this.overlays.get(n.key);if(null!==r){var i=this.mi.get(r.largestBatchId).delete(n.key);this.mi.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Nb(t,n));var a=this.mi.get(t);void 0===a&&(a=ek(),this.mi.set(t,a)),this.mi.set(t,a.add(n.key))}}}]),e}(),xx=function(){function e(){re(this,e),this.gi=new Kg(_x.yi),this.pi=new Kg(_x.Ii)}return ae(e,[{key:"isEmpty",value:function(){return this.gi.isEmpty()}},{key:"addReference",value:function(e,t){var n=new _x(e,t);this.gi=this.gi.add(n),this.pi=this.pi.add(n)}},{key:"Ti",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.Ei(new _x(e,t))}},{key:"Ai",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Ri",value:function(e){var t=this,n=new Wm(new Cm([])),r=new _x(n,e),i=new _x(n,e+1),a=[];return this.pi.forEachInRange([r,i],(function(e){t.Ei(e),a.push(e.key)})),a}},{key:"bi",value:function(){var e=this;this.gi.forEach((function(t){return e.Ei(t)}))}},{key:"Ei",value:function(e){this.gi=this.gi.delete(e),this.pi=this.pi.delete(e)}},{key:"Pi",value:function(e){var t=new Wm(new Cm([])),n=new _x(t,e),r=new _x(t,e+1),i=ek();return this.pi.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new _x(e,0),n=this.gi.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),_x=function(){function e(t,n){re(this,e),this.key=t,this.Vi=n}return ae(e,null,[{key:"yi",value:function(e,t){return Wm.comparator(e.key,t.key)||km(e.Vi,t.Vi)}},{key:"Ii",value:function(e,t){return km(e.Vi,t.Vi)||Wm.comparator(e.key,t.key)}}]),e}(),Ix=function(){function e(t,n){re(this,e),this.indexManager=t,this.referenceDelegate=n,this.Fs=[],this.vi=1,this.Si=new Kg(_x.yi)}return ae(e,[{key:"checkEmpty",value:function(e){return vb.resolve(0===this.Fs.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.vi;this.vi++,this.Fs.length>0&&this.Fs[this.Fs.length-1];var a=new Sb(i,t,n,r);this.Fs.push(a);var o,u=ne(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.Si=this.Si.add(new _x(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return vb.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return vb.resolve(this.Di(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.Ci(n),i=r<0?0:r;return vb.resolve(this.Fs.length>i?this.Fs[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return vb.resolve(0===this.Fs.length?-1:this.vi-1)}},{key:"getAllMutationBatches",value:function(e){return vb.resolve(this.Fs.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new _x(t,0),i=new _x(t,Number.POSITIVE_INFINITY),a=[];return this.Si.forEachInRange([r,i],(function(e){var t=n.Di(e.Vi);a.push(t)})),vb.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Kg(km);return t.forEach((function(e){var t=new _x(e,0),i=new _x(e,Number.POSITIVE_INFINITY);n.Si.forEachInRange([t,i],(function(e){r=r.add(e.Vi)}))})),vb.resolve(this.xi(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Wm.isDocumentKey(i)||(i=i.child(""));var a=new _x(new Wm(i),0),o=new Kg(km);return this.Si.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Vi)),!0)}),a),vb.resolve(this.xi(o))}},{key:"xi",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.Di(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;rm(0===this.Ni(t.batchId,"removed")),this.Fs.shift();var r=this.Si;return vb.forEach(t.mutations,(function(i){var a=new _x(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Si=r}))}},{key:"dn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new _x(t,0),r=this.Si.firstAfterOrEqual(n);return vb.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.Fs.length,vb.resolve()}},{key:"Ni",value:function(e,t){return this.Ci(e)}},{key:"Ci",value:function(e){return 0===this.Fs.length?0:e-this.Fs[0].batchId}},{key:"Di",value:function(e){var t=this.Ci(e);return t<0||t>=this.Fs.length?null:this.Fs[t]}}]),e}(),Ex=function(){function e(t){re(this,e),this.ki=t,this.docs=new Bg(Wm.comparator),this.size=0}return ae(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.ki(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return vb.resolve(n?n.document.mutableCopy():dy.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Qg();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():dy.newInvalidDocument(e))})),vb.resolve(r)}},{key:"getAll",value:function(e,t,n){for(var r=Qg(),i=new Wm(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||s.readTime.compareTo(n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return vb.resolve(r)}},{key:"Mi",value:function(e,t){return vb.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Tx(this)}},{key:"getSize",value:function(e){return vb.resolve(this.size)}}]),e}(),Tx=function(e){he(n,e);var t=ye(n);function n(e){var r;return re(this,n),(r=t.call(this)).Un=e,r}return ae(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Un.addEntry(e,i)):t.Un.removeEntry(r)})),vb.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Un.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Un.getEntries(e,t)}}]),n}(Mw),Sx=function(){function e(t){re(this,e),this.persistence=t,this.Oi=new Vg((function(e){return xy(e)}),_y),this.lastRemoteSnapshotVersion=_m.min(),this.highestTargetId=0,this.$i=0,this.Fi=new xx,this.targetCount=0,this.Bi=_w.mn()}return ae(e,[{key:"forEachTarget",value:function(e,t){return this.Oi.forEach((function(e,n){return t(n)})),vb.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return vb.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return vb.resolve(this.$i)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Bi.next(),vb.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.$i&&(this.$i=t),vb.resolve()}},{key:"In",value:function(e){this.Oi.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Bi=new _w(t),this.highestTargetId=t),e.sequenceNumber>this.$i&&(this.$i=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.In(t),this.targetCount+=1,vb.resolve()}},{key:"updateTargetData",value:function(e,t){return this.In(t),vb.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Oi.delete(t.target),this.Fi.Ri(t.targetId),this.targetCount-=1,vb.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Oi.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Oi.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),vb.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return vb.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Oi.get(t)||null;return vb.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Fi.Ti(t,n),vb.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Fi.Ai(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),vb.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Fi.Ri(t),vb.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Fi.Pi(t);return vb.resolve(n)}},{key:"containsKey",value:function(e,t){return vb.resolve(this.Fi.containsKey(t))}}]),e}(),Cx=function(){function e(t,n){var r=this;re(this,e),this.Li={},this.overlays={},this.Zn=new mm(0),this.ts=!1,this.ts=!0,this.referenceDelegate=t(this),this.hs=new Sx(this),this.indexManager=new ow,this.ls=new Ex((function(e){return r.referenceDelegate.qi(e)})),this.M=new Db(n),this.fs=new bx(this.M)}return ae(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.ts=!1,Promise.resolve()}},{key:"started",get:function(){return this.ts}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new wx,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Li[e.toKey()];return n||(n=new Ix(t,this.referenceDelegate),this.Li[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.hs}},{key:"getRemoteDocumentCache",value:function(){return this.ls}},{key:"getBundleCache",value:function(){return this.fs}},{key:"runTransaction",value:function(e,t,n){var r=this;Xv("MemoryPersistence","Starting transaction:",e);var i=new Nx(this.Zn.next());return this.referenceDelegate.Ui(),n(i).next((function(e){return r.referenceDelegate.Ki(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Gi",value:function(e,t){return vb.or(Object.values(this.Li).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Nx=function(e){he(n,e);var t=ye(n);function n(e){var r;return re(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return ae(n)}(pb),Ax=function(){function e(t){re(this,e),this.persistence=t,this.Qi=new xx,this.ji=null}return ae(e,[{key:"zi",get:function(){if(this.ji)return this.ji;throw nm()}},{key:"addReference",value:function(e,t,n){return this.Qi.addReference(n,t),this.zi.delete(n.toString()),vb.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Qi.removeReference(n,t),this.zi.add(n.toString()),vb.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.zi.add(t.toString()),vb.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Qi.Ri(t.targetId).forEach((function(e){return n.zi.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.zi.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Ui",value:function(){this.ji=new Set}},{key:"Ki",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return vb.forEach(this.zi,(function(r){var i=Wm.fromPath(r);return t.Hi(e,i).next((function(e){e||n.removeEntry(i,_m.min())}))})).next((function(){return t.ji=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Hi(e,t).next((function(e){e?n.zi.delete(t.toString()):n.zi.add(t.toString())}))}},{key:"qi",value:function(e){return 0}},{key:"Hi",value:function(e,t){var n=this;return vb.or([function(){return vb.resolve(n.Qi.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Gi(e,t)}])}}],[{key:"Wi",value:function(t){return new e(t)}}]),e}();function Dx(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Px(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Ox(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Rx=function(){function e(t,n,r,i){re(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return ae(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new om(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(Zv("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),Lx=function(){function e(t,n,r){re(this,e),this.targetId=t,this.state=n,this.error=r}return ae(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new om(i.error.code,i.error.message))),a?new e(t,i.state,r):(Zv("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),Mx=function(){function e(t,n){re(this,e),this.clientId=t,this.activeTargetIds=n}return ae(e,null,[{key:"Ji",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=nk(),o=0;i&&o<r.activeTargetIds.length;++o)i=Km(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(Zv("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),Fx=function(){function e(t,n){re(this,e),this.clientId=t,this.onlineState=n}return ae(e,null,[{key:"Ji",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Zv("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),jx=function(){function e(){re(this,e),this.activeTargetIds=nk()}return ae(e,[{key:"Xi",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Zi",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Yi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Ux=function(){function e(t,n,r,i,a){re(this,e),this.window=t,this.Hn=n,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Bg(km),this.started=!1,this.ir=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.rr=Dx(this.persistenceKey,this.tr),this.ar=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.sr=this.sr.insert(this.tr,new jx),this.ur=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.cr=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.hr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.lr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.dr=function(e){return"firestore_bundle_loaded_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.er)}return ae(e,[{key:"start",value:function(){var e=ue(ce().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Ms();case 2:t=e.sent,n=ne(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.tr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(Dx(this.persistenceKey,i)))&&(o=Mx.Ji(i,a))&&(this.sr=this.sr.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this._r(),(u=this.storage.getItem(this.lr))&&(s=this.wr(u))&&this.mr(s),c=ne(this.ir);try{for(c.s();!(l=c.n()).done;)f=l.value,this.nr(f)}catch(d){c.e(d)}finally{c.f()}this.ir=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.ar,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.gr(this.sr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.sr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.yr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.yr(e,t,n),this.pr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Ox(this.persistenceKey,e));if(n){var r=Lx.Ji(e,n);r&&(t=r.state)}}return this.Ir.Xi(e),this._r(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Ir.Zi(e),this._r()}},{key:"isLocalQueryTarget",value:function(e){return this.Ir.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Ox(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Tr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.pr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Er(e)}},{key:"notifyBundleLoaded",value:function(){this.Ar()}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return Xv("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){Xv("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){Xv("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"nr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Xv("SharedClientState","EVENT",n.key,n.newValue),n.key===this.rr)return void Zv("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hn.enqueueRetryable(ue(ce().mark((function e(){var r,i,a,o,u,s;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=41;break}if(null===n.key){e.next=39;break}if(!t.ur.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Rr(n.key),e.abrupt("return",t.br(r,null));case 6:if(!(i=t.Pr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.br(i.clientId,i));case 9:e.next=39;break;case 11:if(!t.cr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Vr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.vr(a));case 16:e.next=39;break;case 18:if(!t.hr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Sr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Dr(o));case 23:e.next=39;break;case 25:if(n.key!==t.lr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.wr(n.newValue))){e.next=30;break}return e.abrupt("return",t.mr(u));case 30:e.next=39;break;case 32:if(n.key!==t.ar){e.next=37;break}s=function(e){var t=mm.A;if(null!=e)try{var n=JSON.parse(e);rm("number"==typeof n),t=n}catch(e){Zv("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==mm.A&&t.sequenceNumberHandler(s),e.next=39;break;case 37:if(n.key!==t.dr){e.next=39;break}return e.abrupt("return",t.syncEngine.Cr());case 39:e.next=42;break;case 41:t.ir.push(n);case 42:case"end":return e.stop()}}),e)}))))}}},{key:"Ir",get:function(){return this.sr.get(this.tr)}},{key:"_r",value:function(){this.setItem(this.rr,this.Ir.Yi())}},{key:"yr",value:function(e,t,n){var r=new Rx(this.currentUser,e,t,n),i=Px(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Yi())}},{key:"pr",value:function(e){var t=Px(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Er",value:function(e){var t={clientId:this.tr,onlineState:e};this.storage.setItem(this.lr,JSON.stringify(t))}},{key:"Tr",value:function(e,t,n){var r=Ox(this.persistenceKey,e),i=new Lx(e,t,n);this.setItem(r,i.Yi())}},{key:"Ar",value:function(){this.setItem(this.dr,"value-not-used")}},{key:"Rr",value:function(e){var t=this.ur.exec(e);return t?t[1]:null}},{key:"Pr",value:function(e,t){var n=this.Rr(e);return Mx.Ji(n,t)}},{key:"Vr",value:function(e,t){var n=this.cr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Rx.Ji(new Qv(i),r,t)}},{key:"Sr",value:function(e,t){var n=this.hr.exec(e),r=Number(n[1]);return Lx.Ji(r,t)}},{key:"wr",value:function(e){return Fx.Ji(e)}},{key:"vr",value:function(){var e=ue(ce().mark((function e(t){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Nr(t.batchId,t.state,t.error));case 2:Xv("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Dr",value:function(e){return this.syncEngine.kr(e.targetId,e.state,e.error)}},{key:"br",value:function(e,t){var n=this,r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),a=this.gr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Mr(o,u).then((function(){n.sr=r}))}},{key:"mr",value:function(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"gr",value:function(e){var t=nk();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"vt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),Vx=function(){function e(){re(this,e),this.Or=new jx,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return ae(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Or.Xi(e),this.$r[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.$r[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Or.Zi(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Or.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.$r[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Or.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Or.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Or=new jx,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(){}}]),e}(),Bx=function(){function e(){re(this,e)}return ae(e,[{key:"Fr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),qx=function(){function e(){var t=this;re(this,e),this.Br=function(){return t.Lr()},this.qr=function(){return t.Ur()},this.Kr=[],this.Gr()}return ae(e,[{key:"Fr",value:function(e){this.Kr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Br),window.removeEventListener("offline",this.qr)}},{key:"Gr",value:function(){window.addEventListener("online",this.Br),window.addEventListener("offline",this.qr)}},{key:"Lr",value:function(){Xv("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=ne(this.Kr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Ur",value:function(){Xv("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=ne(this.Kr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"vt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),zx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Kx=function(){function e(t){re(this,e),this.Qr=t.Qr,this.jr=t.jr}return ae(e,[{key:"Wr",value:function(e){this.zr=e}},{key:"Hr",value:function(e){this.Jr=e}},{key:"onMessage",value:function(e){this.Yr=e}},{key:"close",value:function(){this.jr()}},{key:"send",value:function(e){this.Qr(e)}},{key:"Xr",value:function(){this.zr()}},{key:"Zr",value:function(e){this.Jr(e)}},{key:"eo",value:function(e){this.Yr(e)}}]),e}(),Wx=function(e){he(n,e);var t=ye(n);function n(e){var r;return re(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return ae(n,[{key:"ao",value:function(e,t,n,r){return new Promise((function(i,a){var o=new Hv;o.listenOnce(Bv.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case Vv.NO_ERROR:var t=o.getResponseJson();Xv("Connection","XHR received:",JSON.stringify(t)),i(t);break;case Vv.TIMEOUT:Xv("Connection",'RPC "'+e+'" timed out'),a(new om(am.DEADLINE_EXCEEDED,"Request time out"));break;case Vv.HTTP_ERROR:var n=o.getStatus();if(Xv("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(am).indexOf(t)>=0?t:am.UNKNOWN}(r.status);a(new om(u,r.message))}else a(new om(am.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new om(am.UNAVAILABLE,"Connection failed."));break;default:nm()}}finally{Xv("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"co",value:function(e,t,n){var r=[this.no,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=jv(),a=Uv(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Kv({})),this.oo(o.initMessageHeaders,t,n),Ce()||De()||Se().indexOf("Electron/")>=0||Pe()||Se().indexOf("MSAppHost/")>=0||Ae()||(o.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");Xv("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new Kx({Qr:function(e){l?Xv("Connection","Not sending because WebChannel is closed:",e):(c||(Xv("Connection","Opening WebChannel transport."),s.open(),c=!0),Xv("Connection","WebChannel sending:",e),s.send(e))},jr:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,Wv.EventType.OPEN,(function(){l||Xv("Connection","WebChannel transport opened.")})),h(s,Wv.EventType.CLOSE,(function(){l||(l=!0,Xv("Connection","WebChannel transport closed"),f.Zr())})),h(s,Wv.EventType.ERROR,(function(e){l||(l=!0,em("Connection","WebChannel transport errored:",e),f.Zr(new om(am.UNAVAILABLE,"The operation could not be completed")))})),h(s,Wv.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];rm(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){Xv("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=Og[e];if(void 0!==t)return Ug(t)}(a),u=i.message;void 0===o&&(o=am.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.Zr(new om(o,u)),s.close()}else Xv("Connection","WebChannel received:",n),f.eo(n)}})),h(a,qv.STAT_EVENT,(function(e){e.stat===zv.PROXY?Xv("Connection","Detected buffering proxy"):e.stat===zv.NOPROXY&&Xv("Connection","Detected no buffering proxy")})),setTimeout((function(){f.Xr()}),0),f}}]),n}(function(){function e(t){re(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.no=n+"://"+t.host,this.so="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return ae(e,[{key:"io",value:function(e,t,n,r,i){var a=this.ro(e,t);Xv("RestConnection","Sending: ",a,n);var o={};return this.oo(o,r,i),this.ao(e,a,o,n).then((function(e){return Xv("RestConnection","Received: ",e),e}),(function(t){throw em("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"uo",value:function(e,t,n,r,i){return this.io(e,t,n,r,i)}},{key:"oo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Yv,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ro",value:function(e,t){var n=zx[e];return"".concat(this.no,"/v1/").concat(t,":").concat(n)}}]),e}());function Hx(){return"undefined"!=typeof window?window:null}function Gx(){return"undefined"!=typeof document?document:null}function Qx(e){return new pk(e,!0)}var Yx=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;re(this,e),this.Hn=t,this.timerId=n,this.ho=r,this.lo=i,this.fo=a,this._o=0,this.wo=null,this.mo=Date.now(),this.reset()}return ae(e,[{key:"reset",value:function(){this._o=0}},{key:"yo",value:function(){this._o=this.fo}},{key:"po",value:function(e){var t=this;this.cancel();var n=Math.floor(this._o+this.Io()),r=Math.max(0,Date.now()-this.mo),i=Math.max(0,n-r);i>0&&Xv("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this._o," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.wo=this.Hn.enqueueAfterDelay(this.timerId,i,(function(){return t.mo=Date.now(),e()})),this._o*=this.lo,this._o<this.ho&&(this._o=this.ho),this._o>this.fo&&(this._o=this.fo)}},{key:"To",value:function(){null!==this.wo&&(this.wo.skipDelay(),this.wo=null)}},{key:"cancel",value:function(){null!==this.wo&&(this.wo.cancel(),this.wo=null)}},{key:"Io",value:function(){return(Math.random()-.5)*this._o}}]),e}(),$x=function(){function e(t,n,r,i,a,o,u,s){re(this,e),this.Hn=t,this.Eo=r,this.Ao=i,this.Ro=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.bo=0,this.Po=null,this.Vo=null,this.stream=null,this.vo=new Yx(t,n)}return ae(e,[{key:"So",value:function(){return 1===this.state||5===this.state||this.Do()}},{key:"Do",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Co()}},{key:"stop",value:function(){var e=ue(ce().mark((function e(){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.So(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"xo",value:function(){this.state=0,this.vo.reset()}},{key:"No",value:function(){var e=this;this.Do()&&null===this.Po&&(this.Po=this.Hn.enqueueAfterDelay(this.Eo,6e4,(function(){return e.ko()})))}},{key:"Mo",value:function(e){this.Oo(),this.stream.send(e)}},{key:"ko",value:function(){var e=ue(ce().mark((function e(){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Do()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Oo",value:function(){this.Po&&(this.Po.cancel(),this.Po=null)}},{key:"$o",value:function(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}},{key:"close",value:function(){var e=ue(ce().mark((function e(t,n){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Oo(),this.$o(),this.vo.cancel(),this.bo++,4!==t?this.vo.reset():n&&n.code===am.RESOURCE_EXHAUSTED?(Zv(n.toString()),Zv("Using maximum backoff delay to prevent overloading the backend."),this.vo.yo()):n&&n.code===am.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Fo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Hr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Bo(this.bo),n=this.bo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=s(t,2),i=r[0],a=r[1];e.bo===n&&e.Lo(i,a)}),(function(n){t((function(){var t=new om(am.UNKNOWN,"Fetching auth token failed: "+n.message);return e.qo(t)}))}))}},{key:"Lo",value:function(e,t){var n=this,r=this.Bo(this.bo);this.stream=this.Uo(e,t),this.stream.Wr((function(){r((function(){return n.state=2,n.Vo=n.Hn.enqueueAfterDelay(n.Ao,1e4,(function(){return n.Do()&&(n.state=3),Promise.resolve()})),n.listener.Wr()}))})),this.stream.Hr((function(e){r((function(){return n.qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Co",value:function(){var e=this;this.state=5,this.vo.po(ue(ce().mark((function t(){return ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"qo",value:function(e){return Xv("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Bo",value:function(e){var t=this;return function(n){t.Hn.enqueueAndForget((function(){return t.bo===e?n():(Xv("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),Jx=function(e){he(n,e);var t=ye(n);function n(e,r,i,a,o,u){var s;return re(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).M=o,s}return ae(n,[{key:"Uo",value:function(e,t){return this.Ro.co("Listen",e,t)}},{key:"onMessage",value:function(e){this.vo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:nm()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.N?(rm(void 0===t||"string"==typeof t),Pm.fromBase64String(t||"")):(rm(void 0===t||t instanceof Uint8Array),Pm.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?am.UNKNOWN:Ug(e.code);return new om(t,e.message||"")}(o);n=new uk(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=xk(e,s.document.name),l=gk(s.document.updateTime),f=new fy({mapValue:{fields:s.document.fields}}),h=dy.newFoundDocument(c,l,f),d=s.targetIds||[],p=s.removedTargetIds||[];n=new ak(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var m=xk(e,v.document),y=v.readTime?gk(v.readTime):_m.min(),g=dy.newNoDocument(m,y),k=v.removedTargetIds||[];n=new ak([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var b=t.documentRemove;b.document;var w=xk(e,b.document),x=b.removedTargetIds||[];n=new ak([],x,w,null)}else{if(!("filter"in t))return nm();t.filter;var _=t.filter;_.targetId;var I=_.count||0,E=new Fg(I),T=_.targetId;n=new ok(T,E)}return n}(this.M,e),n=function(e){if(!("targetChange"in e))return _m.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?_m.min():t.readTime?gk(t.readTime):_m.min()}(e);return this.listener.Ko(t,n)}},{key:"Go",value:function(e){var t={};t.database=Ek(this.M),t.addTarget=function(e,t){var n,r=t.target;return(n=Iy(r)?{documents:Pk(e,r)}:{query:Ok(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=mk(e,t.resumeToken):t.snapshotVersion.compareTo(_m.min())>0&&(n.readTime=vk(e,t.snapshotVersion.toTimestamp())),n}(this.M,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return nm()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.M,e);n&&(t.labels=n),this.Mo(t)}},{key:"Qo",value:function(e){var t={};t.database=Ek(this.M),t.removeTarget=e,this.Mo(t)}}]),n}($x),Xx=function(e){he(n,e);var t=ye(n);function n(e,r,i,a,o,u){var s;return re(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).M=o,s.jo=!1,s}return ae(n,[{key:"Wo",get:function(){return this.jo}},{key:"start",value:function(){this.jo=!1,this.lastStreamToken=void 0,bi(de(n.prototype),"start",this).call(this)}},{key:"Fo",value:function(){this.jo&&this.zo([])}},{key:"Uo",value:function(e,t){return this.Ro.co("Write",e,t)}},{key:"onMessage",value:function(e){if(rm(!!e.streamToken),this.lastStreamToken=e.streamToken,this.jo){this.vo.reset();var t=function(e,t){return e&&e.length>0?(rm(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?gk(e.updateTime):gk(t);return n.isEqual(_m.min())&&(n=gk(t)),new kg(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=gk(e.commitTime);return this.listener.Ho(n,t)}return rm(!e.writeResults||0===e.writeResults.length),this.jo=!0,this.listener.Jo()}},{key:"Yo",value:function(){var e={};e.database=Ek(this.M),this.Mo(e)}},{key:"zo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Ak(t.M,e)}))};this.Mo(n)}}]),n}($x),Zx=function(e){he(n,e);var t=ye(n);function n(e,r,i,a){var o;return re(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.Ro=i,o.M=a,o.Xo=!1,o}return ae(n,[{key:"Zo",value:function(){if(this.Xo)throw new om(am.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"io",value:function(e,t,n){var r=this;return this.Zo(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=s(i,2),o=a[0],u=a[1];return r.Ro.io(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===am.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new om(am.UNKNOWN,e.toString())}))}},{key:"uo",value:function(e,t,n){var r=this;return this.Zo(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=s(i,2),o=a[0],u=a[1];return r.Ro.uo(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===am.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new om(am.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.Xo=!0}}]),n}(function(){return ae((function e(){re(this,e)}))}()),e_=function(){function e(t,n){re(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.ta=0,this.ea=null,this.na=!0}return ae(e,[{key:"sa",value:function(){var e=this;0===this.ta&&(this.ia("Unknown"),this.ea=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.ea=null,e.ra("Backend didn't respond within 10 seconds."),e.ia("Offline"),Promise.resolve()})))}},{key:"oa",value:function(e){"Online"===this.state?this.ia("Unknown"):(this.ta++,this.ta>=1&&(this.aa(),this.ra("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ia("Offline")))}},{key:"set",value:function(e){this.aa(),this.ta=0,"Online"===e&&(this.na=!1),this.ia(e)}},{key:"ia",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"ra",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.na?(Zv(t),this.na=!1):Xv("OnlineStateTracker",t)}},{key:"aa",value:function(){null!==this.ea&&(this.ea.cancel(),this.ea=null)}}]),e}(),t_=ae((function e(t,n,r,i,a){var o=this;re(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.ua=[],this.ca=new Map,this.ha=new Set,this.la=[],this.fa=a,this.fa.Fr((function(e){r.enqueueAndForget(ue(ce().mark((function e(){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=h_(o),!e.t0){e.next=5;break}return Xv("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=ue(ce().mark((function e(t){var n;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=im(t)).ha.add(4),e.next=4,i_(n);case 4:return n.da.set("Unknown"),n.ha.delete(4),e.next=8,n_(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.da=new e_(r,i)}));function n_(e){return r_.apply(this,arguments)}function r_(){return r_=ue(ce().mark((function e(t){var n,r,i;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h_(t)){e.next=18;break}n=ne(t.la),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),r_.apply(this,arguments)}function i_(e){return a_.apply(this,arguments)}function a_(){return a_=ue(ce().mark((function e(t){var n,r,i;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=ne(t.la),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),a_.apply(this,arguments)}function o_(e,t){var n=im(e);n.ca.has(t.targetId)||(n.ca.set(t.targetId,t),f_(n)?l_(n):B_(n).Do()&&s_(n,t))}function u_(e,t){var n=im(e),r=B_(n);n.ca.delete(t),r.Do()&&c_(n,t),0===n.ca.size&&(r.Do()?r.No():h_(n)&&n.da.set("Unknown"))}function s_(e,t){e._a.Z(t.targetId),B_(e).Go(t)}function c_(e,t){e._a.Z(t),B_(e).Qo(t)}function l_(e){e._a=new ck({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Et:function(t){return e.ca.get(t)||null}}),B_(e).start(),e.da.sa()}function f_(e){return h_(e)&&!B_(e).So()&&e.ca.size>0}function h_(e){return 0===im(e).ha.size}function d_(e){e._a=void 0}function p_(e){return v_.apply(this,arguments)}function v_(){return v_=ue(ce().mark((function e(t){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.ca.forEach((function(e,n){s_(t,e)}));case 1:case"end":return e.stop()}}),e)}))),v_.apply(this,arguments)}function m_(e,t){return y_.apply(this,arguments)}function y_(){return y_=ue(ce().mark((function e(t,n){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d_(t),f_(t)?(t.da.oa(n),l_(t)):t.da.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),y_.apply(this,arguments)}function g_(e,t,n){return k_.apply(this,arguments)}function k_(){return k_=ue(ce().mark((function e(t,n,r){var i;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.da.set("Online"),!(n instanceof uk&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=ue(ce().mark((function e(t,n){var r,i,a,o;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=ne(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.ca.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.ca.delete(o),t._a.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Xv("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,b_(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof ak?t._a.at(n):n instanceof ok?t._a._t(n):t._a.ht(n),r.isEqual(_m.min())){e.next=29;break}return e.prev=14,e.next=17,ix(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e._a.yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.ca.get(r);i&&e.ca.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.ca.get(t);if(n){e.ca.set(t,n.withResumeToken(Pm.EMPTY_BYTE_STRING,n.snapshotVersion)),c_(e,t);var r=new Ab(n.target,t,1,n.sequenceNumber);s_(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Xv("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,b_(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),k_.apply(this,arguments)}function b_(e,t,n){return w_.apply(this,arguments)}function w_(){return w_=ue(ce().mark((function e(t,n,r){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(bb(n)){e.next=2;break}throw n;case 2:return t.ha.add(1),e.next=5,i_(t);case 5:t.da.set("Offline"),r||(r=function(){return ix(t.localStore)}),t.asyncQueue.enqueueRetryable(ue(ce().mark((function e(){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Xv("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.ha.delete(1),e.next=6,n_(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),w_.apply(this,arguments)}function x_(e,t){return t().catch((function(n){return b_(e,n,t)}))}function __(e){return I_.apply(this,arguments)}function I_(){return I_=ue(ce().mark((function e(t){var n,r,i,a;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=im(t),r=q_(n),i=n.ua.length>0?n.ua[n.ua.length-1].batchId:-1;case 2:if(!E_(n)){e.next=19;break}return e.prev=3,e.next=6,ux(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.ua.length&&r.No(),e.abrupt("break",19);case 10:i=a.batchId,T_(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,b_(n,e.t0);case 17:e.next=2;break;case 19:S_(n)&&C_(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),I_.apply(this,arguments)}function E_(e){return h_(e)&&e.ua.length<10}function T_(e,t){e.ua.push(t);var n=q_(e);n.Do()&&n.Wo&&n.zo(t.mutations)}function S_(e){return h_(e)&&!q_(e).So()&&e.ua.length>0}function C_(e){q_(e).start()}function N_(e){return A_.apply(this,arguments)}function A_(){return A_=ue(ce().mark((function e(t){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:q_(t).Yo();case 1:case"end":return e.stop()}}),e)}))),A_.apply(this,arguments)}function D_(e){return P_.apply(this,arguments)}function P_(){return P_=ue(ce().mark((function e(t){var n,r,i,a;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=q_(t),r=ne(t.ua);try{for(r.s();!(i=r.n()).done;)a=i.value,n.zo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),P_.apply(this,arguments)}function O_(e,t,n){return R_.apply(this,arguments)}function R_(){return R_=ue(ce().mark((function e(t,n,r){var i,a;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.ua.shift(),a=Cb.from(i,n,r),e.next=3,x_(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,__(t);case 5:case"end":return e.stop()}}),e)}))),R_.apply(this,arguments)}function L_(e,t){return M_.apply(this,arguments)}function M_(){return M_=ue(ce().mark((function e(t,n){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&q_(t).Wo,!e.t0){e.next=4;break}return e.next=4,function(){var e=ue(ce().mark((function e(t,n){var r,i;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!jg(i=n.code)||i===am.ABORTED){e.next=7;break}return r=t.ua.shift(),q_(t).xo(),e.next=5,x_(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,__(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:S_(t)&&C_(t);case 5:case"end":return e.stop()}}),e)}))),M_.apply(this,arguments)}function F_(e,t){return j_.apply(this,arguments)}function j_(){return j_=ue(ce().mark((function e(t,n){var r,i;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=im(t)).asyncQueue.verifyOperationInProgress(),Xv("RemoteStore","RemoteStore received new credentials"),i=h_(r),r.ha.add(3),e.next=6,i_(r);case 6:return i&&r.da.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.ha.delete(3),e.next=12,n_(r);case 12:case"end":return e.stop()}}),e)}))),j_.apply(this,arguments)}function U_(e,t){return V_.apply(this,arguments)}function V_(){return V_=ue(ce().mark((function e(t,n){var r;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=im(t),!n){e.next=7;break}return r.ha.delete(2),e.next=5,n_(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.ha.add(2),e.next=12,i_(r);case 12:r.da.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),V_.apply(this,arguments)}function B_(e){return e.wa||(e.wa=function(e,t,n){var r=im(e);return r.Zo(),new Jx(t,r.Ro,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Wr:p_.bind(null,e),Hr:m_.bind(null,e),Ko:g_.bind(null,e)}),e.la.push(function(){var t=ue(ce().mark((function t(n){return ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.wa.xo(),f_(e)?l_(e):e.da.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.wa.stop();case 6:d_(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.wa}function q_(e){return e.ma||(e.ma=function(e,t,n){var r=im(e);return r.Zo(),new Xx(t,r.Ro,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Wr:N_.bind(null,e),Hr:L_.bind(null,e),Jo:D_.bind(null,e),Ho:O_.bind(null,e)}),e.la.push(function(){var t=ue(ce().mark((function t(n){return ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.ma.xo(),t.next=4,__(e);case 4:t.next=9;break;case 6:return t.next=8,e.ma.stop();case 8:e.ua.length>0&&(Xv("RemoteStore","Stopping write stream with ".concat(e.ua.length," pending writes")),e.ua=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.ma}var z_=function(){function e(t,n,r,i,a){re(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new um,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return ae(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new om(am.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function K_(e,t){if(Zv("AsyncQueue","".concat(t,": ").concat(e)),bb(e))return new om(am.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var W_=function(){function e(t){re(this,e),this.comparator=t?function(e,n){return t(e,n)||Wm.comparator(e.key,n.key)}:function(e,t){return Wm.comparator(e.key,t.key)},this.keyedMap=$g(),this.sortedSet=new Bg(this.comparator)}return ae(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),H_=function(){function e(){re(this,e),this.ga=new Bg(Wm.comparator)}return ae(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):nm():this.ga=this.ga.insert(t,e)}},{key:"ya",value:function(){var e=[];return this.ga.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),G_=function(){function e(t,n,r,i,a,o,u,s){re(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s}return ae(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Jy(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,W_.emptySet(n),a,r,i,!0,!1)}}]),e}(),Q_=ae((function e(){re(this,e),this.pa=void 0,this.listeners=[]})),Y_=ae((function e(){re(this,e),this.queries=new Vg((function(e){return Xy(e)}),Jy),this.onlineState="Unknown",this.Ia=new Set}));function $_(e,t){return J_.apply(this,arguments)}function J_(){return J_=ue(ce().mark((function e(t,n){var r,i,a,o,u;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=im(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new Q_),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.pa=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=K_(e.t0,"Initialization of query '".concat(Zy(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.Ta(r.onlineState),o.pa&&n.Ea(o.pa)&&nI(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),J_.apply(this,arguments)}function X_(e,t){return Z_.apply(this,arguments)}function Z_(){return Z_=ue(ce().mark((function e(t,n){var r,i,a,o,u;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=im(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),Z_.apply(this,arguments)}function eI(e,t){var n,r=im(e),i=!1,a=ne(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=ne(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Ea(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.pa=o}}}catch(f){a.e(f)}finally{a.f()}i&&nI(r)}function tI(e,t,n){var r=im(e),i=r.queries.get(t);if(i){var a,o=ne(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function nI(e){e.Ia.forEach((function(e){e.next()}))}var rI=function(){function e(t,n,r){re(this,e),this.query=t,this.Aa=n,this.Ra=!1,this.ba=null,this.onlineState="Unknown",this.options=r||{}}return ae(e,[{key:"Ea",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=ne(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new G_(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.Ra?this.Pa(e)&&(this.Aa.next(e),a=!0):this.Va(e,this.onlineState)&&(this.va(e),a=!0),this.ba=e,a}},{key:"onError",value:function(e){this.Aa.error(e)}},{key:"Ta",value:function(e){this.onlineState=e;var t=!1;return this.ba&&!this.Ra&&this.Va(this.ba,e)&&(this.va(this.ba),t=!0),t}},{key:"Va",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Sa||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"Pa",value:function(e){if(e.docChanges.length>0)return!0;var t=this.ba&&this.ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"va",value:function(e){e=G_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Ra=!0,this.Aa.next(e)}}]),e}(),iI=function(){function e(t,n){re(this,e),this.payload=t,this.byteLength=n}return ae(e,[{key:"Da",value:function(){return"metadata"in this.payload}}]),e}(),aI=function(){function e(t){re(this,e),this.M=t}return ae(e,[{key:"li",value:function(e){return xk(this.M,e)}},{key:"fi",value:function(e){return e.metadata.exists?Ck(this.M,e.document,!1):dy.newNoDocument(this.li(e.metadata.name),this.di(e.metadata.readTime))}},{key:"di",value:function(e){return gk(e)}}]),e}(),oI=function(){function e(t,n,r){re(this,e),this.Ca=t,this.localStore=n,this.M=r,this.queries=[],this.documents=[],this.progress=uI(t)}return ae(e,[{key:"xa",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"Na",value:function(e){var t,n=new Map,r=new aI(this.M),i=ne(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.li(a.metadata.name),s=ne(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||ek()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=ue(ce().mark((function e(){var t,n,r,i,a;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mx(this.localStore,new aI(this.M),this.documents,this.Ca.id);case 2:t=e.sent,n=this.Na(this.documents),r=ne(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,gx(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",new Yw(Object.assign({},this.progress),t)));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function uI(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var sI=ae((function e(t){re(this,e),this.key=t})),cI=ae((function e(t){re(this,e),this.key=t})),lI=function(){function e(t,n){re(this,e),this.query=t,this.ka=n,this.Ma=null,this.current=!1,this.Oa=ek(),this.mutatedKeys=ek(),this.$a=tg(t),this.Fa=new W_(this.$a)}return ae(e,[{key:"Ba",get:function(){return this.ka}},{key:"La",value:function(e,t){var n=this,r=t?t.qa:new H_,i=t?t.Fa:this.Fa,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s=zy(this.query)&&i.size===this.query.limit?i.last():null,c=Ky(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=eg(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Ua(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.$a(f,s)>0||c&&n.$a(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),zy(this.query)||Ky(this.query))for(;o.size>this.query.limit;){var l=zy(this.query)?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Fa:o,qa:r,ei:u,mutatedKeys:a}}},{key:"Ua",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Fa;this.Fa=e.Fa,this.mutatedKeys=e.mutatedKeys;var a=e.qa.ya();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return nm()}};return n(e)-n(t)}(e.type,t.type)||r.$a(e.doc,t.doc)})),this.Ka(n);var o=t?this.Ga():[],u=0===this.Oa.size&&this.current?1:0,s=u!==this.Ma;return this.Ma=u,0!==a.length||s?{snapshot:new G_(this.query,e.Fa,i,a,e.mutatedKeys,0===u,s,!1),Qa:o}:{Qa:o}}},{key:"Ta",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Fa:this.Fa,qa:new H_,mutatedKeys:this.mutatedKeys,ei:!1},!1)):{Qa:[]}}},{key:"ja",value:function(e){return!this.ka.has(e)&&!!this.Fa.has(e)&&!this.Fa.get(e).hasLocalMutations}},{key:"Ka",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.ka=t.ka.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.ka=t.ka.delete(e)})),this.current=e.current)}},{key:"Ga",value:function(){var e=this;if(!this.current)return[];var t=this.Oa;this.Oa=ek(),this.Fa.forEach((function(t){e.ja(t.key)&&(e.Oa=e.Oa.add(t.key))}));var n=[];return t.forEach((function(t){e.Oa.has(t)||n.push(new cI(t))})),this.Oa.forEach((function(e){t.has(e)||n.push(new sI(e))})),n}},{key:"Wa",value:function(e){this.ka=e.hi,this.Oa=ek();var t=this.La(e.documents);return this.applyChanges(t,!0)}},{key:"za",value:function(){return G_.fromInitialDocuments(this.query,this.Fa,this.mutatedKeys,0===this.Ma)}}]),e}(),fI=ae((function e(t,n,r){re(this,e),this.query=t,this.targetId=n,this.view=r})),hI=ae((function e(t){re(this,e),this.key=t,this.Ha=!1})),dI=function(){function e(t,n,r,i,a,o){re(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Ja={},this.Ya=new Vg((function(e){return Xy(e)}),Jy),this.Xa=new Map,this.Za=new Set,this.tu=new Bg(Wm.comparator),this.eu=new Map,this.nu=new xx,this.su={},this.iu=new Map,this.ru=_w.gn(),this.onlineState="Unknown",this.ou=void 0}return ae(e,[{key:"isPrimaryClient",get:function(){return!0===this.ou}}]),e}();function pI(e,t){return vI.apply(this,arguments)}function vI(){return vI=ue(ce().mark((function e(t,n){var r,i,a,o,u,s;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=uE(t),!(o=r.Ya.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.za(),e.next=15;break;case 6:return e.next=8,sx(r.localStore,Yy(n));case 8:return u=e.sent,r.isPrimaryClient&&o_(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,mI(r,n,i,"current"===s);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),vI.apply(this,arguments)}function mI(e,t,n,r){return yI.apply(this,arguments)}function yI(){return yI=ue(ce().mark((function e(t,n,r,i){var a,o,u,s,c,l;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.au=function(e,n,r){return function(){var e=ue(ce().mark((function e(t,n,r,i){var a,o,u;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.La(r),e.t0=a.ei,!e.t0){e.next=6;break}return e.next=5,fx(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.La(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(FI(t,n.targetId,u.Qa),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,fx(t.localStore,n,!0);case 3:return a=e.sent,o=new lI(n,a.hi),u=o.La(a.documents),s=ik.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(u,t.isPrimaryClient,s),FI(t,r,c.Qa),l=new fI(n,r,o),e.abrupt("return",(t.Ya.set(n,l),t.Xa.has(r)?t.Xa.get(r).push(n):t.Xa.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),yI.apply(this,arguments)}function gI(e,t){return kI.apply(this,arguments)}function kI(){return kI=ue(ce().mark((function e(t,n){var r,i,a;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=im(t),i=r.Ya.get(n),!((a=r.Xa.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.Xa.set(i.targetId,a.filter((function(e){return!Jy(e,n)}))),void r.Ya.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,cx(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),u_(r.remoteStore,i.targetId),LI(r,i.targetId)})).catch(Cw);case 9:e.next=14;break;case 11:return LI(r,i.targetId),e.next=14,cx(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),kI.apply(this,arguments)}function bI(e,t,n){return wI.apply(this,arguments)}function wI(){return wI=ue(ce().mark((function e(t,n,r){var i,a,o;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=sE(t),e.prev=1,e.next=4,function(e,t){var n,r=im(e),i=xm.now(),a=t.reduce((function(e,t){return e.add(t.key)}),ek());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.ui.Us(e,a).next((function(a){n=a;var o,u=[],s=ne(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=Eg(c,n.get(c.key));null!=l&&u.push(new Ng(c.key,l,hy(l.value.mapValue),bg.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return r.Fs.addMutationBatch(e,i,u,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.su[e.currentUser.toKey()];r||(r=new Bg(km)),r=r.insert(t,n),e.su[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,VI(i,a.changes);case 9:return e.next=11,__(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=K_(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),wI.apply(this,arguments)}function xI(e,t){return _I.apply(this,arguments)}function _I(){return _I=ue(ce().mark((function e(t,n){var r,i;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=im(t),e.prev=1,e.next=4,ax(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.eu.get(t);n&&(rm(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Ha=!0:e.modifiedDocuments.size>0?rm(n.Ha):e.removedDocuments.size>0&&(rm(n.Ha),n.Ha=!1))})),e.next=8,VI(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Cw(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),_I.apply(this,arguments)}function II(e,t,n){var r=im(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Ya.forEach((function(e,n){var r=n.view.Ta(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=im(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=ne(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Ta(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&nI(n)}(r.eventManager,t),i.length&&r.Ja.Ko(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function EI(e,t,n){return TI.apply(this,arguments)}function TI(){return TI=ue(ce().mark((function e(t,n,r){var i,a,o,u,s,c;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=im(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.eu.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new Bg(Wm.comparator)).insert(o,dy.newNoDocument(o,_m.min())),s=ek().add(o),c=new rk(_m.min(),new Map,new Kg(km),u,s),e.next=9,xI(i,c);case 9:i.tu=i.tu.remove(o),i.eu.delete(n),UI(i),e.next=16;break;case 14:return e.next=16,cx(i.localStore,n,!1).then((function(){return LI(i,n,r)})).catch(Cw);case 16:case"end":return e.stop()}}),e)}))),TI.apply(this,arguments)}function SI(e,t){return CI.apply(this,arguments)}function CI(){return CI=ue(ce().mark((function e(t,n){var r,i,a;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=im(t),i=n.batch.batchId,e.prev=1,e.next=4,rx(r.localStore,n);case 4:return a=e.sent,RI(r,i,null),OI(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,VI(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Cw(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),CI.apply(this,arguments)}function NI(e,t,n){return AI.apply(this,arguments)}function AI(){return AI=ue(ce().mark((function e(t,n,r){var i,a;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=im(t),e.prev=1,e.next=4,function(e,t){var n=im(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.Fs.lookupMutationBatch(e,t).next((function(t){return rm(null!==t),r=t.keys(),n.Fs.removeMutationBatch(e,t)})).next((function(){return n.Fs.performConsistencyCheck(e)})).next((function(){return n.ui.Us(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,RI(i,n,r),OI(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,VI(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Cw(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),AI.apply(this,arguments)}function DI(e,t){return PI.apply(this,arguments)}function PI(){return PI=ue(ce().mark((function e(t,n){var r,i,a,o;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h_((r=im(t)).remoteStore)||Xv("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=im(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.Fs.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.iu.get(i)||[]).push(n),r.iu.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=K_(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),PI.apply(this,arguments)}function OI(e,t){(e.iu.get(t)||[]).forEach((function(e){e.resolve()})),e.iu.delete(t)}function RI(e,t,n){var r=im(e),i=r.su[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.su[r.currentUser.toKey()]=i}}function LI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=ne(e.Xa.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.Ya.delete(a),n&&e.Ja.uu(a,n)}}catch(o){i.e(o)}finally{i.f()}e.Xa.delete(t),e.isPrimaryClient&&e.nu.Ri(t).forEach((function(t){e.nu.containsKey(t)||MI(e,t)}))}function MI(e,t){e.Za.delete(t.path.canonicalString());var n=e.tu.get(t);null!==n&&(u_(e.remoteStore,n),e.tu=e.tu.remove(t),e.eu.delete(n),UI(e))}function FI(e,t,n){var r,i=ne(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof sI?(e.nu.addReference(a.key,t),jI(e,a)):a instanceof cI?(Xv("SyncEngine","Document no longer in limbo: "+a.key),e.nu.removeReference(a.key,t),e.nu.containsKey(a.key)||MI(e,a.key)):nm()}}catch(o){i.e(o)}finally{i.f()}}function jI(e,t){var n=t.key,r=n.path.canonicalString();e.tu.get(n)||e.Za.has(r)||(Xv("SyncEngine","New document in limbo: "+n),e.Za.add(r),UI(e))}function UI(e){for(;e.Za.size>0&&e.tu.size<e.maxConcurrentLimboResolutions;){var t=e.Za.values().next().value;e.Za.delete(t);var n=new Wm(Cm.fromString(t)),r=e.ru.next();e.eu.set(r,new hI(n)),e.tu=e.tu.insert(n,r),o_(e.remoteStore,new Ab(Yy(qy(n.path)),r,2,mm.A))}}function VI(e,t,n){return BI.apply(this,arguments)}function BI(){return BI=ue(ce().mark((function e(t,n,r){var i,a,o,u;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=im(t),a=[],o=[],u=[],e.t0=i.Ya.isEmpty(),e.t0){e.next=9;break}return i.Ya.forEach((function(e,t){u.push(i.au(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=Jw.Js(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.Ja.Ko(a),e.next=9,function(){var e=ue(ce().mark((function e(t,n){var r,i,a,o,u,s,c,l;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=im(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return vb.forEach(n,(function(t){return vb.forEach(t.zs,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return vb.forEach(t.Hs,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),bb(e.t0)){e.next=10;break}throw e.t0;case 10:Xv("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=ne(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.si.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.si=r.si.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),BI.apply(this,arguments)}function qI(e,t){return zI.apply(this,arguments)}function zI(){return zI=ue(ce().mark((function e(t,n){var r,i;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=im(t)).currentUser.isEqual(n)){e.next=11;break}return Xv("SyncEngine","User change. New user:",n.toKey()),e.next=5,tx(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.iu.forEach((function(e){e.forEach((function(e){e.reject(new om(am.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.iu.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,VI(r,i.ci);case 11:case"end":return e.stop()}}),e)}))),zI.apply(this,arguments)}function KI(e,t){var n=im(e),r=n.eu.get(t);if(r&&r.Ha)return ek().add(r.key);var i=ek(),a=n.Xa.get(t);if(!a)return i;var o,u=ne(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.Ya.get(s);i=i.unionWith(c.view.Ba)}}catch(l){u.e(l)}finally{u.f()}return i}function WI(e,t){return HI.apply(this,arguments)}function HI(){return HI=ue(ce().mark((function e(t,n){var r,i,a;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=im(t),e.next=3,fx(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.Wa(i),e.abrupt("return",(r.isPrimaryClient&&FI(r,n.targetId,a.Qa),a));case 6:case"end":return e.stop()}}),e)}))),HI.apply(this,arguments)}function GI(e){return QI.apply(this,arguments)}function QI(){return QI=ue(ce().mark((function e(t){var n;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=im(t),e.abrupt("return",dx(n.localStore).then((function(e){return VI(n,e)})));case 2:case"end":return e.stop()}}),e)}))),QI.apply(this,arguments)}function YI(e,t,n,r){return $I.apply(this,arguments)}function $I(){return $I=ue(ce().mark((function e(t,n,r,i){var a,o;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=im(t),e.next=3,function(e,t){var n=im(e),r=im(n.Fs);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.ln(e,t).next((function(t){return t?n.ui.Us(e,t):vb.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,__(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(RI(a,n,i||null),OI(a,n),function(e,t){im(im(e).Fs).dn(t)}(a.localStore,n)):nm();case 11:return e.next=13,VI(a,o);case 13:e.next=16;break;case 15:Xv("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),$I.apply(this,arguments)}function JI(e,t){return XI.apply(this,arguments)}function XI(){return XI=ue(ce().mark((function e(t,n){var r,i,a,o,u,s,c,l;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(uE(r=im(t)),sE(r),!0!==n||!0===r.ou){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,ZI(r,i.toArray());case 5:return a=e.sent,r.ou=!0,e.next=9,U_(r.remoteStore,!0);case 9:o=ne(a);try{for(o.s();!(u=o.n()).done;)s=u.value,o_(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.ou){e.next=25;break}return c=[],l=Promise.resolve(),r.Xa.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return LI(r,t),cx(r.localStore,t,!0)})),u_(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,ZI(r,c);case 21:return function(e){var t=im(e);t.eu.forEach((function(e,n){u_(t.remoteStore,n)})),t.nu.bi(),t.eu=new Map,t.tu=new Bg(Wm.comparator)}(r),r.ou=!1,e.next=25,U_(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),XI.apply(this,arguments)}function ZI(e,t,n){return eE.apply(this,arguments)}function eE(){return eE=ue(ce().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,m,y;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=im(t),a=[],o=[],u=ne(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.Xa.get(c))||0===f.length){e.next=34;break}return e.next=11,sx(i.localStore,Yy(f[0]));case 11:l=e.sent,h=ne(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.Ya.get(p),e.next=20,WI(i,v);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,hx(i.localStore,c);case 36:return y=e.sent,e.next=39,sx(i.localStore,y);case 39:return l=e.sent,e.next=42,mI(i,tE(y),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.Ja.Ko(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),eE.apply(this,arguments)}function tE(e){return By(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function nE(e){var t=im(e);return im(im(t.localStore).persistence).Ms()}function rE(e,t,n,r){return iE.apply(this,arguments)}function iE(){return iE=ue(ce().mark((function e(t,n,r,i){var a,o,u;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=im(t)).ou){e.next=5;break}Xv("SyncEngine","Ignoring unexpected query state notification."),e.next=21;break;case 5:if(!a.Xa.has(n)){e.next=21;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?9:"rejected"===e.t0?16:20;break;case 9:return e.next=11,dx(a.localStore);case 11:return o=e.sent,u=rk.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=15,VI(a,o,u);case 15:return e.abrupt("break",21);case 16:return e.next=18,cx(a.localStore,n,!0);case 18:return LI(a,n,i),e.abrupt("break",21);case 20:nm();case 21:case"end":return e.stop()}}),e)}))),iE.apply(this,arguments)}function aE(e,t,n){return oE.apply(this,arguments)}function oE(){return oE=ue(ce().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=uE(t)).ou){e.next=45;break}a=ne(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.Xa.has(u)){e.next=10;break}return Xv("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,hx(i.localStore,u);case 12:return s=e.sent,e.next=15,sx(i.localStore,s);case 15:return c=e.sent,e.next=18,mI(i,tE(s),c.targetId,!1);case 18:o_(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=ne(r),e.prev=30,h=ce().mark((function e(){var t;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.Xa.has(t),!e.t0){e.next=5;break}return e.next=5,cx(i.localStore,t,!1).then((function(){u_(i.remoteStore,t),LI(i,t)})).catch(Cw);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),oE.apply(this,arguments)}function uE(e){var t=im(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=xI.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=KI.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=EI.bind(null,t),t.Ja.Ko=eI.bind(null,t.eventManager),t.Ja.uu=tI.bind(null,t.eventManager),t}function sE(e){var t=im(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=SI.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=NI.bind(null,t),t}function cE(e,t,n){var r=im(e);(function(){var e=ue(ce().mark((function e(t,n,r){var i,a,o,u,s;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=im(e),r=gk(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.fs.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=10;break}return e.next=9,n.close();case 9:return e.abrupt("return",void r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)));case 10:return r._updateProgress(uI(i)),a=new oI(i,t.localStore,n.M),e.next=14,n.cu();case 14:o=e.sent;case 15:if(!o){e.next=25;break}return e.next=18,a.xa(o);case 18:return(u=e.sent)&&r._updateProgress(u),e.next=22,n.cu();case 22:o=e.sent;case 23:e.next=15;break;case 25:return e.next=27,a.complete();case 27:return s=e.sent,e.next=30,VI(t,s.$s,void 0);case 30:return e.next=32,function(e,t){var n=im(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.fs.saveBundleMetadata(e,t)}))}(t.localStore,i);case 32:r._completeWith(s.progress),e.next=38;break;case 35:e.prev=35,e.t0=e.catch(0),em("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0);case 38:case"end":return e.stop()}}),e,null,[[0,35]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(){r.sharedClientState.notifyBundleLoaded()}))}var lE=function(){function e(){re(this,e),this.synchronizeTabs=!1}return ae(e,[{key:"initialize",value:function(){var e=ue(ce().mark((function e(t){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.M=Qx(t.databaseInfo.databaseId),this.sharedClientState=this.hu(t),this.persistence=this.lu(t),e.next=5,this.persistence.start();case 5:this.gcScheduler=this.fu(t),this.localStore=this.du(t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fu",value:function(e){return null}},{key:"du",value:function(e){return ex(this.persistence,new Xw,e.initialUser,this.M)}},{key:"lu",value:function(e){return new Cx(Ax.Wi,this.M)}},{key:"hu",value:function(e){return new Vx}},{key:"terminate",value:function(){var e=ue(ce().mark((function e(){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),fE=function(e){he(n,e);var t=ye(n);function n(e,r,i){var a;return re(this,n),(a=t.call(this))._u=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return ae(n,[{key:"initialize",value:function(){var e=ue(ce().mark((function e(t){var r=this;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bi(de(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,px(this.localStore);case 4:return e.next=6,this._u.initialize(this,t);case 6:return e.next=8,sE(this._u.syncEngine);case 8:return e.next=10,__(this._u.remoteStore);case 10:return e.next=12,this.persistence.ps((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()}));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"du",value:function(e){return ex(this.persistence,new Xw,e.initialUser,this.M)}},{key:"fu",value:function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new Pw(t,e.asyncQueue)}},{key:"lu",value:function(e){var t=Qw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?vw.withCacheSize(this.cacheSizeBytes):vw.DEFAULT;return new Ww(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Hx(),Gx(),this.M,this.sharedClientState,!!this.forceOwnership)}},{key:"hu",value:function(e){return new Vx}}]),n}(lE),hE=function(e){he(n,e);var t=ye(n);function n(e,r){var i;return re(this,n),(i=t.call(this,e,r,!1))._u=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return ae(n,[{key:"initialize",value:function(){var e=ue(ce().mark((function e(t){var r,i=this;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bi(de(n.prototype),"initialize",this).call(this,t);case 2:if(r=this._u.syncEngine,e.t0=this.sharedClientState instanceof Ux,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Nr:YI.bind(null,r),kr:rE.bind(null,r),Mr:aE.bind(null,r),Ms:nE.bind(null,r),Cr:GI.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.ps(function(){var e=ue(ce().mark((function e(t){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,JI(i._u.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):t||i.gcScheduler.stop());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"hu",value:function(e){var t=Hx();if(!Ux.vt(t))throw new om(am.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Qw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ux(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(fE),dE=function(){function e(){re(this,e)}return ae(e,[{key:"initialize",value:function(){var e=ue(ce().mark((function e(t,n){var r=this;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return II(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=qI.bind(null,this.syncEngine),e.next=12,U_(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new Y_}},{key:"createDatastore",value:function(e){var t,n=Qx(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new Wx(t));return function(e,t,n,r){return new Zx(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return II(o.syncEngine,e,0)},a=qx.vt()?new qx:new Bx,new t_(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new dI(e,t,n,r,i,a);return o&&(u.ou=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=ue(ce().mark((function e(t){var n;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=im(t),Xv("RemoteStore","RemoteStore shutting down."),n.ha.add(5),e.next=5,i_(n);case 5:n.fa.shutdown(),n.da.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function pE(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return ue(ce().mark((function r(){var i;return ce().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return ue(ce().mark((function e(){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var vE=function(){function e(t){re(this,e),this.observer=t,this.muted=!1}return ae(e,[{key:"next",value:function(e){this.observer.next&&this.wu(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.wu(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"mu",value:function(){this.muted=!0}},{key:"wu",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),mE=function(){function e(t,n){var r=this;re(this,e),this.gu=t,this.M=n,this.metadata=new um,this.buffer=new Uint8Array,this.yu=new TextDecoder("utf-8"),this.pu().then((function(e){e&&e.Da()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return ae(e,[{key:"close",value:function(){return this.gu.cancel()}},{key:"getMetadata",value:function(){var e=ue(ce().mark((function e(){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cu",value:function(){var e=ue(ce().mark((function e(){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.pu());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pu",value:function(){var e=ue(ce().mark((function e(){var t,n,r,i;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Iu();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.yu.decode(t),r=Number(n),isNaN(r)&&this.Tu("length string (".concat(n,") is not valid number")),e.next=9,this.Eu(r);case 9:return i=e.sent,e.abrupt("return",new iI(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Au",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Iu",value:function(){var e=ue(ce().mark((function e(){var t,n;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Au()<0)){e.next=7;break}return e.next=3,this.Ru();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Au())<0&&this.Tu("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Eu",value:function(){var e=ue(ce().mark((function e(t){var n;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Ru();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Tu("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.yu.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Tu",value:function(e){throw this.gu.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Ru",value:function(){var e=ue(ce().mark((function e(){var t,n;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.gu.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),yE=function(){function e(t){re(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return ae(e,[{key:"lookup",value:function(){var e=ue(ce().mark((function e(t){var n,r=this;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new om(am.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=ue(ce().mark((function e(t,n){var r,i,a,o,u,s;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=im(t),i=Ek(r.M)+"/documents",a={documents:n.map((function(e){return wk(r.M,e)}))},e.next=5,r.uo("BatchGetDocuments",i,a);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=Nk(r.M,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());rm(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Lg(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=ue(ce().mark((function e(){var t,n=this;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Wm.fromPath(t);n.mutations.push(new Mg(r,n.precondition(r)))})),e.next=7,function(){var e=ue(ce().mark((function e(t,n){var r,i,a;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=im(t),i=Ek(r.M)+"/documents",a={writes:n.map((function(e){return Ak(r.M,e)}))},e.next=3,r.io("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw nm();t=_m.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new om(am.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?bg.updateTime(t):bg.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(_m.min()))throw new om(am.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return bg.updateTime(t)}return bg.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),gE=function(){function e(t,n,r,i){re(this,e),this.asyncQueue=t,this.datastore=n,this.updateFunction=r,this.deferred=i,this.bu=5,this.vo=new Yx(this.asyncQueue,"transaction_retry")}return ae(e,[{key:"run",value:function(){this.bu-=1,this.Pu()}},{key:"Pu",value:function(){var e=this;this.vo.po(ue(ce().mark((function t(){var n,r;return ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new yE(e.datastore),(r=e.Vu(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.vu(t)}))}))})).catch((function(t){e.vu(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Vu",value:function(e){try{var t=this.updateFunction(e);return!qm(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"vu",value:function(e){var t=this;this.bu>0&&this.Su(e)?(this.bu-=1,this.asyncQueue.enqueueAndForget((function(){return t.Pu(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Su",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!jg(t)}return!1}}]),e}(),kE=function(){function e(t,n,r,i){var a=this;re(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Qv.UNAUTHENTICATED,this.clientId=gm.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=ue(ce().mark((function e(t){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Xv("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Xv("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return ae(e,[{key:"getConfiguration",value:function(){var e=ue(ce().mark((function e(){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new om(am.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new um;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(ue(ce().mark((function n(){var r;return ce().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=K_(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function bE(e,t){return wE.apply(this,arguments)}function wE(){return wE=ue(ce().mark((function e(t,n){var r,i;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Xv("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=ue(ce().mark((function e(t){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,tx(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),wE.apply(this,arguments)}function xE(e,t){return _E.apply(this,arguments)}function _E(){return _E=ue(ce().mark((function e(t,n){var r,i;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,IE(t);case 3:return r=e.sent,Xv("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return F_(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return F_(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),_E.apply(this,arguments)}function IE(e){return EE.apply(this,arguments)}function EE(){return EE=ue(ce().mark((function e(t){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return Xv("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,bE(t,new lE);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),EE.apply(this,arguments)}function TE(e){return SE.apply(this,arguments)}function SE(){return SE=ue(ce().mark((function e(t){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return Xv("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,xE(t,new dE);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),SE.apply(this,arguments)}function CE(e){return IE(e).then((function(e){return e.persistence}))}function NE(e){return IE(e).then((function(e){return e.localStore}))}function AE(e){return TE(e).then((function(e){return e.remoteStore}))}function DE(e){return TE(e).then((function(e){return e.syncEngine}))}function PE(e){return OE.apply(this,arguments)}function OE(){return OE=ue(ce().mark((function e(t){var n,r;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,TE(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=pI.bind(null,n.syncEngine),r.onUnlisten=gI.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),OE.apply(this,arguments)}function RE(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new um;return e.asyncQueue.enqueueAndForget(ue(ce().mark((function i(){return ce().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new vE({next:function(a){t.enqueueAndForget((function(){return X_(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new om(am.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new om(am.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new rI(qy(n.path),a,{includeMetadataChanges:!0,Sa:!0});return $_(e,o)},i.next=3,PE(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function LE(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new um;return e.asyncQueue.enqueueAndForget(ue(ce().mark((function i(){return ce().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new vE({next:function(n){t.enqueueAndForget((function(){return X_(e,o)})),n.fromCache&&"server"===r.source?i.reject(new om(am.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new rI(n,a,{includeMetadataChanges:!0,Sa:!0});return $_(e,o)},i.next=3,PE(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var ME=new Map;function FE(e,t,n){if(!n)throw new om(am.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function jE(e,t,n,r){if(!0===t&&!0===r)throw new om(am.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function UE(e){if(!Wm.isDocumentKey(e))throw new om(am.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function VE(e){if(Wm.isDocumentKey(e))throw new om(am.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function BE(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":nm()}function qE(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new om(am.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=BE(e);throw new om(am.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function zE(e,t){if(t<=0)throw new om(am.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var KE=function(){function e(t){var n;if(re(this,e),void 0===t.host){if(void 0!==t.ssl)throw new om(am.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new om(am.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,jE("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return ae(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),WE=function(){function e(t,n,r){re(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new KE({}),this._settingsFrozen=!1,t instanceof Bm?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new om(am.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bm(e.options.projectId)}(t))}return ae(e,[{key:"app",get:function(){if(!this._app)throw new om(am.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new om(am.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new KE(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new cm;switch(e.type){case"gapi":var t=e.client;return rm(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new dm(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new om(am.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=ME.get(e);t&&(Xv("ComponentProvider","Removing Datastore"),ME.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function HE(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=qE(e,WE))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&em("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=Qv.MOCK_USER;else{o=Te(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new om(am.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Qv(s)}e._authCredentials=new lm(new sm(o,u))}}var GE=function(){function e(t,n,r){re(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return ae(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new YE(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),QE=function(){function e(t,n,r){re(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return ae(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),YE=function(e){he(n,e);var t=ye(n);function n(e,r,i){var a;return re(this,n),(a=t.call(this,e,r,qy(i)))._path=i,a.type="collection",a}return ae(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new GE(this.firestore,null,new Wm(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(QE);function $E(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=$e(e),FE("collection","path",t),e instanceof WE){var a=Cm.fromString.apply(Cm,[t].concat(r));return VE(a),new YE(e,null,a)}if(!(e instanceof GE||e instanceof YE))throw new om(am.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Cm.fromString.apply(Cm,[t].concat(r)));return VE(o),new YE(e.firestore,null,o)}function JE(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=$e(e),1===arguments.length&&(t=gm.R()),FE("doc","path",t),e instanceof WE){var a=Cm.fromString.apply(Cm,[t].concat(r));return UE(a),new GE(e,null,new Wm(a))}if(!(e instanceof GE||e instanceof YE))throw new om(am.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Cm.fromString.apply(Cm,[t].concat(r)));return UE(o),new GE(e.firestore,e instanceof YE?e.converter:null,new Wm(o))}function XE(e,t){return e=$e(e),t=$e(t),(e instanceof GE||e instanceof YE)&&(t instanceof GE||t instanceof YE)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function ZE(e,t){return e=$e(e),t=$e(t),e instanceof QE&&t instanceof QE&&e.firestore===t.firestore&&Jy(e._query,t._query)&&e.converter===t.converter}var eT=function(){function e(){var t=this;re(this,e),this.Du=Promise.resolve(),this.Cu=[],this.xu=!1,this.Nu=[],this.ku=null,this.Mu=!1,this.Ou=!1,this.$u=[],this.vo=new Yx(this,"async_queue_retry"),this.Fu=function(){var e=Gx();e&&Xv("AsyncQueue","Visibility state changed to "+e.visibilityState),t.vo.To()};var n=Gx();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Fu)}return ae(e,[{key:"isShuttingDown",get:function(){return this.xu}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Bu(),this.Lu(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.xu){this.xu=!0,this.Ou=e||!1;var t=Gx();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Fu)}}},{key:"enqueue",value:function(e){var t=this;if(this.Bu(),this.xu)return new Promise((function(){}));var n=new um;return this.Lu((function(){return t.xu&&t.Ou?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Cu.push(e),t.qu()}))}},{key:"qu",value:function(){var e=ue(ce().mark((function e(){var t=this;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Cu.length){e.next=14;break}return e.prev=1,e.next=4,this.Cu[0]();case 4:this.Cu.shift(),this.vo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),bb(e.t0)){e.next=12;break}throw e.t0;case 12:Xv("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Cu.length>0&&this.vo.po((function(){return t.qu()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Lu",value:function(e){var t=this,n=this.Du.then((function(){return t.Mu=!0,e().catch((function(e){t.ku=e,t.Mu=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Zv("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Mu=!1,e}))}));return this.Du=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Bu(),this.$u.indexOf(e)>-1&&(t=0);var i=z_.createAndSchedule(this,e,t,n,(function(e){return r.Uu(e)}));return this.Nu.push(i),i}},{key:"Bu",value:function(){this.ku&&nm()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Ku",value:function(){var e=ue(ce().mark((function e(){var t;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Du,e.next=3,t;case 3:if(t!==this.Du){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Gu",value:function(e){var t,n=ne(this.Nu);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Qu",value:function(e){var t=this;return this.Ku().then((function(){t.Nu.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=ne(t.Nu);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Ku()}))}},{key:"ju",value:function(e){this.$u.push(e)}},{key:"Uu",value:function(e){var t=this.Nu.indexOf(e);this.Nu.splice(t,1)}}]),e}();function tT(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=ne(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var nT=function(){function e(){re(this,e),this._progressObserver={},this._taskCompletionResolver=new um,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return ae(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),rT=function(e){he(n,e);var t=ye(n);function n(e,r,i){var a;return re(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new eT,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return ae(n,[{key:"_terminate",value:function(){return this._firestoreClient||aT(this),this._firestoreClient.terminate()}}]),n}(WE);function iT(e){return e._firestoreClient||aT(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function aT(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new Vm(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new kE(e._authCredentials,e._appCheckCredentials,e._queue,r)}function oT(e,t,n){var r=new um;return e.asyncQueue.enqueue(ue(ce().mark((function i(){return ce().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,bE(e,n);case 3:return i.next=5,xE(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===am.FAILED_PRECONDITION||e.code===am.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(i.t0)){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function uT(e){return function(e){return e.asyncQueue.enqueue(ue(ce().mark((function t(){var n,r;return ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,CE(e);case 2:return n=t.sent,t.next=5,AE(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=im(e);return t.ha.delete(0),n_(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(iT(e=qE(e,rT)))}function sT(e){return function(e){return e.asyncQueue.enqueue(ue(ce().mark((function t(){var n,r;return ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,CE(e);case 2:return n=t.sent,t.next=5,AE(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=ue(ce().mark((function e(t){var n;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=im(t)).ha.add(0),e.next=4,i_(n);case 4:n.da.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(iT(e=qE(e,rT)))}function cT(e,t){var n=iT(e=qE(e,rT)),r=new nT;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new mE(e,t)}(function(e,t){if(e instanceof Uint8Array)return pE(e,t);if(e instanceof ArrayBuffer)return pE(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,Qx(t));e.asyncQueue.enqueueAndForget(ue(ce().mark((function t(){return ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=cE,t.next=3,DE(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function lT(e,t){return function(e,t){return e.asyncQueue.enqueue(ue(ce().mark((function n(){return ce().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=im(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.fs.getNamedQuery(e,t)}))},n.next=3,NE(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(iT(e=qE(e,rT)),t).then((function(t){return t?new QE(e,null,t.query):null}))}function fT(e){if(e._initialized||e._terminated)throw new om(am.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var hT=function(){function e(){re(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new om(am.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Am(n)}return ae(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var dT=function(){function e(t){re(this,e),this._byteString=t}return ae(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Pm.fromBase64String(t))}catch(t){throw new om(am.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Pm.fromUint8Array(t))}}]),e}(),pT=ae((function e(t){re(this,e),this._methodName=t})),vT=function(){function e(t,n){if(re(this,e),!isFinite(t)||t<-90||t>90)throw new om(am.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new om(am.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return ae(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return km(this._lat,e._lat)||km(this._long,e._long)}}]),e}(),mT=/^__.*__$/,yT=function(){function e(t,n,r){re(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return ae(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Ng(e,this.data,this.fieldMask,t,this.fieldTransforms):new Cg(e,this.data,t,this.fieldTransforms)}}]),e}(),gT=function(){function e(t,n,r){re(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return ae(e,[{key:"toMutation",value:function(e,t){return new Ng(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function kT(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw nm()}}var bT=function(){function e(t,n,r,i,a,o){re(this,e),this.settings=t,this.databaseId=n,this.M=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Wu(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return ae(e,[{key:"path",get:function(){return this.settings.path}},{key:"zu",get:function(){return this.settings.zu}},{key:"Hu",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Ju",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Hu({path:n,Yu:!1});return r.Xu(e),r}},{key:"Zu",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Hu({path:n,Yu:!1});return r.Wu(),r}},{key:"tc",value:function(e){return this.Hu({path:void 0,Yu:!0})}},{key:"ec",value:function(e){return VT(e,this.settings.methodName,this.settings.nc||!1,this.path,this.settings.sc)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Wu",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.Xu(this.path.get(e))}},{key:"Xu",value:function(e){if(0===e.length)throw this.ec("Document fields must not be empty");if(kT(this.zu)&&mT.test(e))throw this.ec('Document fields cannot begin and end with "__"')}}]),e}(),wT=function(){function e(t,n,r){re(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.M=r||Qx(t)}return ae(e,[{key:"ic",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new bT({zu:e,methodName:t,sc:n,path:Am.emptyPath(),Yu:!1,nc:r},this.databaseId,this.M,this.ignoreUndefinedProperties)}}]),e}();function xT(e){var t=e._freezeSettings(),n=Qx(e._databaseId);return new wT(e._databaseId,!!t.ignoreUndefinedProperties,n)}function _T(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ic(a.merge||a.mergeFields?2:0,t,n,i);MT("Data must be an object, but it was:",o,r);var u,s,c=RT(r,o);if(a.merge)u=new Dm(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=ne(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=FT(t,d,n);if(!o.contains(p))throw new om(am.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));BT(f,p)||f.push(p)}}catch(v){h.e(v)}finally{h.f()}u=new Dm(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new yT(new fy(c),u,s)}var IT=function(e){he(n,e);var t=ye(n);function n(){return re(this,n),t.apply(this,arguments)}return ae(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.zu)throw 1===e.zu?e.ec("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ec("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(pT);function ET(e,t,n){return new bT({zu:3,sc:t.settings.sc,methodName:e._methodName,Yu:n},t.databaseId,t.M,t.ignoreUndefinedProperties)}var TT=function(e){he(n,e);var t=ye(n);function n(){return re(this,n),t.apply(this,arguments)}return ae(n,[{key:"_toFieldTransform",value:function(e){return new gg(e.path,new lg)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(pT),ST=function(e){he(n,e);var t=ye(n);function n(e,r){var i;return re(this,n),(i=t.call(this,e)).rc=r,i}return ae(n,[{key:"_toFieldTransform",value:function(e){var t=ET(this,e,!0),n=this.rc.map((function(e){return OT(e,t)})),r=new fg(n);return new gg(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(pT),CT=function(e){he(n,e);var t=ye(n);function n(e,r){var i;return re(this,n),(i=t.call(this,e)).rc=r,i}return ae(n,[{key:"_toFieldTransform",value:function(e){var t=ET(this,e,!0),n=this.rc.map((function(e){return OT(e,t)})),r=new dg(n);return new gg(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(pT),NT=function(e){he(n,e);var t=ye(n);function n(e,r){var i;return re(this,n),(i=t.call(this,e)).oc=r,i}return ae(n,[{key:"_toFieldTransform",value:function(e){var t=new vg(e.M,ag(e.M,this.oc));return new gg(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(pT);function AT(e,t,n,r){var i=e.ic(1,t,n);MT("Data must be an object, but it was:",i,r);var a=[],o=fy.empty();Em(r,(function(e,r){var u=UT(t,e,n);r=$e(r);var s=i.Zu(u);if(r instanceof IT)a.push(u);else{var c=OT(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new Dm(a);return new gT(o,u,i.fieldTransforms)}function DT(e,t,n,r,i,a){var o=e.ic(1,t,n),u=[FT(t,r,n)],s=[i];if(a.length%2!=0)throw new om(am.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(FT(t,a[c])),s.push(a[c+1]);for(var l=[],f=fy.empty(),h=u.length-1;h>=0;--h)if(!BT(l,u[h])){var d=u[h],p=s[h];p=$e(p);var v=o.Zu(d);if(p instanceof IT)l.push(d);else{var m=OT(p,v);null!=m&&(l.push(d),f.set(d,m))}}var y=new Dm(l);return new gT(f,y,o.fieldTransforms)}function PT(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return OT(n,e.ic(r?4:3,t))}function OT(e,t){if(LT(e=$e(e)))return MT("Unsupported field value:",t,e),RT(e,t);if(e instanceof pT)return function(e,t){if(!kT(t.zu))throw t.ec("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ec("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Yu&&4!==t.zu)throw t.ec("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=ne(e);try{for(a.s();!(n=a.n()).done;){var o=OT(n.value,t.tc(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=$e(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return ag(t.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=xm.fromDate(e);return{timestampValue:vk(t.M,n)}}if(e instanceof xm){var r=new xm(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:vk(t.M,r)}}if(e instanceof vT)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof dT)return{bytesValue:mk(t.M,e._byteString)};if(e instanceof GE){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ec("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:kk(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ec("Unsupported field value: ".concat(BE(e)))}(e,t)}function RT(e,t){var n={};return Tm(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Em(e,(function(e,r){var i=OT(r,t.Ju(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function LT(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof xm||e instanceof vT||e instanceof dT||e instanceof GE||e instanceof pT)}function MT(e,t,n){if(!LT(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=BE(n);throw"an object"===r?t.ec(e+" a custom object"):t.ec(e+" "+r)}}function FT(e,t,n){if((t=$e(t))instanceof hT)return t._internalPath;if("string"==typeof t)return UT(e,t);throw VT("Field path arguments must be of type string or ",e,!1,void 0,n)}var jT=new RegExp("[~\\*/\\[\\]]");function UT(e,t,n){if(t.search(jT)>=0)throw VT("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return ge(hT,X(t.split(".")))._internalPath}catch(hC){throw VT("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function VT(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new om(am.INVALID_ARGUMENT,u+e+s)}function BT(e,t){return e.some((function(e){return e.isEqual(t)}))}var qT=function(){function e(t,n,r,i,a){re(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return ae(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new GE(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new zT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(KT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),zT=function(e){he(n,e);var t=ye(n);function n(){return re(this,n),t.apply(this,arguments)}return ae(n,[{key:"data",value:function(){return bi(de(n.prototype),"data",this).call(this)}}]),n}(qT);function KT(e,t){return"string"==typeof t?UT(e,t):t instanceof hT?t._internalPath:t._delegate._internalPath}var WT=function(){function e(t,n){re(this,e),this.hasPendingWrites=t,this.fromCache=n}return ae(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),HT=function(e){he(n,e);var t=ye(n);function n(e,r,i,a,o,u){var s;return re(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return ae(n,[{key:"exists",value:function(){return bi(de(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new GT(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(KT("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(qT),GT=function(e){he(n,e);var t=ye(n);function n(){return re(this,n),t.apply(this,arguments)}return ae(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return bi(de(n.prototype),"data",this).call(this,e)}}]),n}(HT),QT=function(){function e(t,n,r,i){re(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new WT(i.hasPendingWrites,i.fromCache),this.query=r}return ae(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new GT(n._firestore,n._userDataWriter,r.key,r,new WT(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new om(am.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new GT(e._firestore,e._userDataWriter,t.doc.key,t.doc,new WT(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new GT(e._firestore,e._userDataWriter,t.doc.key,t.doc,new WT(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:YT(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function YT(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return nm()}}function $T(e,t){return e instanceof HT&&t instanceof HT?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof QT&&t instanceof QT&&e._firestore===t._firestore&&ZE(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function JT(e){if(Ky(e)&&0===e.explicitOrderBy.length)throw new om(am.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var XT=ae((function e(){re(this,e)}));function ZT(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var eS=function(e){he(n,e);var t=ye(n);function n(e,r,i){var a;return re(this,n),(a=t.call(this)).ac=e,a.uc=r,a.cc=i,a.type="where",a}return ae(n,[{key:"_apply",value:function(e){var t=xT(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new om(am.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){dS(o,a);var s,c=[],l=ne(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(hS(r,e,f))}}catch(d){l.e(d)}finally{l.f()}u={arrayValue:{values:c}}}else u=hS(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||dS(o,a),u=PT(n,"where",o,"in"===a||"not-in"===a);var h=Ty.create(i,a,u);return function(e,t){if(t.S()){var n=Hy(e);if(null!==n&&!n.isEqual(t.field))throw new om(am.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=Wy(e);null!==r&&pS(e,t.field,r)}var i=function(e,t){var n,r=ne(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new om(am.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new om(am.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this.ac,this.uc,this.cc);return new QE(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new Vy(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(XT);function tS(e,t,n){var r=t,i=KT("where",e);return new eS(i,r,n)}var nS=function(e){he(n,e);var t=ye(n);function n(e,r){var i;return re(this,n),(i=t.call(this)).ac=e,i.hc=r,i.type="orderBy",i}return ae(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new om(am.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new om(am.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new My(t,n);return function(e,t){if(null===Wy(e)){var n=Hy(e);null!==n&&pS(e,n,t.field)}}(e,r),r}(e._query,this.ac,this.hc);return new QE(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Vy(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(XT);function rS(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=t,r=KT("orderBy",e);return new nS(r,n)}var iS=function(e){he(n,e);var t=ye(n);function n(e,r,i){var a;return re(this,n),(a=t.call(this)).type=e,a.lc=r,a.fc=i,a}return ae(n,[{key:"_apply",value:function(e){return new QE(e.firestore,e.converter,$y(e._query,this.lc,this.fc))}}]),n}(XT);var aS=function(e){he(n,e);var t=ye(n);function n(e,r,i){var a;return re(this,n),(a=t.call(this)).type=e,a.dc=r,a._c=i,a}return ae(n,[{key:"_apply",value:function(e){var t=fS(e,this.type,this.dc,this._c);return new QE(e.firestore,e.converter,function(e,t){return new Vy(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(XT);function oS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new aS("startAt",t,!0)}function uS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new aS("startAfter",t,!1)}var sS=function(e){he(n,e);var t=ye(n);function n(e,r,i){var a;return re(this,n),(a=t.call(this)).type=e,a.dc=r,a._c=i,a}return ae(n,[{key:"_apply",value:function(e){var t=fS(e,this.type,this.dc,this._c);return new QE(e.firestore,e.converter,function(e,t){return new Vy(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(XT);function cS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new sS("endBefore",t,!1)}function lS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new sS("endAt",t,!0)}function fS(e,t,n,r){if(n[0]=$e(n[0]),n[0]instanceof qT)return function(e,t,n,r,i){if(!r)throw new om(am.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=ne(Qy(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(ty(t,r.key));else{var c=r.data.field(s.field);if(Fm(c))throw new om(am.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new om(am.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new Ly(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=xT(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new om(am.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new om(am.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Gy(e)&&-1!==c.indexOf("/"))throw new om(am.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Cm.fromString(c));if(!Wm.isDocumentKey(l))throw new om(am.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new Wm(l);u.push(ty(t,f))}else{var h=PT(n,r,c);u.push(h)}}return new Ly(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function hS(e,t,n){if("string"==typeof(n=$e(n))){if(""===n)throw new om(am.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Gy(t)&&-1!==n.indexOf("/"))throw new om(am.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Cm.fromString(n));if(!Wm.isDocumentKey(r))throw new om(am.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return ty(e,new Wm(r))}if(n instanceof GE)return ty(e,n._key);throw new om(am.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(BE(n),"."))}function dS(e,t){if(!Array.isArray(e)||0===e.length)throw new om(am.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new om(am.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function pS(e,t,n){if(!n.isEqual(t))throw new om(am.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var vS=function(){function e(){re(this,e)}return ae(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Qm(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Lm(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Mm(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw nm()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Em(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new vT(Lm(e.latitude),Lm(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=jm(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Um(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Rm(e);return new xm(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Cm.fromString(e);rm(zk(n));var r=new Bm(n.get(1),n.get(3)),i=new Wm(n.popFirst(5));return r.isEqual(t)||Zv("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function mS(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var yS=function(e){he(n,e);var t=ye(n);function n(e){var r;return re(this,n),(r=t.call(this)).firestore=e,r}return ae(n,[{key:"convertBytes",value:function(e){return new dT(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new GE(this.firestore,null,t)}}]),n}(vS),gS=function(){function e(t,n){re(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=xT(t)}return ae(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=kS(e,this._firestore),i=mS(r.converter,t,n),a=_T(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,bg.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=kS(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=$e(t))||t instanceof hT?DT(this._dataReader,"WriteBatch.update",i._key,t,n,o):AT(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,bg.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=kS(e,this._firestore);return this._mutations=this._mutations.concat(new Lg(t._key,bg.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new om(am.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function kS(e,t){if((e=$e(e)).firestore!==t)throw new om(am.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var bS=function(e){he(n,e);var t=ye(n);function n(e){var r;return re(this,n),(r=t.call(this)).firestore=e,r}return ae(n,[{key:"convertBytes",value:function(e){return new dT(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new GE(this.firestore,null,t)}}]),n}(vS);function wS(e){e=qE(e,GE);var t=qE(e.firestore,rT),n=iT(t),r=new bS(t);return function(e,t){var n=new um;return e.asyncQueue.enqueueAndForget(ue(ce().mark((function r(){return ce().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=ue(ce().mark((function e(t,n,r){var i,a;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=im(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.ui.Bs(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new om(am.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=K_(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,NE(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new HT(t,r,e._key,n,new WT(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function xS(e){e=qE(e,QE);var t=qE(e.firestore,rT),n=iT(t),r=new bS(t);return JT(e._query),LE(n,e._query).then((function(n){return new QT(t,r,e,n)}))}function _S(e){e=qE(e,QE);var t=qE(e.firestore,rT),n=iT(t),r=new bS(t);return function(e,t){var n=new um;return e.asyncQueue.enqueueAndForget(ue(ce().mark((function r(){return ce().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=ue(ce().mark((function e(t,n,r){var i,a,o,u,s;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fx(t,n,!0);case 3:i=e.sent,a=new lI(n,i.hi),o=a.La(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=K_(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,NE(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new QT(t,r,e,n)}))}function IS(e,t,n){e=qE(e,GE);var r=qE(e.firestore,rT),i=mS(e.converter,t,n);return CS(r,[_T(xT(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,bg.none())])}function ES(e,t,n){e=qE(e,GE);for(var r=qE(e.firestore,rT),i=xT(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return CS(r,[("string"==typeof(t=$e(t))||t instanceof hT?DT(i,"updateDoc",e._key,t,n,o):AT(i,"updateDoc",e._key,t)).toMutation(e._key,bg.exists(!0))])}function TS(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=$e(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||tT(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(tT(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof GE)l=qE(e.firestore,rT),f=qy(e._key.path),c={next:function(t){n[s]&&n[s](NS(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=qE(e,QE);l=qE(p.firestore,rT),f=p._query;var v=new bS(l);c={next:function(e){n[s]&&n[s](new QT(l,v,p,e))},error:n[s+1],complete:n[s+2]},JT(e._query)}return function(e,t,n,r){var i=new vE(r),a=new rI(t,i,n);return e.asyncQueue.enqueueAndForget(ue(ce().mark((function t(){return ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=$_,t.next=3,PE(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.mu(),e.asyncQueue.enqueueAndForget(ue(ce().mark((function t(){return ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=X_,t.next=3,PE(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(iT(l),f,h,c)}function SS(e,t){return function(e,t){var n=new vE(t);return e.asyncQueue.enqueueAndForget(ue(ce().mark((function t(){return ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){im(e).Ia.add(t),t.next()},t.next=3,PE(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.mu(),e.asyncQueue.enqueueAndForget(ue(ce().mark((function t(){return ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){im(e).Ia.delete(t)},t.next=3,PE(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(iT(e=qE(e,rT)),tT(t)?t:{next:t})}function CS(e,t){return function(e,t){var n=new um;return e.asyncQueue.enqueueAndForget(ue(ce().mark((function r(){return ce().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=bI,r.next=3,DE(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(iT(e),t)}function NS(e,t,n){var r=n.docs.get(t._key),i=new bS(e);return new HT(e,i,t._key,r,new WT(n.hasPendingWrites,n.fromCache),t.converter)}var AS=function(e){he(n,e);var t=ye(n);function n(e,r){var i;return re(this,n),(i=t.call(this,e,r))._firestore=e,i}return ae(n,[{key:"get",value:function(e){var t=this,r=kS(e,this._firestore),i=new bS(this._firestore);return bi(de(n.prototype),"get",this).call(this,e).then((function(e){return new HT(t._firestore,i,r._key,e._document,new WT(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){re(this,e),this._firestore=t,this._transaction=n,this._dataReader=xT(t)}return ae(e,[{key:"get",value:function(e){var t=this,n=kS(e,this._firestore),r=new yS(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return nm();var i=e[0];if(i.isFoundDocument())return new qT(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new qT(t._firestore,r,n._key,null,n.converter);throw nm()}))}},{key:"set",value:function(e,t,n){var r=kS(e,this._firestore),i=mS(r.converter,t,n),a=_T(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=kS(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=$e(t))||t instanceof hT?DT(this._dataReader,"Transaction.update",i._key,t,n,o):AT(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=kS(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function DS(e,t){return function(e,t){var n=new um;return e.asyncQueue.enqueueAndForget(ue(ce().mark((function r(){var i;return ce().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,function(e){return TE(e).then((function(e){return e.datastore}))}(e);case 2:i=r.sent,new gE(e.asyncQueue,i,t,n).run();case 4:case"end":return r.stop()}}),r)})))),n.promise}(iT(e=qE(e,rT)),(function(n){return t(new AS(e,n))}))}function PS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new ST("arrayUnion",t)}function OS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new CT("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Yv=e}(Rt),St(new rt("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new rT(i,new fm(e.getProvider("auth-internal")),new vm(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),Vt(Gv,"3.4.6",e),Vt(Gv,"3.4.6","esm2017")}();function RS(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new om("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function LS(){if("undefined"===typeof Uint8Array)throw new om("unimplemented","Uint8Arrays are not available in this environment.")}function MS(){if("undefined"==typeof atob)throw new om("unimplemented","Blobs are unavailable in Firestore in this environment.")}var FS=function(){function e(t){re(this,e),this._delegate=t}return ae(e,[{key:"toBase64",value:function(){return MS(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return LS(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return MS(),new e(dT.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return LS(),new e(dT.fromUint8Array(t))}}]),e}();function jS(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=ne(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var US=function(){function e(){re(this,e)}return ae(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){fT(e=qE(e,rT));var n=iT(e),r=e._freezeSettings(),i=new dE;return oT(n,i,new fE(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){fT(e=qE(e,rT));var t=iT(e),n=e._freezeSettings(),r=new dE;return oT(t,r,new hE(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new om(am.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new um;return e._queue.enqueueAndForgetEvenWhileRestricted(ue(ce().mark((function n(){return ce().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=ue(ce().mark((function e(t){var n;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(yb.vt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,yb.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(Qw(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),VS=function(){function e(t,n,r){var i=this;re(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Bm||(this._appCompat=t)}return ae(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||em("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};HE(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return uT(this._delegate)}},{key:"disableNetwork",value:function(){return sT(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&jE("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new um;return e.asyncQueue.enqueueAndForget(ue(ce().mark((function n(){return ce().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=DI,n.next=3,DE(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(iT(e=qE(e,rT)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return SS(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new om("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new eC(this,$E(this._delegate,e))}catch(oC){throw HS(oC,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new WS(this,JE(this._delegate,e))}catch(oC){throw HS(oC,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new JS(this,function(e,t){if(e=qE(e,WE),FE("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new om(am.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new QE(e,null,function(e){return new Vy(Cm.emptyPath(),e)}(t))}(this._delegate,e))}catch(oC){throw HS(oC,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return DS(this._delegate,(function(n){return e(new qS(t,n))}))}},{key:"batch",value:function(){var e=this;return iT(this._delegate),new zS(new gS(this._delegate,(function(t){return CS(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return cT(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return lT(this._delegate,e).then((function(e){return e?new JS(t,e):null}))}}]),e}(),BS=function(e){he(n,e);var t=ye(n);function n(e){var r;return re(this,n),(r=t.call(this)).firestore=e,r}return ae(n,[{key:"convertBytes",value:function(e){return new FS(new dT(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return WS.forKey(t,this.firestore,null)}}]),n}(vS);var qS=function(){function e(t,n){re(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new BS(t)}return ae(e,[{key:"get",value:function(e){var t=this,n=tC(e);return this._delegate.get(n).then((function(e){return new YS(t._firestore,new HT(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=tC(e);return n?(RS("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=tC(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=tC(e);return this._delegate.delete(t),this}}]),e}(),zS=function(){function e(t){re(this,e),this._delegate=t}return ae(e,[{key:"set",value:function(e,t,n){var r=tC(e);return n?(RS("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=tC(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=tC(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),KS=function(){function e(t,n,r){re(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return ae(e,[{key:"fromFirestore",value:function(e,t){var n=new GT(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new $S(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new BS(t),n),i.set(n,a)),a}}]),e}();KS.INSTANCES=new WeakMap;var WS=function(){function e(t,n){re(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new BS(t)}return ae(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new eC(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new eC(this.firestore,$E(this._delegate,e))}catch(oC){throw HS(oC,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=$e(e))instanceof GE&&XE(this._delegate,e)}},{key:"set",value:function(e,t){t=RS("DocumentReference.set",t);try{return t?IS(this._delegate,e,t):IS(this._delegate,e)}catch(oC){throw HS(oC,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?ES(this._delegate,e):ES.apply(void 0,[this._delegate,e,t].concat(r))}catch(oC){throw HS(oC,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return CS(qE(e.firestore,rT),[new Lg(e._key,bg.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=GS(n),a=QS(n,(function(t){return new YS(e.firestore,new HT(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return TS(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?wS(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=qE(e,GE);var t=qE(e.firestore,rT);return RE(iT(t),e._key,{source:"server"}).then((function(n){return NS(t,e,n)}))}(this._delegate):function(e){e=qE(e,GE);var t=qE(e.firestore,rT);return RE(iT(t),e._key).then((function(n){return NS(t,e,n)}))}(this._delegate),t.then((function(e){return new YS(n.firestore,new HT(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(KS.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new om("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new GE(n._delegate,r,new Wm(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new GE(n._delegate,r,t))}}]),e}();function HS(e,t,n){return e.message=e.message.replace(t,n),e}function GS(e){var t,n=ne(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!jS(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function QS(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=jS(e[0])?e[0]:jS(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var YS=function(){function e(t,n){re(this,e),this._firestore=t,this._delegate=n}return ae(e,[{key:"ref",get:function(){return new WS(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return $T(this._delegate,e._delegate)}}]),e}(),$S=function(e){he(n,e);var t=ye(n);function n(){return re(this,n),t.apply(this,arguments)}return ae(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||nm()}(void 0!==t),t}}]),n}(YS),JS=function(){function e(t,n){re(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new BS(t)}return ae(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,ZT(this._delegate,tS(t,n,r)))}catch(oC){throw HS(oC,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,ZT(this._delegate,rS(t,n)))}catch(oC){throw HS(oC,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,ZT(this._delegate,function(e){return zE("limit",e),new iS("limit",e,"F")}(t)))}catch(oC){throw HS(oC,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,ZT(this._delegate,function(e){return zE("limitToLast",e),new iS("limitToLast",e,"L")}(t)))}catch(oC){throw HS(oC,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,ZT(this._delegate,oS.apply(void 0,arguments)))}catch(oC){throw HS(oC,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,ZT(this._delegate,uS.apply(void 0,arguments)))}catch(oC){throw HS(oC,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,ZT(this._delegate,cS.apply(void 0,arguments)))}catch(oC){throw HS(oC,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,ZT(this._delegate,lS.apply(void 0,arguments)))}catch(oC){throw HS(oC,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return ZE(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?_S(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=qE(e,QE);var t=qE(e.firestore,rT),n=iT(t),r=new bS(t);return LE(n,e._query,{source:"server"}).then((function(n){return new QT(t,r,e,n)}))}(this._delegate):xS(this._delegate),t.then((function(e){return new ZS(n.firestore,new QT(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=GS(n),a=QS(n,(function(t){return new ZS(e.firestore,new QT(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return TS(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(KS.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),XS=function(){function e(t,n){re(this,e),this._firestore=t,this._delegate=n}return ae(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new $S(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),ZS=function(){function e(t,n){re(this,e),this._firestore=t,this._delegate=n}return ae(e,[{key:"query",get:function(){return new JS(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new $S(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new XS(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new $S(n._firestore,r))}))}},{key:"isEqual",value:function(e){return $T(this._delegate,e._delegate)}}]),e}(),eC=function(e){he(n,e);var t=ye(n);function n(e,r){var i;return re(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return ae(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new WS(this.firestore,e):null}},{key:"doc",value:function(e){try{return new WS(this.firestore,void 0===e?JE(this._delegate):JE(this._delegate,e))}catch(oC){throw HS(oC,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=qE(e.firestore,rT),r=JE(e),i=mS(e.converter,t);return CS(n,[_T(xT(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,bg.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new WS(t.firestore,e)}))}},{key:"isEqual",value:function(e){return XE(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(KS.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(JS);function tC(e){return qE(e,GE)}var nC=function(){function e(){re(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=ge(hT,n)}return ae(e,[{key:"isEqual",value:function(e){return(e=$e(e))instanceof hT&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Am.keyField().canonicalString())}}]),e}(),rC=function(){function e(t){re(this,e),this._delegate=t}return ae(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new TT("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new IT("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=PS.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=OS.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new NT("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),iC={Firestore:VS,GeoPoint:vT,Timestamp:xm,Blob:FS,Transaction:qS,WriteBatch:zS,DocumentReference:WS,DocumentSnapshot:YS,Query:JS,QueryDocumentSnapshot:$S,QuerySnapshot:ZS,CollectionReference:eC,FieldPath:nC,FieldValue:rC,setLogLevel:function(e){!function(e){$v.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new rt("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},iC)))}(e,(function(e,t){return new VS(e,t,new US)})),e.registerVersion("@firebase/firestore-compat","0.1.15")}(gi);gi.initializeApp({apiKey:"AIzaSyChTp5Ul-w9yGjUMlhhtB6-vf1_otnaDFg",authDomain:"streamline-9ad12.firebaseapp.com",projectId:"streamline-9ad12",storageBucket:"streamline-9ad12.appspot.com",messagingSenderId:"361052811272",appId:"1:361052811272:web:5085a904fbfe607ecf21bd",measurementId:"G-1G6JD8MKCY"});gi.auth();var aC=gi.firestore(),oC={data:""},uC=function(e){return"object"==typeof window?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||oC},sC=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,cC=/\/\*[^]*?\*\/|\s\s+|\n/g,lC=function e(t,n){var r="",i="",a="",o=function(o){var s=t[o];"@"==o[0]?"i"==o[1]?r=o+" "+s+";":i+="f"==o[1]?e(s,o):o+"{"+e(s,"k"==o[1]?"":n)+"}":"object"==typeof s?i+=e(s,n?n.replace(/([^,])+/g,(function(e){return o.replace(/(^:.*)|([^,])+/g,(function(t){return/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t}))})):o):null!=s&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=e.p?e.p(o,s):o+":"+s+";"),u=o};for(var u in t)o(u);return r+(n&&a?n+"{"+a+"}":a)+i},fC={},hC=function e(t){if("object"==typeof t){var n="";for(var r in t)n+=r+e(t[r]);return n}return t},dC=function(e,t,n,r,i){var a=hC(e),o=fC[a]||(fC[a]=function(e){for(var t=0,n=11;t<e.length;)n=101*n+e.charCodeAt(t++)>>>0;return"go"+n}(a));if(!fC[o]){var u=a!==e?e:function(e){for(var t,n=[{}];t=sC.exec(e.replace(cC,""));)t[4]?n.shift():t[3]?n.unshift(n[0][t[3]]=n[0][t[3]]||{}):n[0][t[1]]=t[2];return n[0]}(e);fC[o]=lC(i?Z({},"@keyframes "+o,u):u,n?"":"."+o)}return function(e,t,n){-1==t.data.indexOf(e)&&(t.data=n?e+t.data:t.data+e)}(fC[o],t,r),o},pC=function(e,t,n){return e.reduce((function(e,r,i){var a=t[i];if(a&&a.call){var o=a(n),u=o&&o.props&&o.props.className||/^go/.test(o)&&o;a=u?"."+u:o&&"object"==typeof o?o.props?"":lC(o,""):!1===o?"":o}return e+r+(null==a?"":a)}),"")};function vC(e){var t=this||{},n=e.call?e(t.p):e;return dC(n.unshift?n.raw?pC(n,[].slice.call(arguments,1),t.p):n.reduce((function(e,n){return Object.assign(e,n&&n.call?n(t.p):n)}),{}):n,uC(t.target),t.g,t.o,t.k)}vC.bind({g:1});var mC,yC,gC,kC=vC.bind({k:1});function bC(e,t){var n=this||{};return function(){var r=arguments;function i(a,o){var u=Object.assign({},a),s=u.className||i.className;n.p=Object.assign({theme:yC&&yC()},u),n.o=/ *go\d+/.test(s),u.className=vC.apply(n,r)+(s?" "+s:""),t&&(u.ref=o);var c=e;return e[0]&&(c=u.as||e,delete u.as),gC&&c[0]&&gC(u),mC(c,u)}return t?t(i):i}}function wC(){return wC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wC.apply(this,arguments)}function xC(e,t){return t||(t=e.slice(0)),e.raw=t,e}var _C,IC=function(e,t){return function(e){return"function"===typeof e}(e)?e(t):e},EC=function(){var e=0;return function(){return(++e).toString()}}(),TC=function(){var e=void 0;return function(){if(void 0===e&&"undefined"!==typeof window){var t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}}();!function(e){e[e.ADD_TOAST=0]="ADD_TOAST",e[e.UPDATE_TOAST=1]="UPDATE_TOAST",e[e.UPSERT_TOAST=2]="UPSERT_TOAST",e[e.DISMISS_TOAST=3]="DISMISS_TOAST",e[e.REMOVE_TOAST=4]="REMOVE_TOAST",e[e.START_PAUSE=5]="START_PAUSE",e[e.END_PAUSE=6]="END_PAUSE"}(_C||(_C={}));var SC=new Map,CC=function(e){if(!SC.has(e)){var t=setTimeout((function(){SC.delete(e),PC({type:_C.REMOVE_TOAST,toastId:e})}),1e3);SC.set(e,t)}},NC=function e(t,n){switch(n.type){case _C.ADD_TOAST:return wC({},t,{toasts:[n.toast].concat(t.toasts).slice(0,20)});case _C.UPDATE_TOAST:return n.toast.id&&function(e){var t=SC.get(e);t&&clearTimeout(t)}(n.toast.id),wC({},t,{toasts:t.toasts.map((function(e){return e.id===n.toast.id?wC({},e,n.toast):e}))});case _C.UPSERT_TOAST:var r=n.toast;return t.toasts.find((function(e){return e.id===r.id}))?e(t,{type:_C.UPDATE_TOAST,toast:r}):e(t,{type:_C.ADD_TOAST,toast:r});case _C.DISMISS_TOAST:var i=n.toastId;return i?CC(i):t.toasts.forEach((function(e){CC(e.id)})),wC({},t,{toasts:t.toasts.map((function(e){return e.id===i||void 0===i?wC({},e,{visible:!1}):e}))});case _C.REMOVE_TOAST:return void 0===n.toastId?wC({},t,{toasts:[]}):wC({},t,{toasts:t.toasts.filter((function(e){return e.id!==n.toastId}))});case _C.START_PAUSE:return wC({},t,{pausedAt:n.time});case _C.END_PAUSE:var a=n.time-(t.pausedAt||0);return wC({},t,{pausedAt:void 0,toasts:t.toasts.map((function(e){return wC({},e,{pauseDuration:e.pauseDuration+a})}))})}},AC=[],DC={toasts:[],pausedAt:void 0},PC=function(e){DC=NC(DC,e),AC.forEach((function(e){e(DC)}))},OC={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},RC=function(e){return function(t,n){var r=function(e,t,n){return void 0===t&&(t="blank"),wC({createdAt:Date.now(),visible:!0,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0},n,{id:(null==n?void 0:n.id)||EC()})}(t,e,n);return PC({type:_C.UPSERT_TOAST,toast:r}),r.id}},LC=function(e,t){return RC("blank")(e,t)};LC.error=RC("error"),LC.success=RC("success"),LC.loading=RC("loading"),LC.custom=RC("custom"),LC.dismiss=function(e){PC({type:_C.DISMISS_TOAST,toastId:e})},LC.remove=function(e){return PC({type:_C.REMOVE_TOAST,toastId:e})},LC.promise=function(e,t,n){var r=LC.loading(t.loading,wC({},n,null==n?void 0:n.loading));return e.then((function(e){return LC.success(IC(t.success,e),wC({id:r},n,null==n?void 0:n.success)),e})).catch((function(e){LC.error(IC(t.error,e),wC({id:r},n,null==n?void 0:n.error))})),e};var MC=function(e){var n=function(e){void 0===e&&(e={});var n=(0,t.useState)(DC),r=n[0],i=n[1];(0,t.useEffect)((function(){return AC.push(i),function(){var e=AC.indexOf(i);e>-1&&AC.splice(e,1)}}),[r]);var a=r.toasts.map((function(t){var n,r,i;return wC({},e,e[t.type],t,{duration:t.duration||(null==(n=e[t.type])?void 0:n.duration)||(null==(r=e)?void 0:r.duration)||OC[t.type],style:wC({},e.style,null==(i=e[t.type])?void 0:i.style,t.style)})}));return wC({},r,{toasts:a})}(e),r=n.toasts,i=n.pausedAt;(0,t.useEffect)((function(){if(!i){var e=Date.now(),t=r.map((function(t){if(t.duration!==1/0){var n=(t.duration||0)+t.pauseDuration-(e-t.createdAt);if(!(n<0))return setTimeout((function(){return LC.dismiss(t.id)}),n);t.visible&&LC.dismiss(t.id)}}));return function(){t.forEach((function(e){return e&&clearTimeout(e)}))}}}),[r,i]);var a=(0,t.useMemo)((function(){return{startPause:function(){PC({type:_C.START_PAUSE,time:Date.now()})},endPause:function(){i&&PC({type:_C.END_PAUSE,time:Date.now()})},updateHeight:function(e,t){return PC({type:_C.UPDATE_TOAST,toast:{id:e,height:t}})},calculateOffset:function(e,t){var n,i=t||{},a=i.reverseOrder,o=void 0!==a&&a,u=i.gutter,s=void 0===u?8:u,c=i.defaultPosition,l=r.filter((function(t){return(t.position||c)===(e.position||c)&&t.height})),f=l.findIndex((function(t){return t.id===e.id})),h=l.filter((function(e,t){return t<f&&e.visible})).length,d=(n=l.filter((function(e){return e.visible}))).slice.apply(n,o?[h+1]:[0,h]).reduce((function(e,t){return e+(t.height||0)+s}),0);return d}}}),[r,i]);return{toasts:r,handlers:a}};function FC(){var e=xC(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n\n  &:after,\n  &:before {\n    content: '';\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 150ms;\n    position: absolute;\n    border-radius: 3px;\n    opacity: 0;\n    background: ",";\n    bottom: 9px;\n    left: 4px;\n    height: 2px;\n    width: 12px;\n  }\n\n  &:before {\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 180ms;\n    transform: rotate(90deg);\n  }\n"]);return FC=function(){return e},e}function jC(){var e=xC(["\nfrom {\n  transform: scale(0) rotate(90deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(90deg);\n\topacity: 1;\n}"]);return jC=function(){return e},e}function UC(){var e=xC(["\nfrom {\n  transform: scale(0);\n  opacity: 0;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]);return UC=function(){return e},e}function VC(){var e=xC(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n transform: scale(1) rotate(45deg);\n  opacity: 1;\n}"]);return VC=function(){return e},e}var BC=kC(VC()),qC=kC(UC()),zC=kC(jC()),KC=bC("div")(FC(),(function(e){return e.primary||"#ff4b4b"}),BC,qC,(function(e){return e.secondary||"#fff"}),zC);function WC(){var e=xC(["\n  width: 12px;\n  height: 12px;\n  box-sizing: border-box;\n  border: 2px solid;\n  border-radius: 100%;\n  border-color: ",";\n  border-right-color: ",";\n  animation: "," 1s linear infinite;\n"]);return WC=function(){return e},e}function HC(){var e=xC(["\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n"]);return HC=function(){return e},e}var GC=kC(HC()),QC=bC("div")(WC(),(function(e){return e.secondary||"#e0e0e0"}),(function(e){return e.primary||"#616161"}),GC);function YC(){var e=xC(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n  &:after {\n    content: '';\n    box-sizing: border-box;\n    animation: "," 0.2s ease-out forwards;\n    opacity: 0;\n    animation-delay: 200ms;\n    position: absolute;\n    border-right: 2px solid;\n    border-bottom: 2px solid;\n    border-color: ",";\n    bottom: 6px;\n    left: 6px;\n    height: 10px;\n    width: 6px;\n  }\n"]);return YC=function(){return e},e}function $C(){var e=xC(["\n0% {\n\theight: 0;\n\twidth: 0;\n\topacity: 0;\n}\n40% {\n  height: 0;\n\twidth: 6px;\n\topacity: 1;\n}\n100% {\n  opacity: 1;\n  height: 10px;\n}"]);return $C=function(){return e},e}function JC(){var e=xC(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(45deg);\n\topacity: 1;\n}"]);return JC=function(){return e},e}var XC=kC(JC()),ZC=kC($C()),eN=bC("div")(YC(),(function(e){return e.primary||"#61d345"}),XC,ZC,(function(e){return e.secondary||"#fff"}));function tN(){var e=xC(["\n  position: relative;\n  transform: scale(0.6);\n  opacity: 0.4;\n  min-width: 20px;\n  animation: "," 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n"]);return tN=function(){return e},e}function nN(){var e=xC(["\nfrom {\n  transform: scale(0.6);\n  opacity: 0.4;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]);return nN=function(){return e},e}function rN(){var e=xC(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-width: 20px;\n  min-height: 20px;\n"]);return rN=function(){return e},e}function iN(){var e=xC(["\n  position: absolute;\n"]);return iN=function(){return e},e}var aN=bC("div")(iN()),oN=bC("div")(rN()),uN=kC(nN()),sN=bC("div")(tN(),uN),cN=function(e){var n=e.toast,r=n.icon,i=n.type,a=n.iconTheme;return void 0!==r?"string"===typeof r?(0,t.createElement)(sN,null,r):r:"blank"===i?null:(0,t.createElement)(oN,null,(0,t.createElement)(QC,Object.assign({},a)),"loading"!==i&&(0,t.createElement)(aN,null,"error"===i?(0,t.createElement)(KC,Object.assign({},a)):(0,t.createElement)(eN,Object.assign({},a))))};function lN(){var e=xC(["\n  display: flex;\n  justify-content: center;\n  margin: 4px 10px;\n  color: inherit;\n  flex: 1 1 auto;\n  white-space: pre-line;\n"]);return lN=function(){return e},e}function fN(){var e=xC(["\n  display: flex;\n  align-items: center;\n  background: #fff;\n  color: #363636;\n  line-height: 1.3;\n  will-change: transform;\n  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);\n  max-width: 350px;\n  pointer-events: auto;\n  padding: 8px 10px;\n  border-radius: 8px;\n"]);return fN=function(){return e},e}var hN=function(e){return"\n0% {transform: translate3d(0,"+-200*e+"%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n"},dN=function(e){return"\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,"+-150*e+"%,-1px) scale(.6); opacity:0;}\n"},pN=bC("div",t.forwardRef)(fN()),vN=bC("div")(lN()),mN=(0,t.memo)((function(e){var n=e.toast,r=e.position,i=e.style,a=e.children,o=null!=n&&n.height?function(e,t){var n=e.includes("top")?1:-1,r=TC()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[hN(n),dN(n)],i=r[1];return{animation:t?kC(r[0])+" 0.35s cubic-bezier(.21,1.02,.73,1) forwards":kC(i)+" 0.4s forwards cubic-bezier(.06,.71,.55,1)"}}(n.position||r||"top-center",n.visible):{opacity:0},u=(0,t.createElement)(cN,{toast:n}),s=(0,t.createElement)(vN,Object.assign({},n.ariaProps),IC(n.message,n));return(0,t.createElement)(pN,{className:n.className,style:wC({},o,i,n.style)},"function"===typeof a?a({icon:u,message:s}):(0,t.createElement)(t.Fragment,null,u,s))}));function yN(){var e=xC(["\n  z-index: 9999;\n  > * {\n    pointer-events: auto;\n  }\n"]);return yN=function(){return e},e}!function(e,t,n,r){lC.p=t,mC=e,yC=n,gC=r}(t.createElement);var gN,kN=vC(yN()),bN=function(e){var n=e.reverseOrder,r=e.position,i=void 0===r?"top-center":r,a=e.toastOptions,o=e.gutter,u=e.children,s=e.containerStyle,c=e.containerClassName,l=MC(a),f=l.toasts,h=l.handlers;return(0,t.createElement)("div",{style:wC({position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none"},s),className:c,onMouseEnter:h.startPause,onMouseLeave:h.endPause},f.map((function(e){var r,a=e.position||i,s=function(e,t){var n=e.includes("top"),r=n?{top:0}:{bottom:0},i=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return wC({left:0,right:0,display:"flex",position:"absolute",transition:TC()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:"translateY("+t*(n?1:-1)+"px)"},r,i)}(a,h.calculateOffset(e,{reverseOrder:n,gutter:o,defaultPosition:i})),c=e.height?void 0:(r=function(t){h.updateHeight(e.id,t.height)},function(e){e&&setTimeout((function(){var t=e.getBoundingClientRect();r(t)}))});return(0,t.createElement)("div",{ref:c,className:e.visible?kN:"",key:e.id,style:s},"custom"===e.type?IC(e.message,e):u?u(e):(0,t.createElement)(mN,{toast:e,position:a}))})))},wN=LC;!function(e){e[e.Single=0]="Single",e[e.Combo=1]="Combo",e[e.Beverage=2]="Beverage"}(gN||(gN={}));var xN,_N=ae((function e(){re(this,e),this.name=void 0,this.email=void 0,this.phoneNumber=void 0,this.instructions=void 0,this.cartItems=void 0,this.dateCreated=void 0,this.dateCompleted=void 0,this.totalPrice=void 0,this.orderNumber=void 0}));!function(e){e[e.NonCombo=0]="NonCombo",e[e.Combo=1]="Combo"}(xN||(xN={}));var IN=ae((function e(t){re(this,e),this.title=void 0,this.type=void 0,this.title="",this.type=t})),EN=ae((function e(){re(this,e),this.type=void 0,this.title=void 0,this.price=void 0,this.count=void 0,this.content=void 0})),TN=n(184),SN=function(e){var n=(0,t.useRef)(),r=(0,t.useRef)(),i=(0,t.useContext)(l),a=i.cartItems,o=i.setCartItems;return(0,TN.jsxs)("div",{className:"w-full border-b",children:[(0,TN.jsx)("input",{ref:r,type:"checkbox",name:"card",id:"".concat("item-"+e.id),className:"hidden"}),(0,TN.jsxs)("label",{htmlFor:"".concat("item-"+e.id),className:"flex p-4",children:[(0,TN.jsxs)("div",{className:"w-2/3 flex flex-col items-start justify-start pr-2",children:[(0,TN.jsx)("h1",{className:"text-xl font-medium",children:e.title}),(0,TN.jsxs)("p",{className:"font-normal my-1",children:[e.price," CAD"]})]}),(0,TN.jsx)("div",{className:"w-1/3",children:(0,TN.jsx)("img",{src:e.image,alt:"",className:"h-full max-h-28 rounded"})})]}),(0,TN.jsxs)("div",{className:"accordion__content flex flex-row justify-around items-end overflow-hidden bg-grey-lighter px-4",children:[(0,TN.jsxs)("div",{className:"custom-number-input w-32 mb-2",children:[(0,TN.jsx)("label",{htmlFor:"custom-input-number",className:"w-full text-gray-700 text-sm font-semibold",children:"Quantity"}),(0,TN.jsxs)("div",{className:"flex flex-row h-10 w-full rounded-lg relative bg-transparent mt-1",children:[(0,TN.jsx)("button",{onClick:function(){n.current.value>1&&(n.current.value=parseInt(n.current.value)-1)},className:"bg-gray-300 text-gray-600 hover:text-gray-700 hover:bg-gray-400 h-full w-20 rounded-l cursor-pointer outline-none",children:(0,TN.jsx)("span",{className:"m-auto text-2xl font-thin",children:"\u2212"})}),(0,TN.jsx)("input",{defaultValue:1,ref:n,className:"outline-none focus:outline-none text-center w-full bg-gray-300 font-semibold text-md hover:text-black focus:text-black  md:text-basecursor-default flex items-center text-gray-700"}),(0,TN.jsx)("button",{onClick:function(){n.current.value=parseInt(n.current.value)+1},"data-action":"increment",className:"bg-gray-300 text-gray-600 hover:text-gray-700 hover:bg-gray-400 h-full w-20 rounded-r cursor-pointer",children:(0,TN.jsx)("span",{className:"m-auto text-2xl font-thin",children:"+"})})]})]}),(0,TN.jsx)("button",{onClick:function(){r.current.checked=!1;for(var t=0;t<a.length;t++)if(a[t].title===e.title)return a[t].count+=parseInt(n.current.value),a[t].price+=e.price*parseInt(n.current.value),o(X(a)),wN.success(n.current.value+" "+e.title+" added to cart"),void(r.current.checked=!1);var i=new EN;i.type=xN.NonCombo,i.title=e.title,i.price=e.price*parseInt(n.current.value),i.count=parseInt(n.current.value),i.content=null,o([].concat(X(a),[i])),wN.success(n.current.value+" "+e.title+" added to cart")},className:"bg-blue-500 text-white h-fit mb-2 px-4 py-2 rounded-md text-1xl font-medium",children:"Add to Cart"})]})]})},CN=function(e){var n=e.comboNumber,r=e.selectedCombo,i=e.setSelectedCombo,a=e.setPopUpVisible,o=s((0,t.useState)(["1 Meat 2 Vegetables",11.99,[]]),2),u=o[0],c=o[1],l=s((0,t.useState)([]),2),f=l[0],h=l[1];(0,t.useEffect)((function(){switch(n){case 1:c(["1 Meat 2 Vegetables",11.99]),h([new IN("meat"),new IN("vegetable"),new IN("vegetable")]);break;case 2:c(["2 Meats 1 Vegetable",12.99]),h([new IN("meat"),new IN("meat"),new IN("vegetable")]);break;case 3:c(["2 Meat 2 Vegetables",13.99]),h([new IN("meat"),new IN("meat"),new IN("vegetable"),new IN("vegetable")]);break;case 4:c(["3 Meats",13.99]),h([new IN("meat"),new IN("meat"),new IN("meat")])}}),[r]);var d=function(e,t){var n=(null===e||void 0===e?void 0:e.filter((function(e){return"meat"===e.type})).length)===t.filter((function(e){return"meat"===e.type})).length,r=(null===e||void 0===e?void 0:e.filter((function(e){return"vegetable"===e.type})).length)===t.filter((function(e){return"vegetable"===e.type})).length;return n&&r};return(0,TN.jsx)("div",{className:"mt-1 w-full border-b rounded-lg transition ease-in "+(d(r,f)?"bg-red-500 text-white":""),onClick:function(){d(r,f)?i(null):(i(f),window.scrollTo(0,0),a(!0))},children:(0,TN.jsxs)("div",{className:"flex items-center p-4",children:[(0,TN.jsxs)("div",{className:"w-2/3 flex flex-col items-start justify-start pr-2",children:[(0,TN.jsx)("h1",{className:"text-xl font-medium",children:u[0]}),(0,TN.jsxs)("p",{className:"font-normal my-1",children:[u[1]," CAD"]})]}),(0,TN.jsxs)("div",{className:"ml-auto flex flex-wrap",children:[f.filter((function(e){return"meat"===e.type})).map((function(e,t){return(0,TN.jsx)("i",{className:"fa-solid fa-xl fa-drumstick-bite text-red-500"},t)})),f.filter((function(e){return"vegetable"===e.type})).map((function(e,t){return(0,TN.jsx)("i",{className:"fa-solid fa-xl fa-leaf text-green-500"},t)}))]})]})})},NN=function(e){e.idx;var n=e.comboOption,r=e.selectedCombo,i=e.setSelectedCombo,a=s((0,t.useState)(0),2),o=a[0],u=a[1];(0,t.useEffect)((function(){u(r?r.filter((function(e){return e.title===n.title})).length:0)}),[r]);return(0,TN.jsxs)("li",{className:"w-full h-fit flex items-stretch justify-between font-medium border bg-white rounded-lg mb-1",children:[(0,TN.jsx)("h1",{className:"p-1 w-3/4",children:n.title}),(0,TN.jsxs)("div",{className:"w-1/4 bg-gray-200 flex items-center rounded-lg",children:[(0,TN.jsx)("button",{onClick:function(){return function(e){var t=X(r),n=null===t||void 0===t?void 0:t.filter((function(t){return t.type===e.type&&t.title===e.title}));null!==n&&void 0!==n&&n.length?(n[0].title="",i(t),u(o-1)):wN.error("Can't remove any more!")}(n)},className:"grow h-full flex items-center justify-center bg-gray-300 px-2 rounded-l-lg cursor-pointer outline-none",children:"-"}),(0,TN.jsx)("p",{className:"w-8 outline-none focus:outline-none text-center bg-transparent font-semibold text-md md:text-basecursor-default",children:o}),(0,TN.jsx)("button",{onClick:function(){return function(e){var t=X(r),n=null===t||void 0===t?void 0:t.filter((function(t){return t.type===e.type&&""===t.title}));null!==n&&void 0!==n&&n.length?(n[0].title=e.title,i(t),u(o+1)):wN.error("Can't add any more "+e.type+" items!")}(n)},className:"grow h-full flex items-center justify-center bg-gray-300 px-2 rounded-r-lg cursor-pointer outline-none",children:"+"})]})]})},AN=function(e){var n=e.meatComboItems,r=e.vegetableComboItems,i=e.selectedCombo,a=e.setSelectedCombo,o=e.setPopUpVisible,u=(0,t.useContext)(l),s=u.cartItems,c=u.setCartItems,f=function(e,t){return JSON.stringify(e)===JSON.stringify(t)};return(0,TN.jsxs)("div",{className:"flex flex-col w-full h-full transition duration-600",children:[(0,TN.jsxs)("div",{className:"w-full flex justify-between mt-4",children:[(0,TN.jsxs)("h1",{className:"text-3xl font-bold mb-1 flex items-center",children:["Meats ",i?(0,TN.jsxs)("span",{className:"text-base font-thin ml-2",children:["(",i.filter((function(e){return"meat"===e.type})).length," required)"]}):""]}),(0,TN.jsx)("span",{onClick:function(){a(null),o(!1)},className:"mr-2 mt-1",children:(0,TN.jsx)("i",{className:"fa-solid fa-2xl fa-multiply text-slate-600"})})]}),(0,TN.jsx)("ol",{children:n.map((function(e,t){return(0,TN.jsx)(NN,{idx:t,comboOption:e,selectedCombo:i,setSelectedCombo:a},t)}))}),(0,TN.jsxs)("div",{className:0===(null===i||void 0===i?void 0:i.filter((function(e){return"vegetable"===e.type})).length)?"hidden":"",children:[(0,TN.jsxs)("h1",{className:"text-3xl font-bold mt-2 mb-1 flex items-center",children:["Vegetables",i?(0,TN.jsxs)("span",{className:"text-base font-thin ml-2",children:["(",i.filter((function(e){return"vegetable"===e.type})).length," required)"]}):""]}),(0,TN.jsx)("ol",{children:r.map((function(e,t){return(0,TN.jsx)(NN,{idx:t,comboOption:e,selectedCombo:i,setSelectedCombo:a},t)}))})]}),(0,TN.jsx)("div",{className:"pt-2 pb-5 flex w-full justify-end items-center mb-2 "+(i?"":"hidden"),children:(0,TN.jsx)("button",{onClick:function(){if(i.some((function(e){return""===e.title})))wN.error("Please select all combo options");else{var e=new EN;e.type=xN.Combo;var t,n=[i.filter((function(e){return"meat"===e.type})).length,i.filter((function(e){return"vegetable"===e.type})).length];f(n,[1,2])?t=["1 Meat 2 Vegetables",11.99]:f(n,[2,1])?t=["2 Meats 1 Vegetable",12.99]:f(n,[2,2])?t=["2 Meats 2 Vegetables",13.99]:f(n,[3,0])&&(t=["3 Meats",13.99]),e.title=t[0],e.price=t[1],e.count=1,e.content=i.map((function(e){return Object.assign({},e)})),wN.success(e.title+" added to cart!"),c([].concat(X(s),[e])),o(!1),a(null)}},className:"bg-blue-500 text-white h-fit px-4 py-2 rounded-md text-1xl font-medium",children:"Add to Cart"})})]})},DN=function(){var e=(0,t.useContext)(l),n=e.cartItems,r=(e._,s((0,t.useState)(gN.Combo),2)),i=r[0],a=r[1],o=s((0,t.useState)([]),2),u=o[0],c=o[1],f=s((0,t.useState)([]),2),h=f[0],d=f[1],p=(0,t.useRef)(null),v=(0,t.useRef)(null),m=(0,t.useRef)(null),y=s((0,t.useState)(!1),2),g=y[0],k=y[1],b=s((0,t.useState)([]),2),w=b[0],x=b[1],_=s((0,t.useState)([]),2),I=_[0],E=_[1],T=s((0,t.useState)(null),2),S=T[0],C=T[1];(0,t.useEffect)((function(){N(),A()}),[]);var N=function(){xS(ZT($E(aC,"menu-items-production"),tS("visibility","==",!0))).then((function(e){var t=[];e.forEach((function(e){t.push(te(te({},e.data()),{},{id:e.id}))})),x(t.filter((function(e){return e.category===gN.Combo&&"meat"===e.type}))),E(t.filter((function(e){return e.category===gN.Combo&&"vegetable"===e.type}))),c(t.filter((function(e){return e.category===gN.Single}))),d(t.filter((function(e){return e.category===gN.Beverage})))}))},A=function(){var e=new IntersectionObserver((function(e){var t=e[0];if(!(t.boundingClientRect.top>window.innerHeight/2)){var n=t.target.classList[0];"comboSection"===n?a(gN.Combo):"singleSection"===n?a(t.isIntersecting?gN.Combo:gN.Single):"beverageSection"===n&&a(t.isIntersecting?gN.Single:gN.Beverage)}}),{rootMargin:"-200px 10px 0px 10px"});e.observe(v.current),e.observe(p.current),e.observe(m.current)},D=function(e){var t,n,r;switch(e){case gN.Combo:window.scrollTo({top:-70,behavior:"smooth"});break;case gN.Single:r=(null===(t=v.current)||void 0===t?void 0:t.getBoundingClientRect().top)-160,window.scrollBy({top:r,behavior:"smooth"});break;case gN.Beverage:r=(null===(n=m.current)||void 0===n?void 0:n.getBoundingClientRect().top)-160,window.scrollBy({top:r,behavior:"smooth"})}};return(0,TN.jsxs)("div",{className:"App ".concat(g?"overflow-hidden":""),children:[(0,TN.jsxs)("div",{className:"w-full fixed top-0 z-10",children:[(0,TN.jsx)("div",{className:"hero-area relative flex justify-center items-center"}),(0,TN.jsx)("div",{className:"w-full mb-1 flex flex-row items-center justify-between bg-gray-100",children:(0,TN.jsxs)("ul",{className:"w-full grid grid-cols-3",children:[(0,TN.jsx)("button",{onClick:function(){return D(gN.Combo)},className:"w-full mr-3 text-center block border rounded-r py-2 px-4 "+(i===gN.Combo?"bg-red-500 border-red-500 text-white":"bg-gray-100 border-none"),children:"Combos"}),(0,TN.jsx)("button",{onClick:function(){return D(gN.Single)},className:"w-full mr-3 text-center block border rounded py-2 px-4 "+(i===gN.Single?"bg-red-500 border-red-500 text-white":"bg-gray-100 border-none"),children:"Singles"}),(0,TN.jsx)("button",{onClick:function(){return D(gN.Beverage)},className:"w-full mr-3 text-center block border rounded-l py-2 px-4 "+(i===gN.Beverage?"bg-red-500 border-red-500 text-white":"bg-gray-100 border-none"),children:"Beverages"})]})})]}),(0,TN.jsxs)("div",{className:"w-11/12 pb-24 mt-40",children:[(0,TN.jsx)("h1",{ref:p,className:"comboSection text-3xl font-bold",children:"Combos"}),X(Array(4)).map((function(e,t){return(0,TN.jsx)(CN,{comboNumber:t+1,selectedCombo:S,setSelectedCombo:C,setPopUpVisible:k},t+1)})),(0,TN.jsx)("h1",{ref:v,className:"singleSection text-3xl font-bold mt-5",children:"Singles"}),u.map((function(e){return(0,TN.jsx)(SN,te({},e),e.id)})),u.map((function(e){return(0,TN.jsx)(SN,te({},e),e.id)})),u.map((function(e){return(0,TN.jsx)(SN,te({},e),e.id)})),u.map((function(e){return(0,TN.jsx)(SN,te({},e),e.id)})),u.map((function(e){return(0,TN.jsx)(SN,te({},e),e.id)})),u.map((function(e){return(0,TN.jsx)(SN,te({},e),e.id)})),u.map((function(e){return(0,TN.jsx)(SN,te({},e),e.id)})),u.map((function(e){return(0,TN.jsx)(SN,te({},e),e.id)})),u.map((function(e){return(0,TN.jsx)(SN,te({},e),e.id)})),(0,TN.jsx)("h1",{ref:m,className:"beverageSection text-3xl font-bold mt-5",children:"Beverages"}),h.map((function(e){return(0,TN.jsx)(SN,te({},e),e.id)})),h.map((function(e){return(0,TN.jsx)(SN,te({},e),e.id)}))]}),(0,TN.jsx)("div",{className:"bg-transparent fixed flex items-center bottom-[4%]",children:(0,TN.jsxs)($,{to:"/checkout",className:"shadow-xl flex justify-between items-center w-80 bg-red-600 hover:bg-red-700 text-white text-sm px-4 py-4 rounded-full",children:[(0,TN.jsx)("i",{className:"fa-solid fa-lg fa-cart-shopping"}),(0,TN.jsx)("h1",{className:"text-lg font-extrabold",children:"View Cart"}),(0,TN.jsx)("h1",{className:"text-lg font-extrabold",children:n.reduce((function(e,t){return e+t.count}),0)})]})}),(0,TN.jsx)("div",{onClick:function(){k(!1),C(null)},className:"fixed z-30 inset-0 bg-gray-900 opacity-60 ".concat(g?"":"hidden")}),(0,TN.jsx)("div",{className:"overflow-scroll px-3 fixed z-40 bottom-0 w-full rounded-t-lg bg-white ".concat(g?"slide-up":"slide-down"),children:(0,TN.jsx)(AN,{meatComboItems:w,vegetableComboItems:I,selectedCombo:S,setSelectedCombo:C,setPopUpVisible:k})})]})},PN=function(e){var n,r=e.cartItem,i=e.subtotalState,a=(0,t.useContext)(l),o=a.cartItems,u=a.setCartItems,s=i.subtotal,c=i.setSubtotal,f=A();return(0,TN.jsxs)("div",{className:"w-full flex justify-between items-center p-4 border-b",children:[(0,TN.jsxs)("div",{className:"w-3/5",children:[(0,TN.jsx)("h1",{className:"text-xl",children:r.title}),null===(n=r.content)||void 0===n?void 0:n.map((function(e,t){return(0,TN.jsx)("li",{className:"text-sm",children:e.title},t)}))]}),(0,TN.jsxs)("div",{className:"flex justify-around items-center w-2/5",children:[(0,TN.jsxs)("p",{children:["x",r.count]}),(0,TN.jsxs)("p",{children:[r.price,"CAD"]}),(0,TN.jsx)("i",{onClick:function(){wN.success(r.title+" removed from cart");var e=o.filter((function(e){return e!==r}));u(e);var t=s-r.price;c(t),0===e.length&&f("/")},className:"fa-solid fa-trash-can"})]})]})},ON=function(){var e=(0,t.useContext)(l),n=e.cartItems,r=(e._,s((0,t.useState)(0),2)),i=r[0],a=r[1];return(0,t.useEffect)((function(){var e=0!==n.length?Object.values(n).reduce((function(e,t){return e+t.price}),0):0;a(e)}),[]),(0,TN.jsxs)("div",{className:"App",children:[(0,TN.jsx)("div",{className:"mb-5 hero-area relative flex justify-center items-center"}),(0,TN.jsxs)("div",{className:"w-11/12 mt-1 flex flex-row items-center",children:[(0,TN.jsx)("div",{className:"menu-line grow"}),(0,TN.jsxs)("div",{className:"flex items-center px-3",children:[(0,TN.jsx)("i",{className:"fa-solid fa-lg fa-cart-shopping"}),(0,TN.jsx)("h2",{className:"text-3xl font-bold grow-0 pl-2",children:"Cart"})]}),(0,TN.jsx)("div",{className:"menu-line grow"})]}),(0,TN.jsxs)("div",{className:"w-11/12 mt-3 shadow-md rounded-lg p-1",children:[n.map((function(e,t){return(0,TN.jsx)(PN,{cartItem:e,subtotalState:{subtotal:i,setSubtotal:a}},t)})),(0,TN.jsxs)("div",{className:"w-full flex flex-col items-center p-3",children:[(0,TN.jsxs)("div",{className:"w-full font-thin flex justify-between items-center",children:[(0,TN.jsx)("h1",{className:"text-lg w-1/2",children:"Subtotal"}),(0,TN.jsxs)("p",{className:"ml-auto",children:[i.toFixed(2)," CAD"]})]}),(0,TN.jsxs)("div",{className:"w-full font-thin flex justify-between items-center",children:[(0,TN.jsx)("h1",{className:"text-lg w-1/2",children:"GST"}),(0,TN.jsxs)("p",{className:"ml-auto",children:[(.05*i).toFixed(2)," CAD"]})]}),(0,TN.jsxs)("div",{className:"w-full font-thin flex justify-between items-center",children:[(0,TN.jsx)("h1",{className:"text-lg w-1/2",children:"PST"}),(0,TN.jsxs)("p",{className:"ml-auto",children:[(.09975*i).toFixed(2)," CAD"]})]}),(0,TN.jsxs)("div",{className:"w-full font-bold flex justify-between items-center",children:[(0,TN.jsx)("h1",{className:"text-lg w-1/2",children:"Total"}),(0,TN.jsxs)("p",{className:"ml-auto",children:[(1.14975*i).toFixed(2)," CAD"]})]})]})]}),(0,TN.jsx)($,{to:"/order",className:"flex justify-center items-center w-1/2 mt-4 bg-red-600 text-white text-sm px-4 py-4 rounded-full",children:(0,TN.jsx)("h1",{className:"text-lg font-extrabold",children:"Continue"})}),(0,TN.jsx)($,{to:"/",className:"flex justify-center items-center w-1/2 mt-2 mb-5 bg-slate-400 text-white text-sm py-4 rounded-full",children:(0,TN.jsx)("h1",{className:"text-lg font-extrabold",children:"Add items"})})]})},RN=function(){var e=(0,t.useContext)(l),n=e.cartItems,r=(e.setCartItems,s((0,t.useState)(0),2)),i=r[0],a=r[1],o=(0,t.useRef)(),u=(0,t.useRef)(),c=(0,t.useRef)(),f=(0,t.useRef)(),h=s((0,t.useState)(!1),2),d=h[0],p=h[1],v=s((0,t.useState)(""),2),m=v[0],y=v[1],g=s((0,t.useState)(!1),2),k=g[0],b=g[1],w=s((0,t.useState)(0),2),x=w[0],_=w[1],I=A();(0,t.useEffect)((function(){if(0!==n.length){var e=0!==n.length?Object.values(n).reduce((function(e,t){return e+t.price}),0):0;a(parseFloat((1.14975*e).toFixed(2))),o.current.value=localStorage.getItem("name"),u.current.value=localStorage.getItem("email")?JSON.parse(localStorage.getItem("email")):"",c.current.value=localStorage.getItem("phoneNumber")?JSON.parse(localStorage.getItem("phoneNumber")):"",xS(ZT($E(aC,"orders-production"),rS("orderNumber","desc"))).then((function(e){e.docs&&_(e.docs[0].data().orderNumber+1)}))}else I(-1)}),[]);return(0,TN.jsxs)("div",{className:"App",children:[(0,TN.jsx)("div",{className:"mb-5 hero-area relative flex justify-center items-center"}),d?(0,TN.jsxs)("div",{className:"flex flex-col items-center rounded px-4 py-4 shadow-md w-11/12 mb-2",children:[(0,TN.jsx)("h1",{className:"text-center text-3xl font-bold w-full",children:"Order Summary"}),(0,TN.jsxs)("p",{className:"text-center mb-1 text-xl w-full",children:["Order #: ",(0,TN.jsx)("span",{className:"font-bold",children:x})]}),n.map((function(e,t){var n;return(0,TN.jsxs)("div",{className:"w-full flex justify-between items-center p-4 border-t",children:[(0,TN.jsxs)("div",{className:"w-3/5",children:[(0,TN.jsx)("h1",{className:"text-xl",children:e.title}),null===(n=e.content)||void 0===n?void 0:n.map((function(e,t){return(0,TN.jsx)("li",{className:"text-sm",children:e.title},t)}))]}),(0,TN.jsxs)("div",{className:"flex justify-around items-center w-2/5",children:[(0,TN.jsxs)("p",{children:["x",e.count]}),(0,TN.jsxs)("p",{children:[e.price,"CAD"]})]})]},t)})),(0,TN.jsxs)("p",{className:"w-full text-xl font-semibold border-t pt-2 pl-4",children:["Total: ",i," CAD"]})]}):(0,TN.jsxs)(TN.Fragment,{children:[(0,TN.jsxs)("div",{className:"w-11/12 mt-1 flex flex-row items-center",children:[(0,TN.jsx)("div",{className:"menu-line grow"}),(0,TN.jsxs)("div",{className:"flex items-center px-3",children:[(0,TN.jsx)("i",{className:"fa-solid fa-lg fa-receipt"}),(0,TN.jsx)("h2",{className:"text-3xl font-bold grow-0 pl-2",children:"Order"})]}),(0,TN.jsx)("div",{className:"menu-line grow"})]}),(0,TN.jsx)("div",{className:"w-full mt-2 max-w-sm",children:(0,TN.jsxs)("form",{className:"bg-white rounded px-8 pt-6",children:[(0,TN.jsxs)("div",{className:"mb-4",children:[(0,TN.jsxs)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"firstname",children:["Name ",(0,TN.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,TN.jsx)("input",{ref:o,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"firstname",type:"text",placeholder:"Name",required:!0})]}),(0,TN.jsxs)("div",{className:"mb-4",children:[(0,TN.jsxs)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"email",children:["Email ",(0,TN.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,TN.jsx)("input",{ref:u,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"email",type:"email",placeholder:"Enter your email",required:!0})]}),(0,TN.jsxs)("div",{className:"mb-4",children:[(0,TN.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"phonenumber",children:"Phone Number"}),(0,TN.jsx)("input",{ref:c,className:"shadow appearance-none border rounded w-full py-2 px-3 mb-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"phonenumber",type:"tel",placeholder:"+1xxxxxxxxxx",required:!0})]}),(0,TN.jsxs)("div",{className:"mb-1",children:[(0,TN.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"instructions",children:"Instructions"}),(0,TN.jsx)("input",{ref:f,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"instructions",type:"text",placeholder:"Add extra sauce, etc.",required:!0})]})]})}),m?(0,TN.jsxs)("small",{className:"text-red-600 mt-2",children:[(0,TN.jsx)("i",{className:"fa-solid fa-circle-exclamation mr-1"}),m]}):"",(0,TN.jsx)($,{to:"/order",className:"flex justify-center items-center w-1/2 mt-3 bg-red-600 text-white text-sm px-4 py-4 rounded-full",children:k?(0,TN.jsxs)(TN.Fragment,{children:[(0,TN.jsx)("span",{className:"spinner"}),(0,TN.jsx)("p",{className:"text-lg font-extrabold ml-2",children:"Placing Order"})]}):(0,TN.jsx)(TN.Fragment,{children:(0,TN.jsx)("h1",{onClick:function(){var e;if(b(!0),!o.current.value||!u.current.value)return y("Name and email fields are required"),void b(!1);if(e=u.current.value,!String(e).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/))return y("Please enter a valid email format"),void b(!1);if(0===n.length)return y("Cart has no items!"),void b(!1);var t=new _N;t.name=o.current.value,t.email=u.current.value,t.phoneNumber=c.current.value,t.instructions=f.current.value,t.cartItems=n.map((function(e){return te({},e)})),t.dateCreated=new Date,t.dateCompleted=null,t.totalPrice=i,t.orderNumber=x,IS(JE($E(aC,"orders-production")),te({},t)).then((function(){b(!1),localStorage.setItem("firstName",JSON.stringify(o.current.value)),localStorage.setItem("email",JSON.stringify(u.current.value)),localStorage.setItem("phoneNumber",JSON.stringify(c.current.value)),y(""),p(!0),wN.success("Order Placed!")}),(function(e){y(e.message),wN.error("Order couldn't be placed, please try again later.")}))},className:"w-full h-full text-center text-lg font-extrabold",children:"Place Order"})})}),(0,TN.jsx)($,{to:"/checkout",className:"flex justify-center items-center w-1/2 mt-2 mb-5 bg-slate-400 text-white text-sm py-4 rounded-full",children:(0,TN.jsx)("h1",{className:"text-lg font-extrabold",children:"Back to Cart"})})]})]})},LN=n(454);var MN=function(){var e=s((0,t.useState)([]),2),n=e[0],r=e[1];return(0,t.useEffect)((function(){LN.polyfill()}),[]),(0,TN.jsx)(Y,{children:(0,TN.jsxs)(l.Provider,{value:{cartItems:n,setCartItems:r},children:[(0,TN.jsxs)(T,{children:[(0,TN.jsx)(I,{path:"/",element:(0,TN.jsx)(DN,{})}),(0,TN.jsx)(I,{path:"/checkout",element:(0,TN.jsx)(ON,{})}),(0,TN.jsx)(I,{path:"/order",element:(0,TN.jsx)(RN,{})})]}),(0,TN.jsx)(bN,{})]})})};r.render((0,TN.jsx)(t.StrictMode,{children:(0,TN.jsx)(MN,{})}),document.getElementById("root"))}()}();
//# sourceMappingURL=main.149a3c20.js.map